const window={};let Gibberish=null,initialized=!1;!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{(void 0!==window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Gibberish=e()}}(function(){var define,module,exports;return function(){return function e(t,n,s){function i(a,o){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!o&&u)return u(a,!0);if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){return i(t[a][1][e]||e)},c,c.exports,e,t,n,s)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<s.length;a++)i(s[a]);return i}}()({1:[function(e,t,n){let s=e("../ugen.js"),i=Object.create(s);Object.assign(i,{__type__:"analyzer",priority:0}),t.exports=i},{"../ugen.js":69}],2:[function(e,t,n){t.exports=function(t){const{In:n,Out:s,SSD:i}=e("./singlesampledelay.js")(t),r={SSD:i,SSD_In:n,SSD_Out:s,Follow:e("./follow.dsp.js")(t)};return r.Follow_out=r.Follow.out,r.Follow_in=r.Follow.in,r.export=(e=>{for(let t in r)"export"!==t&&(e[t]=r[t])}),r}},{"./follow.dsp.js":3,"./singlesampledelay.js":4}],3:[function(e,t,n){const s=e("genish.js"),i=e("./analyzer.js"),r=e("../ugen.js"),a=s;t.exports=function(e){const t=function(n){const o=Object.assign({},t.defaults,n);let u=void 0!==o.input.isStereo&&o.input.isStereo,l=o;if("worklet"===e.mode){o.input={id:o.input.id},o.isStereo=u,e.utilities.getUID(),o.overrideid=e.utilities.getUID(),o.id=o.overrideid,e.worklet.port.postMessage({address:"add",properties:JSON.stringify(o),name:["analysis","Follow"]}),e.worklet.ugens.set(o.overrideid,l);let t=o.multiplier;Object.defineProperty(l,"multiplier",{get:()=>t,set(n){t=n,e.worklet.port.postMessage({address:"set",object:o.overrideid,name:"multiplier",value:t})}});let n=o.offset;Object.defineProperty(l,"offset",{get:()=>n,set(t){n=t,e.worklet.port.postMessage({address:"set",object:o.overrideid,name:"offset",value:n})}})}else{const t=s.data(o.bufferSize,1),l=s.in("input"),c=s.in("multiplier"),d=s.in("offset"),p=Object.create(i);p.id=o.id=n.overrideid;let m=s.data(1,1,{meta:!0});m.memory.values.idx;const h={callback:function(e){return m[0]},input:o.input,isStereo:u,dirty:!0,inputNames:["input","memory"],inputs:[o.input],id:e.utilities.getUID(),__properties__:{input:o.input}};h.callback.ugenName=h.ugenName=`follow_out_${p.id}`,h.id=n.overrideid;const f=Object.create(r);if(!0===u){const e=s.accum(1,0,{max:o.bufferSize,min:0}),n=s.data(1,1,{meta:!0}),i=s.abs(a.add(l[0],l[1]));n[0]=a.sub(a.add(n[0],i),s.peek(t,e,{mode:"simple"})),s.poke(t,s.abs(i),e),m=a.add(a.mul(a.div(n[0],o.bufferSize),c),d)}else{const e=s.accum(1,0,{max:o.bufferSize,min:0}),n=s.data(1,1,{meta:!0});n[0]=a.sub(a.add(n[0],s.abs(l)),s.peek(t,e,{mode:"simple"})),s.poke(t,s.abs(l),e),m=a.add(a.mul(a.div(n[0],o.bufferSize),c),d)}e.utilities.getUID(),o.isStereo=!1;const g=e.factory(f,m,["analysis","follow_in"],o);g.callback.ugenName=g.ugenName=`follow_in_${p.id}`,-1===e.analyzers.indexOf(g)&&e.analyzers.push(g),e.dirty(e.analyzers),e.ugens.set(n.overrideid,g),h.record=g}return l};return t.defaults={input:0,bufferSize:1024,multiplier:1,offset:0},t}},{"../ugen.js":69,"./analyzer.js":1,"genish.js":114}],4:[function(e,t,n){const s=e("genish.js"),i=e("./analyzer.js"),r=(e("../workletProxy.js"),e("../ugen.js"));t.exports=function(e){const t=e=>{const r=Object.create(i),o=Object.assign({},t.defaults,e),u=(o.isStereo,s.in("input"),s.history(0)),l=s.history(0);return r.out=n([u,l],o),r.in=a([u,l],o),r.listen=r.in.listen,r},n=(t,n)=>{let i;if("processor"===e.mode){const r=Array.isArray(t)?t[0].id:t.id;void 0===(i=e.ugens.get(r))&&(i=s.history(0),e.ugens.set(r,i)),void 0===n&&(n={id:r})}else i=t[0];return e.factory(Object.create(r),i.out,["analysis","SSD_Out"],n,null)},a=t=>{const n=s.in("input");let i,a;"processor"===e.mode?(i=e.ugens.get(t.id-1),a=e.ugens.get(t.id)):(i=t[0],a=t[1]);let o=Object.create(r);if(o.listen=function(t){o.input=t,e.dirty(e.analyzers);let n=t.isStereo;if(void 0===t.isStereo&&!0===t.isop&&(n=!0===t.inputs[0].isStereo||!0===t.inputs[1].isStereo),!0===n&&"processor"===e.mode){const e=i.graph.memory.value.idx;o.callback=function(t,n){return n[e]=t[0],n[e+1]=t[1],0},o.callback.ugenName=o.ugenName}},o=e.factory(o,n,["analysis","SSD_In"],{input:0}),"processor"===e.mode){const e=i.graph.memory.value.idx;o.callback=function(t,n){return n[e]=t,0},o.callback.ugenName=o.ugenName}return o.type="analysis",e.analyzers.push(o),o};return t.defaults={input:0,isStereo:!1},{In:a,Out:n,SSD:t}}},{"../ugen.js":69,"../workletProxy.js":71,"./analyzer.js":1,"genish.js":114}],5:[function(e,t,n){const s=e("../ugen.js"),i=e("genish.js");t.exports=function(e){const t=function(n){const r=Object.create(s),a=i.in("attack"),o=i.in("decay"),u=Object.assign({},t.defaults,n),l=i.ad(a,o,{shape:u.shape,alpha:u.alpha});return r.trigger=l.trigger,e.factory(r,l,["envelopes","AD"],u)};return t.defaults={attack:44100,decay:44100,shape:"exponential",alpha:5},t}},{"../ugen.js":69,"genish.js":114}],6:[function(e,t,n){const s=e("../ugen.js"),i=e("genish.js");t.exports=function(e){const t=function(n){const r=Object.create(s),a=i.in("attack"),o=i.in("decay"),u=i.in("sustain"),l=i.in("release"),c=i.in("sustainLevel"),d=Object.assign({},t.defaults,n);Object.assign(r,d);const p=i.adsr(a,o,u,c,l,{triggerRelease:d.triggerRelease,shape:d.shape,alpha:d.alpha});return r.trigger=p.trigger,r.advance=p.release,e.factory(r,p,["envelopes","ADSR"],d)};return t.defaults={attack:22050,decay:22050,sustain:44100,sustainLevel:.6,release:44100,triggerRelease:!1,shape:"exponential",alpha:5},t}},{"../ugen.js":69,"genish.js":114}],7:[function(e,t,n){const s=e("genish.js");t.exports=function(t){const n={AD:e("./ad.js")(t),ADSR:e("./adsr.js")(t),Ramp:e("./ramp.js")(t),export:e=>{for(let t in n)"export"!==t&&"factory"!==t&&(e[t]=n[t])},factory(e,t,n,i,r,a,o,u=!1){let l;return 1!=e?l=s.ad(n,i,{shape:t}):(l=s.adsr(n,i,r,a,o,{shape:t,triggerRelease:u})).advance=l.release,l}};return n}},{"./ad.js":5,"./adsr.js":6,"./ramp.js":8,"genish.js":114}],8:[function(e,t,n){const s=e("../ugen.js"),i=e("genish.js");t.exports=function(e){const t=function(n){const r=Object.create(s),a=i.in("length"),o=i.in("from"),u=i.in("to"),l=Object.assign({},t.defaults,n),c=i.bang(),d=i.accum(i.div(1,a),c,{shouldWrap:l.shouldLoop,shouldClamp:!0}),p=i.sub(u,o),m=i.add(o,i.mul(d,p));return r.trigger=c.trigger,e.factory(r,m,["envelopes","ramp"],l)};return t.defaults={from:0,to:1,length:i.gen.samplerate,shouldLoop:!1},t}},{"../ugen.js":69,"genish.js":114}],9:[function(e,t,n){const s=e("./realm.js");t.exports=function(e=window,t=4096){const n=[];let i;if("function"!=typeof AudioWorkletNode||!("audioWorklet"in AudioContext.prototype)){e.AudioWorkletNode=function(e,n,s){const a=o(e)[n],u=s&&s.outputChannelCount?s.outputChannelCount[0]:2,l=e.createScriptProcessor(t,2,u);if(l.parameters=new Map,a.properties)for(let t=0;t<a.properties.length;t++){const n=a.properties[t],s=e.createGain().gain;s.value=n.defaultValue,l.parameters.set(n.name,s)}const c=new MessageChannel;i=c.port2;const d=new a.Processor(s||{});return i=null,l.port=c.port1,l.processor=a,l.instance=d,l.onaudioprocess=r,l},Object.defineProperty((e.AudioContext||e.webkitAudioContext).prototype,"audioWorklet",{get(){return this.$$audioWorklet||(this.$$audioWorklet=new e.AudioWorklet(this))}});const n=function(){this.port=i};n.prototype={},e.AudioWorklet=class{constructor(e){this.$$context=e}addModule(e,t){return fetch(e).then(e=>{if(!e.ok)throw Error(e.status);return e.text()}).then(e=>{const i={sampleRate:this.$$context.sampleRate,currentTime:this.$$context.currentTime,AudioWorkletProcessor:n,registerProcessor:(e,t)=>{o(this.$$context)[e]={realm:r,context:i,Processor:t,properties:t.parameterDescriptors||[]}}};i.self=i;const r=new s(i,document.documentElement);return r.exec((t&&t.transpile||String)(e)),null})}}}function r(e){const t={};let s=-1;this.parameters.forEach((e,i)=>{const r=n[++s]||(n[s]=new Float32Array(this.bufferSize));r.fill(e.value),t[i]=r}),this.processor.realm.exec("self.sampleRate=sampleRate="+this.context.sampleRate+";self.currentTime=currentTime="+this.context.currentTime);const i=a(e.inputBuffer),r=a(e.outputBuffer);this.instance.process([i],[r],t)}function a(e){const t=[];for(let n=0;n<e.numberOfChannels;n++)t[n]=e.getChannelData(n);return t}function o(e){return e.$$processors||(e.$$processors={})}}},{"./realm.js":11}],10:[function(e,t,n){const s=function(e){this.cmp=e||function(e,t){return e-t},this.length=0,this.data=[]};s.prototype.peek=function(){return this.data[0]},s.prototype.push=function(e){this.data.push(e);for(var t,n,s=this.data.length-1;s>0&&(t=s-1>>>1,this.cmp(this.data[s],this.data[t])<0);)n=this.data[t],this.data[t]=this.data[s],this.data[s]=n,s=t;return this.length++},s.prototype.pop=function(){var e=this.data.pop(),t=this.data[0];if(this.data.length>0){this.data[0]=e;for(var n,s,i,r,a=0,o=this.data.length-1;s=(n=1+(a<<1))+1,i=a,n<=o&&this.cmp(this.data[n],this.data[i])<0&&(i=n),s<=o&&this.cmp(this.data[s],this.data[i])<0&&(i=s),i!==a;)r=this.data[i],this.data[i]=this.data[a],this.data[a]=r,a=i}else t=e;return this.length--,t},t.exports=s},{}],11:[function(e,t,n){t.exports=function(e,t){const n=document.createElement("iframe");n.style.cssText="position:absolute;left:0;top:-999px;width:1px;height:1px;",t.appendChild(n);const s=n.contentWindow,i=s.document;let r="var window,$hook";for(const t in s)t in e||"eval"===t||(r+=",",r+=t);for(const t in e)r+=",",r+=t,r+="=self.",r+=t;const a=i.createElement("script");a.appendChild(i.createTextNode(`function $hook(self,console) {"use strict";\n        ${r};return function() {return eval(arguments[0])}}`)),i.body.appendChild(a),this.exec=s.$hook.call(e,e,console)}},{}],12:[function(e,t,n){const s=e("./workletProxy.js"),i=e("./fx/effect.js");t.exports=function(e){const t=s(e),n=function(n,s,r,a,o=null,u=!0){"processor"===e.mode?n.callback=null===o?e.genish.gen.createCallback(s,e.memory,!1,!0):o:n.callback={out:[]};let l=Array.isArray(r)?r[r.length-1]:r;Object.assign(n,{id:a.id||e.utilities.getUID(),ugenName:l+"_",graph:s,inputNames:n.inputNames||new Set(e.genish.gen.parameters),isStereo:Array.isArray(s),dirty:!0,__properties__:a,__addresses__:{}}),n.ugenName+=n.id,"processor"===e.mode&&(n.callback.ugenName=n.ugenName,n.callback.id=n.id);for(let t of n.inputNames){if("memory"===t)continue;let s,i=a[t],r="object"!=typeof i&&!isNaN(i);r&&(s=e.memory.alloc(1),e.memory.heap[s]=i,n.__addresses__[t]=s);let o,u=Object.getOwnPropertyDescriptor(n,t);void 0!==u&&(o=u.set),Object.defineProperty(n,t,{configurable:!0,get:()=>r?e.memory.heap[s]:i,set(t){i!==t&&(void 0!==o&&o(t),"number"==typeof t?(e.memory.heap[s]=i=t,!1===r&&e.dirty(n),r=!0):(i=t,e.dirty(n),r=!1))}})}if(i.isPrototypeOf(n)){let t=n.bypass;Object.defineProperty(n,"bypass",{configurable:!0,get:()=>t,set(s){t!==s&&(e.dirty(n),t=s)}})}return void 0!==n.__requiresRecompilation&&n.__requiresRecompilation.forEach(t=>{let s=a[t],i=!isNaN(s);Object.defineProperty(n,t,{configurable:!0,get(){if(i){let s=n.__addresses__[t];return e.memory.heap[s]}return s},set(r){if(s!==r){if("number"==typeof r){let o=n.__addresses__[t];void 0===o&&(o=e.memory.alloc(1),n.__addresses__[t]=o),s=a[t]=e.memory.heap[o]=r,i=!0}else s=a[t]=r,i=!1,e.dirty(n);this.__redoGraph()}}})}),!0===a.shouldAddToUgen&&Object.assign(n,a),u?t(r,a,n):n};return n.getUID=(()=>e.utilities.getUID()),n}},{"./fx/effect.js":27,"./workletProxy.js":71}],13:[function(e,t,n){let s=e("genish.js");t.exports=function(e,t=500,n=.5){let i=s.counter(1,0,t),r=s.data(t),a=s.peek(r,i,{interp:"none",mode:"samples"}),o=s.memo(s.add(s.mul(-1,e),a));return s.poke(r,s.add(e,s.mul(a,n)),i),o}},{"genish.js":114}],14:[function(e,t,n){let s=e("genish.js"),i=e("./filter.js");t.exports=function(e){const t=s;e.genish.biquad=((e,n,i,r,a)=>{let o,u,l,c,d,p,m,h,f,g,y,b;const j=t.data([0,0],1,{meta:!0}),v=t.data([0,0],1,{meta:!0}),x=t.data([0,0,0],1,{meta:!0}),_=t.data([0,0],1,{meta:!0}),w=s.min(t.add(.5,t.mul(i,22)),22.5),k=t.div(t.mul(s.max(.005,s.min(n,.995)),s.gen.samplerate),4);let $=t.mul(t.mul(2,Math.PI),t.div(k,s.gen.samplerate)),O=s.sin($),S=s.cos($),M=t.div(O,t.mul(2,w)),N=t.sub(1,S);switch(r){case 1:x[0]=t.div(t.add(1,S),2),x[1]=t.mul(t.add(1,S),-1),x[2]=x[0],y=t.add(1,M),_[0]=t.mul(-2,S),_[1]=t.sub(1,M);break;case 2:x[0]=t.mul(w,M),x[1]=0,x[2]=t.mul(x[0],-1),y=t.add(1,M),_[0]=t.mul(-2,S),_[1]=t.sub(1,M);break;default:x[0]=t.div(N,2),x[1]=N,x[2]=x[0],y=t.add(1,M),_[0]=t.mul(-2,S),_[1]=t.sub(1,M)}x[0]=t.div(x[0],y),x[1]=t.div(x[1],y),x[2]=t.div(x[2],y),_[0]=t.div(_[0],y),_[1]=t.div(_[1],y);let P=!0===a?e[0]:e;o=t.mul(P,x[0]),u=t.mul(j[0],x[1]),l=t.mul(j[1],x[2]),j[1]=j[0],j[0]=P;let I=t.add(t.add(o,u),l);c=t.mul(v[0],_[0]),d=t.mul(v[1],_[1]),v[1]=v[0];let q=t.add(c,d),A=t.sub(I,q);if(v[0]=A,a){const n=t.data([0,0],1,{meta:!0}),s=t.data([0,0],1,{meta:!0}),i=e[1];p=t.mul(i,x[0]),m=t.mul(n[0],x[1]),h=t.mul(n[1],x[2]),n[1]=n[0],n[0]=i;const r=t.add(t.add(p,m),h);f=t.mul(s[0],_[0]),g=t.mul(s[1],_[1]),s[1]=s[0];const a=t.add(f,g),o=t.sub(r,a);s[0]=o,b=[A,o]}else b=A;return b});let n=t=>{const r=Object.create(i),a=Object.assign({},n.defaults,t);let o;return Object.assign(r,a),r.__createGraph=function(){let t=!1;void 0===o?t=void 0!==a.input&&void 0!==a.input.isStereo&&a.input.isStereo:(t=o.input.isStereo,o.isStereo=t),r.graph=e.genish.biquad(s.in("input"),s.in("cutoff"),s.in("Q"),r.mode,t)},r.__createGraph(),r.__requiresRecompilation=["mode","input"],o=e.factory(r,r.graph,["filters","Filter12Biquad"],a)};return n.defaults={input:0,Q:.15,cutoff:.05,mode:0},n}},{"./filter.js":17,"genish.js":114}],15:[function(e,t,n){let s=e("genish.js");t.exports=function(e,t,n=.2,i=.84){let r=s.history(),a=s.counter(1,0,t),o=s.data(t),u=s.peek(o,a,{interp:"none",mode:"samples"}),l=s.memo(s.add(s.mul(u,s.sub(1,n)),s.mul(r.out,n)));return r.in(l),s.poke(o,s.add(e,s.mul(l,i)),a),u}},{"genish.js":114}],16:[function(e,t,n){const s=e("genish.js"),i=e("./filter.js"),r=s;t.exports=function(e){e.genish.diodeZDF=((e,t,n,i,a=!1)=>{const o=1/s.gen.samplerate,u=s.history(0),l=s.history(0),c=s.history(0),d=s.history(0);const p=s.mul(s.max(.005,s.min(n,.995)),r.gen.samplerate/2),m=s.memo(s.add(.5,s.mul(t,s.add(5,s.sub(5,s.mul(s.div(p,2e4),5)))))),h=s.memo(s.mul(2*Math.PI,p)),f=s.memo(s.mul(2/o,s.tan(s.mul(h,o/2)))),g=s.memo(s.mul(f,o/2)),y=s.memo(s.mul(.5,s.div(g,s.add(1,g)))),b=s.memo(s.mul(.5,s.div(g,s.sub(s.add(1,g),s.mul(s.mul(.5,g),y))))),j=s.memo(s.mul(.5,s.div(g,s.sub(s.add(1,g),s.mul(s.mul(.5,g),b))))),v=s.memo(s.div(g,s.sub(s.add(1,g),s.mul(g,j)))),x=s.memo(s.mul(s.mul(y,b),s.mul(j,v))),_=s.memo(s.mul(s.mul(y,b),j)),w=s.memo(s.mul(y,b)),k=y;const $=s.memo(s.div(g,s.add(1,g))),O=s.memo(s.div(1,s.sub(s.add(1,g),s.mul(g,j)))),S=s.memo(s.div(1,s.sub(s.add(1,g),s.mul(s.mul(.5,g),b)))),M=s.memo(s.div(1,s.sub(s.add(1,g),s.mul(s.mul(.5,g),y)))),N=s.memo(s.div(1,s.add(1,g))),P=s.memo(s.add(1,s.mul(v,j))),I=s.memo(s.add(1,s.mul(j,b))),q=s.memo(s.add(1,s.mul(b,y))),A=g,C=s.memo(s.mul(.5,g)),D=s.memo(s.mul(.5,g)),G=j,L=b,U=y,E=s.memo(s.mul(N,d.out)),R=s.memo(s.mul(M,s.add(c.out,s.mul(E,D)))),z=s.memo(s.mul(S,s.add(l.out,s.mul(R,C)))),F=s.memo(s.mul(O,s.add(u.out,s.mul(z,A)))),T=s.memo(s.mul(S,s.add(l.out,s.mul(R,C)))),W=s.memo(s.mul(M,s.add(c.out,s.mul(E,D)))),V=E,B=s.memo(s.add(s.add(s.mul(_,F),s.mul(w,T)),s.add(s.mul(k,W),s.mul(1,V))));let Q=!0===a?s.add(e[0],e[1]):e;Q=s.tanh(s.mul(i,Q));const H=s.div(s.sub(Q,s.mul(m,B)),s.add(1,s.mul(m,x)));let J=s.memo(s.add(s.add(s.mul(H,P),z),s.mul(G,F))),Z=s.memo(s.mul(s.sub(s.mul(1,J),u.out),$)),X=s.add(Z,u.out);return u.in(s.add(X,Z)),J=s.memo(s.add(s.add(s.mul(X,I),R),s.mul(L,T))),Z=s.memo(s.mul(s.sub(s.mul(.5,J),l.out),$)),X=s.add(Z,l.out),l.in(s.add(X,Z)),J=s.memo(s.add(s.add(s.mul(X,q),E),s.mul(U,W))),Z=s.memo(s.mul(s.sub(s.mul(.5,J),c.out),$)),X=s.add(Z,c.out),c.in(s.add(X,Z)),Z=s.memo(s.mul(s.sub(s.mul(.5,J),d.out),$)),X=s.add(Z,d.out),d.in(s.add(X,Z)),X});const t=n=>{const r=Object.create(i),a=Object.assign({},t.defaults,i.defaults,n),o=a.input.isStereo;return Object.assign(r,a),e.factory(r,e.genish.diodeZDF(s.in("input"),s.in("Q"),s.in("cutoff"),s.in("saturation"),o),["filters","Filter24TB303"],a)};return t.defaults={input:0,Q:.65,saturation:1,cutoff:.5},t}},{"./filter.js":17,"genish.js":114}],17:[function(e,t,n){let s=e("../ugen.js")(),i=Object.create(s);Object.assign(i,{defaults:{bypass:!1}}),t.exports=i},{"../ugen.js":69}],18:[function(e,t,n){let s=e("genish.js"),i=e("./filter.js");t.exports=function(e){e.genish.filter24=((e,t,n,i,r=!1)=>{let a,o=s.data([0,0,0,0],1,{meta:!0}),u=s.memo(s.mul(t,5)),l=s.memo(s.div(n,11025)),c=s.clamp(s.mul(o[3],u)),d=s.sub(r?e[0]:e,c);o[0]=s.add(o[0],s.mul(s.add(s.mul(-1,o[0]),d),l)),o[1]=s.add(o[1],s.mul(s.add(s.mul(-1,o[1]),o[0]),l)),o[2]=s.add(o[2],s.mul(s.add(s.mul(-1,o[2]),o[1]),l)),o[3]=s.add(o[3],s.mul(s.add(s.mul(-1,o[3]),o[2]),l));let p=s.switch(i,o[3],s.sub(d,o[3]));if(r){let t=s.data([0,0,0,0],1,{meta:!0}),n=s.clamp(s.mul(t[3],u)),r=s.sub(e[1],n);t[0]=s.add(t[0],s.mul(s.add(s.mul(-1,t[0]),r),l)),t[1]=s.add(t[1],s.mul(s.add(s.mul(-1,t[1]),t[0]),l)),t[2]=s.add(t[2],s.mul(s.add(s.mul(-1,t[2]),t[1]),l)),t[3]=s.add(t[3],s.mul(s.add(s.mul(-1,t[3]),t[2]),l)),a=[p,s.switch(i,t[3],s.sub(r,t[3]))]}else a=p;return a});let t=n=>{let r=Object.create(i),a=Object.assign({},t.defaults,i.defaults,n),o=a.input.isStereo;return e.factory(r,e.genish.filter24(s.in("input"),s.in("Q"),s.in("cutoff"),s.in("isLowPass"),o),["filters","Filter24Classic"],a)};return t.defaults={input:0,Q:.25,cutoff:880,isLowPass:1},t}},{"./filter.js":17,"genish.js":114}],19:[function(e,t,n){t.exports=function(t){const n=t.genish,s={Filter24Classic:e("./filter24.js")(t),Filter24Moog:e("./ladder.dsp.js")(t),Filter24TB303:e("./diodeFilterZDF.js")(t),Filter12Biquad:e("./biquad.dsp.js")(t),Filter12SVF:e("./svf.js")(t),genish:{Comb:e("./combfilter.js"),AllPass:e("./allpass.js")},factory(e,t,i,r,a=!1){let o,u=Object.assign({},s.defaults,r);switch(u.filterType){case 1:o=n.zd24(e,n.min(n.in("Q"),.9999),t,0);break;case 2:o=n.diodeZDF(e,n.min(n.in("Q"),.9999),t,i,a);break;case 3:o=n.svf(e,t,n.sub(1,n.in("Q")),u.filterMode,a,!0);break;case 4:o=n.biquad(e,t,n.in("Q"),u.filterMode,a);break;case 5:o=n.filter24(e,n.in("Q"),t,u.filterMode,a);break;default:o=e}return o},defaults:{filterMode:0,filterType:0},export:e=>{for(let t in s)"export"!==t&&"genish"!==t&&(e[t]=s[t])}};return s}},{"./allpass.js":13,"./biquad.dsp.js":14,"./combfilter.js":15,"./diodeFilterZDF.js":16,"./filter24.js":18,"./ladder.dsp.js":20,"./svf.js":21}],20:[function(e,t,n){const s=e("genish.js"),i=e("./filter.js");t.exports=function(e){const t=function(e,t,n){const i=s.div(1,s.gen.samplerate),r=s.data([0,0,0,0],1,{meta:!0}),a=s.max(.005,s.min(n,1)),o=s.add(.5,s.mul(t,23)),u=s.div(s.mul(s.mul(s.mul(Math.PI,2),a),s.gen.samplerate),2),l=s.mul(s.div(2,i),s.tan(s.div(s.mul(u,i),2))),c=s.div(s.mul(l,i),2),d=s.div(s.mul(4,s.sub(o,.5)),24.5),p=s.add(1,c),m=s.div(c,p),h=s.mul(m,m),f=s.mul(h,m),g=s.mul(h,h),y=s.div(r[0],p),b=s.div(r[1],p),j=s.div(r[2],p),v=s.div(r[3],p),x=s.add(s.add(s.add(s.mul(f,y),s.mul(h,b)),s.mul(m,j)),v),_=s.div(s.sub(e,s.mul(d,x)),s.add(1,s.mul(d,g)));let w=s.mul(s.sub(_,r[0]),m),k=s.add(w,r[0]);return r[0]=s.add(k,w),w=s.mul(s.sub(k,r[1]),m),k=s.add(w,r[1]),r[1]=s.add(k,w),w=s.mul(s.sub(k,r[2]),m),k=s.add(w,r[2]),r[2]=s.add(k,w),w=s.mul(s.sub(k,r[3]),m),k=s.add(w,r[3]),r[3]=s.add(k,w),k};e.genish.zd24=((e,n,s,i=!1)=>{const r=!0===i?e[0]:e,a=t(r,n,s);let o;if(!0===i){o=[a,t(e[1],n,s)]}else o=a;return o});const n=t=>{const r=Object.create(i),a=Object.assign({},n.defaults,r.defaults,t);let o;return r.__requiresRecompilation=["input"],r.__createGraph=function(){let t=!1;void 0===o?t=void 0!==a.input&&void 0!==a.input.isStereo&&a.input.isStereo:(t=o.input.isStereo,o.isStereo=t),r.graph=e.genish.zd24(s.in("input"),s.in("Q"),s.in("cutoff"),t)},r.__createGraph(),o=e.factory(r,r.graph,["filters","Filter24Moog"],a)};return n.defaults={input:0,Q:.75,cutoff:.25},n}},{"./filter.js":17,"genish.js":114}],21:[function(e,t,n){const s=e("genish.js"),i=e("./filter.js");t.exports=function(e){e.genish.svf=((e,t,n,i,r=!1,a=!1)=>{let o=s.data([0,0],1,{meta:!0}),u=s.data([0,0],1,{meta:!0});!0===a&&(t=s.mul(s.max(.005,s.min(t,.995)),s.div(s.gen.samplerate,4)));let l=s.memo(s.mul(2*Math.PI,s.div(t,s.gen.samplerate))),c=(s.memo(s.div(1,n)),s.memo(s.add(u[0],s.mul(l,o[0])))),d=s.memo(s.sub(s.sub(r?e[0]:e,c),s.mul(n,o[0]))),p=s.memo(s.add(s.mul(l,d),o[0])),m=s.memo(s.add(d,c));o[0]=p,u[0]=c;let h,f=s.selector(i,c,d,p,m);if(r){let t=s.data([0,0],1,{meta:!0}),r=s.data([0,0],1,{meta:!0}),a=s.memo(s.add(r[0],s.mul(l,t[0]))),o=s.memo(s.sub(s.sub(e[1],a),s.mul(n,t[0]))),u=s.memo(s.add(s.mul(l,o),t[0])),c=s.memo(s.add(o,a));t[0]=u,r[0]=a,h=[f,s.selector(i,a,o,u,c)]}else h=f;return h});let t=n=>{const r=Object.create(i),a=Object.assign({},t.defaults,i.defaults,n),o=a.input.isStereo;return e.factory(r,e.genish.svf(s.in("input"),s.mul(s.in("cutoff"),s.gen.samplerate/5),s.sub(1,s.in("Q")),s.in("mode"),o,!0),["filters","Filter12SVF"],a)};return t.defaults={input:0,Q:.65,cutoff:.25,mode:0},t}},{"./filter.js":17,"genish.js":114}],22:[function(e,t,n){let s=e("genish.js"),i=e("./effect.js");t.exports=function(e){let t=n=>{const r=Object.assign({bitCrusherLength:44100},t.defaults,i.defaults,n),a=Object.create(i);let o;return a.__createGraph=function(){let e=!1;void 0===o?e=void 0!==r.input.isStereo&&r.input.isStereo:(e=o.input.isStereo,o.isStereo=e);let t=s.in("input"),n=s.in("inputGain"),i=s.in("bitDepth"),u=s.in("sampleRate"),l=e?t[0]:t,c=e?t[1]:null,d=s.history(0),p=s.counter(u,0,1),m=s.pow(s.mul(i,16),2),h=s.div(s.floor(s.mul(s.mul(l,n),m)),m),f=s.switch(p.wrap,h,d.out);if(e){s.history(0);let e=s.div(s.floor(s.mul(s.mul(c,n),m)),m),t=s.switch(p.wrap,e,d.out);a.graph=[f,t]}else a.graph=f},a.__createGraph(),a.__requiresRecompilation=["input"],o=e.factory(a,a.graph,["fx","bitCrusher"],r)};return t.defaults={input:0,bitDepth:.5,sampleRate:.5},t}},{"./effect.js":27,"genish.js":114}],23:[function(e,t,n){let s=e("genish.js"),i=e("./effect.js");t.exports=function(e){let t=Object.create(i),n=r=>{let a=Object.create(t);const o=Object.assign({},n.defaults,i.defaults,r);let u;return a.__createGraph=function(){let e=!1;e=void 0===u?void 0===o.input.isStereo||o.input.isStereo:u.input.isStereo;const t=s.accum(1,0,{shouldWrap:!1}),n=s.in("input"),i=s.in("inputGain"),r=e?n[0]:n,l=e?n[1]:null,c=s.mul(r,i),d=(s.mul(l,i),s.in("rate")),p=s.in("chance"),m=s.in("reverseChance"),h=s.in("repitchChance"),f=s.in("repitchMin"),g=s.in("repitchMax");let y=s.history(1),b=s.eq(s.mod(t,d),0),j=s.memo(s.sah(s.lt(s.noise(),p),b,0)),v=s.memo(s.and(b,j)),x=s.lt(s.noise(),m),_=s.switch(x,-1,1),w=s.ifelse(s.and(v,s.lt(s.noise(),h)),s.memo(s.mul(s.add(f,s.mul(s.sub(g,f),s.noise())),_)),_);y.in(s.switch(v,w,y.out));let k=s.memo(s.div(d,100));s.memo(s.div(1,k));const $=s.data(88200);e&&s.data(88200);let O=s.accum(y.out,0,{shouldWrap:!1}),S=s.wrap(s.sub(s.mod(O,88200),22050),0,88200),M=s.peek($,s.accum(1,0,{max:88200}),{mode:"simple"}),N=s.switch(j,S,s.mod(O,88200)),P=s.memo(s.peek($,N,{mode:"samples"})),I=(s.and(v,j),s.accum(1,v,{shouldWrap:!1})),q=s.memo(s.div(I,k)),A=s.div(s.sub(d,I),s.sub(d,k)),C=s.ifelse(s.lt(I,k),s.memo(s.mul(s.switch(s.lt(q,1),q,1),P)),s.gt(I,s.sub(d,k)),s.memo(s.mul(s.gtp(A,0),P)),P),D=s.mix(M,C,j),G=(s.poke($,c,s.mod(s.add(t,44100),88200)),s.pan(D,D,s.in("pan")));a.graph=[G.left,G.right]},a.__createGraph(),a.__requiresRecompilation=["input"],u=e.factory(a,a.graph,["fx","shuffler"],o)};return n.defaults={input:0,rate:22050,chance:.25,reverseChance:.5,repitchChance:.5,repitchMin:.5,repitchMax:2,pan:.5,mix:.5},n}},{"./effect.js":27,"genish.js":114}],24:[function(e,t,n){const s=e("genish.js"),i=e("./effect.js");t.exports=function(e){let t=n=>{const r=Object.assign({},t.defaults,i.defaults,n);let a;const o=Object.create(i);return o.__createGraph=function(){const t=s.in("input"),n=s.in("inputGain"),i=s.in("slowFrequency"),u=s.in("fastFrequency"),l=s.in("slowGain"),c=s.in("fastGain");let d=!1;void 0===a?d=void 0!==r.input.isStereo&&r.input.isStereo:(d=a.input.isStereo,a.isStereo=d);const p=d?s.mul(t[0],n):s.mul(t,n),m=s.env("inversewelch",1024),h=s.env("inversewelch",1024,0,.333),f=s.env("inversewelch",1024,0,.666),g=s.phasor(i,0,{min:0}),y=s.mul(s.peek(m,g),l),b=s.mul(s.peek(h,g),l),j=s.mul(s.peek(f,g),l),v=s.phasor(u,0,{min:0}),x=s.mul(s.peek(m,v),c),_=s.mul(s.peek(h,v),c),w=s.mul(s.peek(f,v),c);const k=e.ctx.sampleRate/1e3,$=1e3*k,O=s.mul(s.add(y,x,5),k),S=s.mul(s.add(b,_,5),k),M=s.mul(s.add(j,w,5),k),N=s.delay(p,O,{size:$}),P=s.delay(p,S,{size:$}),I=s.delay(p,M,{size:$}),q=s.add(N,P,I);if(d){const e=s.mul(t[1],n),i=s.delay(e,O,{size:$}),r=s.delay(e,S,{size:$}),a=s.delay(e,M,{size:$}),u=s.add(i,P,a);o.graph=[s.add(N,r,I),u]}else o.graph=q},o.__createGraph(),o.__requiresRecompilation=["input"],a=e.factory(o,o.graph,["fx","chorus"],r)};return t.defaults={input:0,slowFrequency:.18,slowGain:3,fastFrequency:6,fastGain:1,inputGain:1},t}},{"./effect.js":27,"genish.js":114}],25:[function(e,t,n){let s=e("genish.js"),i=e("./effect.js");t.exports=function(e){let t=n=>{let r,a=Object.assign({delayLength:88200},i.defaults,t.defaults,n),o=Object.create(i);return o.__createGraph=function(){let e=!1;void 0===r?e=void 0!==a.input.isStereo&&a.input.isStereo:(e=r.input.isStereo,r.isStereo=e);const t=s.in("input"),n=s.in("inputGain"),i=s.in("time"),u=s.in("wetdry"),l=e?s.mul(t[0],n):s.mul(t,n),c=e?s.mul(t[1],n):null,d=s.in("feedback"),p=s.history(),m=s.delay(s.add(l,s.mul(p.out,d)),i,{size:a.delayLength});p.in(m);const h=s.mix(l,m,u);if(e){const e=s.history(),t=s.delay(s.add(c,s.mul(e.out,d)),i,{size:a.delayLength});e.in(t);const n=s.mix(c,t,u);o.graph=[h,n]}else o.graph=h},o.__createGraph(),o.__requiresRecompilation=["input"],r=e.factory(o,o.graph,["fx","delay"],a)};return t.defaults={input:0,feedback:.5,time:11025,wetdry:.5},t}},{"./effect.js":27,"genish.js":114}],26:[function(e,t,n){const s=e("genish.js"),i=e("./effect.js"),r=s;t.exports=function(e){let t=n=>{let a,o=Object.assign({},i.defaults,t.defaults,n),u=Object.create(i);return u.__createGraph=function(){let e=!1;void 0===a?e=void 0!==o.input.isStereo&&o.input.isStereo:(e=a.input.isStereo,a.isStereo=e);const t=s.in("input"),n=s.in("inputGain"),i=s.in("shape1"),l=s.in("shape2"),c=s.in("pregain"),d=s.in("postgain");let p;{const a=e?s.mul(t[0],n):s.mul(t,n),o=r.sub(s.exp(r.mul(a,r.add(i,c))),s.exp(r.mul(a,r.sub(l,c)))),u=r.add(s.exp(r.mul(a,c)),s.exp(r.mul(r.mul(-1,a),c)));p=r.mul(r.div(o,u),d)}if(e){let a;{const o=e?s.mul(t[1],n):s.mul(t,n),u=r.sub(s.exp(r.mul(o,r.add(i,c))),s.exp(r.mul(o,r.sub(l,c)))),p=r.add(s.exp(r.mul(o,c)),s.exp(r.mul(r.mul(-1,o),c)));a=r.mul(r.div(u,p),d)}u.graph=[p,a]}else u.graph=p},u.__createGraph(),u.__requiresRecompilation=["input"],a=e.factory(u,u.graph,["fx","distortion"],o)};return t.defaults={input:0,shape1:.1,shape2:.1,pregain:5,postgain:.5},t}},{"./effect.js":27,"genish.js":114}],27:[function(e,t,n){let s=e("../ugen.js")(),i=Object.create(s);Object.assign(i,{defaults:{bypass:!1,inputGain:1},type:"effect"}),t.exports=i},{"../ugen.js":69}],28:[function(e,t,n){t.exports=function(t){const n={Freeverb:e("./freeverb.js")(t),Flanger:e("./flanger.js")(t),Vibrato:e("./vibrato.js")(t),Delay:e("./delay.js")(t),BitCrusher:e("./bitCrusher.js")(t),Distortion:e("./distortion.dsp.js")(t),RingMod:e("./ringMod.js")(t),Tremolo:e("./tremolo.js")(t),Chorus:e("./chorus.js")(t),Wavefolder:e("./wavefolder.dsp.js")(t)[0],Shuffler:e("./bufferShuffler.js")(t),export:e=>{for(let t in n)"export"!==t&&(e[t]=n[t])}};return n}},{"./bitCrusher.js":22,"./bufferShuffler.js":23,"./chorus.js":24,"./delay.js":25,"./distortion.dsp.js":26,"./flanger.js":29,"./freeverb.js":30,"./ringMod.js":31,"./tremolo.js":32,"./vibrato.js":33,"./wavefolder.dsp.js":34}],29:[function(e,t,n){let s=e("genish.js"),i=e("./effect.js");t.exports=function(e){let t=n=>{let r,a=Object.assign({delayLength:44100},t.defaults,i.defaults,n),o=Object.create(i);return o.__createGraph=function(){let e=!1;void 0===r?e=void 0!==a.input.isStereo&&a.input.isStereo:(e=r.input.isStereo,r.isStereo=e);const t=s.in("input"),n=(s.in("inputGain"),a.delayLength),i=s.in("feedback"),u=s.in("offset"),l=s.in("frequency"),c=s.data(n),d=s.accum(1,0,{min:0,max:n,interp:"none",mode:"samples"}),p=s.mul(u,500),m=void 0===a.mod?s.cycle(l):a.mod,h=s.wrap(s.add(s.sub(d,p),m),0,n),f=e?t[0]:t,g=s.peek(c,h,{interp:"linear",mode:"samples"});s.poke(c,s.add(f,s.mul(g,i)),d);const y=s.add(f,g);if(!0===e){const e=t[1],r=s.data(n);let a=s.peek(r,h,{interp:"linear",mode:"samples"});s.poke(r,s.add(e,s.mul(a,i)),d);const u=s.add(e,a);o.graph=[y,u]}else o.graph=y},o.__createGraph(),o.__requiresRecompilation=["input"],r=e.factory(o,o.graph,["fx","flanger"],a)};return t.defaults={input:0,feedback:.81,offset:.125,frequency:1},t}},{"./effect.js":27,"genish.js":114}],30:[function(e,t,n){const s=e("genish.js"),i=e("./effect.js");t.exports=function(e){const t=e.filters.genish.AllPass,n=e.filters.genish.Comb,r={combCount:8,combTuning:[1116,1188,1277,1356,1422,1491,1557,1617],allPassCount:4,allPassTuning:[225,556,441,341],allPassFeedback:.5,fixedGain:.015,scaleDamping:.4,scaleRoom:.28,offsetRoom:.7,stereoSpread:23},a=o=>{const u=Object.assign({},i.defaults,a.defaults,o),l=Object.create(i);let c;return l.__createGraph=function(){let e=!1;e=void 0===c?void 0!==u.input.isStereo&&u.input.isStereo:c.input.isStereo;const i=[],a=[],o=s.in("input"),d=s.in("inputGain"),p=s.in("wet1"),m=s.in("wet2"),h=s.in("dry"),f=s.in("roomSize"),g=s.in("damping"),y=!0===e?s.add(o[0],o[1]):o,b=s.mul(y,d),j=s.memo(s.mul(b,r.fixedGain));for(let e=0;e<8;e++)i.push(n(j,r.combTuning[e],s.mul(g,.4),s.mul(r.scaleRoom+r.offsetRoom,f))),a.push(n(j,r.combTuning[e]+r.stereoSpread,s.mul(g,.4),s.mul(r.scaleRoom+r.offsetRoom,f)));let v=s.add(j,...i),x=s.add(j,...a);for(let e=0;e<4;e++)v=t(v,r.allPassTuning[e]+r.stereoSpread),x=t(x,r.allPassTuning[e]+r.stereoSpread);const _=s.add(s.mul(v,p),s.mul(x,m),s.mul(!0===e?o[0]:o,h)),w=s.add(s.mul(x,p),s.mul(v,m),s.mul(!0===e?o[1]:o,h));l.graph=[_,w]},l.__createGraph(),l.__requiresRecompilation=["input"],c=e.factory(l,l.graph,["fx","freeverb"],u)};return a.defaults={input:0,wet1:1,wet2:0,dry:.5,roomSize:.925,damping:.5},a}},{"./effect.js":27,"genish.js":114}],31:[function(e,t,n){let s=e("genish.js"),i=e("./effect.js");t.exports=function(e){let t=n=>{let r,a=Object.assign({},t.defaults,i.defaults,n),o=Object.create(i);return o.__createGraph=function(){let e=!1;void 0===r?e=void 0!==a.input.isStereo&&a.input.isStereo:(e=r.input.isStereo,r.isStereo=e);const t=s.in("input"),n=s.in("inputGain"),i=s.in("frequency"),u=s.in("gain"),l=s.in("mix"),c=e?s.mul(t[0],n):s.mul(t,n),d=s.mul(s.cycle(i),u),p=s.add(s.mul(c,s.sub(1,l)),s.mul(s.mul(c,d),l));if(!0===e){const e=s.mul(t[1],n),i=s.add(s.mul(e,s.sub(1,l)),s.mul(s.mul(e,d),l));o.graph=[p,i]}else o.graph=p},o.__createGraph(),o.__requiresRecompilation=["input"],r=e.factory(o,o.graph,["fx","ringMod"],a)};return t.defaults={input:0,frequency:220,gain:1,mix:1},t}},{"./effect.js":27,"genish.js":114}],32:[function(e,t,n){const s=e("genish.js"),i=e("./effect.js");t.exports=function(e){const t=n=>{const r=Object.assign({},t.defaults,i.defaults,n),a=Object.create(i);let o;return a.__createGraph=function(){let e=!1;void 0===o?e=void 0!==r.input.isStereo&&r.input.isStereo:(e=o.input.isStereo,o.isStereo=e);const t=s.in("input"),n=s.in("inputGain"),i=s.in("frequency"),u=s.in("amount"),l=e?s.mul(t[0],n):s.mul(t,n);let c;c="square"===r.shape?s.gt(s.phasor(i),0):"saw"===r.shape?s.gtp(s.phasor(i),0):s.cycle(i);const d=s.mul(c,u),p=s.sub(l,s.mul(l,d));if(!0===e){const e=s.mul(t[1],n),i=s.mul(e,d);a.graph=[p,i]}else a.graph=p},a.__createGraph(),a.__requiresRecompilation=["input"],o=e.factory(a,a.graph,["fx","tremolo"],r)};return t.defaults={input:0,frequency:2,amount:1,shape:"sine"},t}},{"./effect.js":27,"genish.js":114}],33:[function(e,t,n){const s=e("genish.js"),i=e("./effect.js");t.exports=function(e){const t=n=>{const r=Object.assign({},t.defaults,i.defaults,n),a=Object.create(i);let o;return a.__createGraph=function(){let e=!1;void 0===o?e=void 0!==r.input.isStereo&&r.input.isStereo:(e=o.input.isStereo,o.isStereo=e);const t=s.in("input"),n=s.in("inputGain"),i=s.in("feedback"),u=s.in("amount"),l=s.in("frequency"),c=s.data(44100),d=s.accum(1,0,{min:0,max:44100,interp:"none",mode:"samples"}),p=s.mul(u,500),m=s.wrap(s.add(s.sub(d,p),s.mul(s.cycle(l),s.sub(p,1))),0,44100),h=e?s.mul(t[0],n):s.mul(t,n),f=s.peek(c,m,{interp:"linear",mode:"samples"});s.poke(c,s.add(h,s.mul(f,i)),d);const g=f;if(!0===e){const e=s.mul(t[1],n),r=s.data(44100),o=s.peek(r,m,{interp:"linear",mode:"samples"});s.poke(r,s.add(e,mul(o,i)),d);const u=o;a.graph=[g,u]}else a.graph=g},a.__createGraph(),a.__requiresRecompilation=["input"],o=e.factory(a,a.graph,["fx","vibrato"],r)};return t.defaults={input:0,feedback:.01,amount:.5,frequency:4},t}},{"./effect.js":27,"genish.js":114}],34:[function(e,t,n){const s=e("genish.js"),i=e("./effect.js"),r=s,a=3e4/390,o=7.5e-12/.026,u=e=>{const t=s.process("x","Ln1","  const thresh = 10e-10;\n\n  let w = Ln1;\n  let expw, p, r, s;\n\n  const e = Math.E\n  const pow = Math.pow\n  const abs = Math.abs\n  for(let i=0; i<1000; i++) {\n    expw = pow(e,w);\n\n    p = w*expw - x;\n    r = (w+1)*expw;\n    s = (w+2)/(2*(w+1));        \n    err = (p/(r-(p*s)));\n\n    if (abs(err)<thresh) {\n      break;\n    }\n\n    w = w - err;\n  }\n\n  return w;"),n=s.history(0),i=s.history(0),u=s.history(0);{const l=s.sign(e);let c=r.mul(o,s.pow(Math.E,r.mul(r.mul(l,a),e))),d=t.call(c,n.out);const p=r.sub(r.mul(r.div(r.mul(.5,.026),a),r.mul(d,r.add(d,2))),r.mul(r.mul(r.mul(.5,1),e),e));let m=r.mul(.5,r.add(e,u.out));c=r.mul(o,s.pow(Math.E,r.mul(r.mul(l,a),m))),d=t.call(c,n.out);const h=s.ifelse(s.lt(s.abs(r.sub(e,u.out)),1e-9),r.sub(r.mul(r.mul(l,.026),d),r.mul(1,m)),r.div(r.sub(p,i.out),r.sub(e,u.out)));return n.in(d),i.in(p),u.in(e),h}};t.exports=function(e){const t=n=>{let a,o=Object.assign({},i.defaults,t.defaults,n),l=Object.create(i);return l.__createGraph=function(){let e=!1;void 0===a?e=void 0!==o.input.isStereo&&o.input.isStereo:(e=a.input.isStereo,a.isStereo=e);const t=s.in("input"),n=s.in("gain"),i=s.in("postgain");let c;{const a=e?r.mul(t[0],n):r.mul(t,n);c=r.mul(a,.333),c=u(u(u(u(c)))),c=r.mul(c,.6),c=r.mul(s.tanh(c),i)}if(l.graph=c,e){let a;{const o=e?r.mul(t[1],n):r.mul(t,n);a=r.mul(o,.333),a=u(u(u(u(a)))),a=r.mul(a,.6),a=r.mul(s.tanh(a),i)}l.graph=[c,a]}},l.__createGraph(),l.__requiresRecompilation=["input"],a=e.factory(l,l.graph,["fx","wavefolder"],o)};return t.defaults={input:0,gain:2,postgain:1},[t,u]}},{"./effect.js":27,"genish.js":114}],35:[function(require,module,exports){let MemoryHelper=require("memory-helper"),genish=require("genish.js"),Gibberish={blockCallbacks:[],dirtyUgens:[],callbackUgens:[],callbackNames:[],analyzers:[],graphIsDirty:!1,ugens:{},debug:!1,id:-1,preventProxy:!1,proxyEnabled:!0,output:null,memory:null,factory:null,genish:genish,scheduler:require("./scheduling/scheduler.js"),workletProcessor:null,memoed:{},mode:"scriptProcessor",prototypes:{ugen:null,instrument:require("./instruments/instrument.js"),effect:require("./fx/effect.js"),analyzer:require("./analysis/analyzer.js")},mixins:{polyinstrument:require("./instruments/polyMixin.js")},workletPath:"./gibberish_worklet.js",init(e,t,n="worklet"){let s=isNaN(e)?5292e4:e;this.genish.gen.mode="scriptProcessor",this.memory=MemoryHelper.create(s,Float64Array),this.mode=n;const i=this.utilities.createWorklet;if(this.scheduler.init(this),this.analyzers.dirty=!1,"worklet"===this.mode){return new Promise((e,n)=>{new Promise((e,n)=>{this.utilities.createContext(t,i.bind(this.utilities),e)}).then(()=>{Gibberish.preventProxy=!0,Gibberish.load(),Gibberish.preventProxy=!1,Gibberish.output=this.Bus2(),Gibberish.worklet.port.postMessage({address:"eval",code:`Gibberish.output = this.ugens.get(${Gibberish.output.id});`}),e()})})}"processor"===this.mode&&Gibberish.load()},load(){this.factory=require("./factory.js")(this),this.Panner=require("./misc/panner.js")(this),this.PolyTemplate=require("./instruments/polytemplate.js")(this),this.oscillators=require("./oscillators/oscillators.js")(this),this.filters=require("./filters/filters.js")(this),this.binops=require("./misc/binops.js")(this),this.monops=require("./misc/monops.js")(this),this.Bus=require("./misc/bus.js")(this),this.Bus2=require("./misc/bus2.js")(this),this.instruments=require("./instruments/instruments.js")(this),this.fx=require("./fx/effects.js")(this),this.Sequencer=require("./scheduling/sequencer.js")(this),this.Sequencer2=require("./scheduling/seq2.js")(this),this.Tidal=require("./scheduling/tidal.js")(this),this.envelopes=require("./envelopes/envelopes.js")(this),this.analysis=require("./analysis/analyzers.js")(this),this.time=require("./misc/time.js")(this),this.Proxy=require("./workletProxy.js")(this)},export(e,t=!1){if(void 0===e)throw Error("You must define a target object for Gibberish to export variables to.");t&&this.genish.export(e),this.instruments.export(e),this.fx.export(e),this.filters.export(e),this.oscillators.export(e),this.binops.export(e),this.monops.export(e),this.envelopes.export(e),this.analysis.export(e),e.Sequencer=this.Sequencer,e.Sequencer2=this.Sequencer2,e.Bus=this.Bus,e.Bus2=this.Bus2,e.Scheduler=this.scheduler,e.Tidal=this.Tidal,this.time.export(e),this.utilities.export(e)},printcb(){Gibberish.worklet.port.postMessage({address:"callback"})},printobj(e){Gibberish.worklet.port.postMessage({address:"print",object:e.id})},send(e){Gibberish.worklet.port.postMessage(e)},dirty(e){e===this.analyzers?(this.graphIsDirty=!0,this.analyzers.dirty=!0):(this.dirtyUgens.push(e),this.graphIsDirty=!0,this.memoed[e.ugenName]&&delete this.memoed[e.ugenName])},clear(){this.output.inputs.splice(0,this.output.inputs.length-2),this.analyzers.length=0,this.scheduler.clear(),this.dirty(this.output),"worklet"===this.mode&&this.worklet.port.postMessage({address:"method",object:this.id,name:"clear",args:[]}),Gibberish.genish.gen.removeAllListeners("memory init"),Gibberish.genish.gen.histories.clear()},analysisCompare:(e,t)=>(isNaN(t.priority)?0:t.priority)-(isNaN(e.priority)?0:e.priority),generateCallback(){if("worklet"===this.mode)return Gibberish.callback=function(){return 0},Gibberish.callback.out=[],Gibberish.callback;let e,t;return this.memoed={},t=(e=this.processGraph(this.output))[e.length-1],e.unshift("\t'use strict'"),this.analyzers.sort(this.analysisCompare).forEach(t=>{const n=Gibberish.processUgen(t);let s;"object"==typeof n?(s=n.pop(),n.forEach(t=>{e.splice(e.length-1,0,t)})):s=n,e.push(s)}),this.analyzers.forEach(e=>{-1===this.callbackUgens.indexOf(e.callback)&&this.callbackUgens.push(e.callback)}),this.callbackNames=this.callbackUgens.map(e=>e.ugenName),e.push("\n\treturn "+t.split("=")[0].split(" ")[1]),!0===this.debug&&console.log("callback:\n",e.join("\n")),this.callbackNames.push("mem"),this.callbackUgens.push(this.memory.heap),this.callback=Function(...this.callbackNames,e.join("\n")),this.callback.out=[],this.oncallback&&this.oncallback(this.callback),this.callback},processGraph(e){this.callbackUgens.length=0,this.callbackNames.length=0,this.callbackUgens.push(e.callback);let t=this.processUgen(e);return this.dirtyUgens.length=0,this.graphIsDirty=!1,t},proxyReplace(obj){if("object"==typeof obj&&null!==obj){if(void 0!==obj.id){const e=Gibberish.processor.ugens.get(obj.id);return void 0!==obj.prop?e[obj.prop]:e}if(!0===obj.isFunc){let func=eval("("+obj.value+")");return func}}return obj},processUgen(e,t){if(void 0===t&&(t=[]),void 0===e)return t;let n=Gibberish.dirtyUgens.indexOf(e),s=Gibberish.memoed[e.ugenName];if(void 0!==s)return s;if(!0===e||!1===e)throw"Why is ugen a boolean? [true] or [false]";if(void 0===e.block||-1!==dirtyIndex){void 0===e.id&&(e.id=e.__properties__.overrideid);let s=`\tconst v_${e.id} = `;e.isop||(s+=`${e.ugenName}( `);const i=!0===e.isop||"bus"===e.type?Object.keys(e.inputs):[...e.inputNames];s=!0===e.isop?Gibberish.__processBinop(e,s,t,i):Gibberish.__processNonBinop(e,s,t,i),s=Gibberish.__addLineEnding(s,e,i),t.push(s),Gibberish.memoed[e.ugenName]=`v_${e.id}`,-1!==n&&Gibberish.dirtyUgens.splice(n,1)}else if(e.block)return e.block;return t},__processBinop(e,t,n,s){const i=Gibberish.__isStereo(e.inputs[0]),r=Gibberish.__isStereo(e.inputs[1]),a=Gibberish.__getInputString(t,e.inputs[0],n,"0",s),o=Gibberish.__getInputString(t,e.inputs[1],n,"1",s),u=e.op;return!0===i&&!1===r?t+=`[ ${a}[0] ${u} ${o}, ${a}[1] ${u} ${o} ]`:!1===i&&!0===r?t+=`[ ${a} ${u} ${o}[0], ${a} ${u} ${o}[1] ]`:!0===i&&!0===r?t+=`[ ${a}[0] ${u} ${o}[0], ${a}[1] ${u} ${o}[1] ]`:t=Gibberish.__processNonBinop(e,t,n,s),t},__processNonBinop(e,t,n,s){for(let i=0;i<s.length;i++){let r,a=s[i];void 0!==(r=e.isop||"bus"===e.type?e.inputs[a]:e[a])&&(r=Gibberish.__getBypassedInput(r),t+=Gibberish.__getInputString(t,r,n,a,e),t=Gibberish.__addSeparator(t,r,e,i<s.length-1))}return t},__isStereo:e=>null!=e&&(!0===e.isStereo||!0===e.isop&&(Gibberish.__isStereo(e.inputs[0])||Gibberish.__isStereo(e.inputs[1]))),__getBypassedInput(e){if(!0===e.bypass){let t=!1;for(;"undefined"!==e.input&&!1===t;)void 0!==e.input.bypass?!1===(e=e.input).bypass&&(t=!0):(e=e.input,t=!0)}return e},__getInputString(e,t,n,s,i){let r="";return"number"==typeof t?isNaN(s)?r+=`mem[${i.__addresses__[s]}]`:r+=t:"boolean"==typeof t?r+=""+t:void 0!==t&&("processor"===Gibberish.mode&&void 0===t.ugenName&&void 0!==t.id&&(void 0===i?t=Gibberish.processor.ugens.get(t.id):"seq"!==i.type&&(t=Gibberish.processor.ugens.get(t.id))),Gibberish.processUgen(t,n),t.isop||-1===Gibberish.callbackUgens.indexOf(t.callback)&&Gibberish.callbackUgens.push(t.callback),r+=`v_${t.id}`,t.__varname=r),r},__addSeparator:(e,t,n,s)=>(!0===s&&(!0===n.isop?"*"===n.op||"/"===n.op?1!==t?e+=" "+n.op+" ":e=e.slice(0,-1*(""+t).length):e+=" "+n.op+" ":e+=", "),e),__addLineEnding:(e,t,n)=>("bus"===t.type&&n.length>0&&(e+=", "),t.isop||"seq"===t.type||(e+="mem"),e+=t.isop?"":" )")};Gibberish.prototypes.Ugen=Gibberish.prototypes.ugen=require("./ugen.js")(Gibberish),Gibberish.utilities=require("./utilities.js")(Gibberish),module.exports=Gibberish},{"./analysis/analyzer.js":1,"./analysis/analyzers.js":2,"./envelopes/envelopes.js":7,"./factory.js":12,"./filters/filters.js":19,"./fx/effect.js":27,"./fx/effects.js":28,"./instruments/instrument.js":42,"./instruments/instruments.js":43,"./instruments/polyMixin.js":47,"./instruments/polytemplate.js":48,"./misc/binops.js":53,"./misc/bus.js":54,"./misc/bus2.js":55,"./misc/monops.js":56,"./misc/panner.js":57,"./misc/time.js":58,"./oscillators/oscillators.js":61,"./scheduling/scheduler.js":65,"./scheduling/seq2.js":66,"./scheduling/sequencer.js":67,"./scheduling/tidal.js":68,"./ugen.js":69,"./utilities.js":70,"./workletProxy.js":71,"genish.js":114,"memory-helper":153}],36:[function(e,t,n){const s=e("genish.js"),i=e("./instrument.js"),r=s;t.exports=function(e){const t=n=>{const a=Object.create(i),o=s.in("decay"),u=r.mul(o,r.mul(s.gen.samplerate,2)),l=s.in("gain"),c=s.in("spacing"),d=s.in("loudness"),p=s.in("__triggerLoudness"),m=s.in("cutoff"),h=s.in("Q"),f=Object.assign({},t.defaults,n),g=s.decay(u,{initValue:0}),y=s.gt(g,5e-4),b=r.add(-1,r.mul(s.noise(),2)),j=s.bang(),v=s.phasor(c,j,{min:0}),x=r.sub(1,v),_=s.ad(0,r.mul(.035,s.gen.samplerate),{shape:"linear"}),w=s.bang(),k=s.accum(1,w,{max:1/0,min:0,initialValue:0}),$=s.switch(s.gte(k,r.mul(s.gen.samplerate,.035)),b,0),O=s.svf($,1e3,.5,2,!1),S=r.mul(r.mul(r.mul(r.add(r.mul(O,g),r.mul(r.mul(b,x),_)),l),d),p),M=s.svf(S,m,h,1,!1),N=s.switch(y,M,0);return a.env={trigger(e){j.trigger(),g.trigger(e),w.trigger(),_.trigger()}},e.factory(a,N,["instruments","clap"],f)};return t.defaults={gain:1,spacing:100,decay:.2,loudness:1,__triggerLoudness:1,cutoff:900,Q:.85},t}},{"./instrument.js":42,"genish.js":114}],37:[function(e,t,n){const s=e("genish.js"),i=e("./instrument.js"),r=e("../fx/wavefolder.dsp.js"),a=s;t.exports=function(e){const t=r(e)[1],n=r=>{const o=Object.create(i),u=s.in("frequency"),l=s.in("loudness"),c=s.in("__triggerLoudness"),d=s.in("glide"),p=s.slide(u,d,d),m=s.in("attack"),h=s.in("decay"),f=s.in("sustain"),g=s.in("sustainLevel"),y=s.in("release"),b=s.in("pregain"),j=s.in("postgain"),v=Object.assign({},n.defaults,r);return Object.assign(o,v),o.__createGraph=function(){const n=e.oscillators.factory(o.waveform,p,o.antialias),i=e.envelopes.factory(v.useADSR,v.shape,m,h,f,g,y,v.triggerRelease),r=s.in("saturation");{let d,p=a.mul(a.mul(a.mul(n,i),l),c),m=t(t(t(t(a.mul(a.mul(p,a.mul(b,i)),.333)))));m=a.mul(s.tanh(a.mul(m,.6)),j);const h=a.mul(s.in("cutoff"),a.div(u,a.div(s.gen.samplerate,16))),f=s.min(a.mul(a.mul(h,s.pow(2,a.mul(a.mul(s.in("filterMult"),l),c))),i),.995),g=e.filters.factory(m,f,r,v);let y=a.mul(g,s.in("gain"));2!==v.filterType&&(y=a.mul(y,r)),!0===o.panVoices?(d=s.pan(y,y,s.in("pan")),o.graph=[d.left,d.right]):o.graph=y,o.env=i,o.osc=n,o.filter=g}},o.__requiresRecompilation=["waveform","antialias","filterType","filterMode","useADSR","shape"],o.__createGraph(),e.factory(o,o.graph,["instruments","complex"],v)};n.defaults={waveform:"triangle",attack:44,decay:22050,sustain:44100,sustainLevel:.6,release:22050,useADSR:!1,shape:"exponential",triggerRelease:!1,gain:.5,pulsewidth:.25,frequency:220,pan:.5,antialias:!0,panVoices:!1,loudness:1,__triggerLoudness:1,glide:1,saturation:1,filterMult:2,Q:.25,cutoff:.5,filterType:1,filterMode:0,isStereo:!1,pregain:4,postgain:1};let o=e.PolyTemplate(n,["frequency","attack","decay","pulsewidth","pan","gain","glide","saturation","filterMult","Q","cutoff","resonance","antialias","filterType","waveform","filterMode","__triggerLoudness","loudness","pregain","postgain"]);return o.defaults=n.defaults,[n,o]}},{"../fx/wavefolder.dsp.js":34,"./instrument.js":42,"genish.js":114}],38:[function(e,t,n){let s=e("genish.js"),i=e("./instrument.js");t.exports=function(e){const t=n=>{const r=Object.create(i),a=s.in("frequency"),o=s.in("decay"),u=s.in("gain"),l=s.in("loudness"),c=s.in("__triggerLoudness"),d=Object.assign({},t.defaults,n),p=s.bang(),m=s.mul(p,60),h=s.sub(.101,s.div(o,10)),f=s.svf(m,a,h,2,!1),g=s.mul(f,s.mul(s.mul(c,l),u));return r.isStereo=!1,r.env=p,e.factory(r,g,["instruments","conga"],d)};t.defaults={gain:.125,frequency:190,decay:.85,loudness:1,__triggerLoudness:1};const n=e.PolyTemplate(t,["gain","frequency","decay","loudness","__triggerLoudness"]);return n.defaults=t.defaults,[t,n]}},{"./instrument.js":42,"genish.js":114}],39:[function(e,t,n){let s=e("genish.js"),i=e("./instrument.js");t.exports=function(e){const t=n=>{let r=Object.create(i);const a=s.in("decay"),o=s.in("gain"),u=s.in("loudness"),l=s.in("__triggerLoudness"),c=Object.assign({},t.defaults,n),d=s.param("bpfc",1e3),p=e.oscillators.factory("square",560),m=e.oscillators.factory("square",845),h=s.decay(s.mul(a,2*s.gen.samplerate),{initValue:0}),f=s.svf(s.add(p,m),d,3,2,!1),g=s.mul(f,h),y=s.mul(g,s.mul(o,u,l));return r.env=h,r.isStereo=!1,r=e.factory(r,y,["instruments","cowbell"],c)};return t.defaults={gain:1,decay:.5,loudness:1,__triggerLoudness:1},t}},{"./instrument.js":42,"genish.js":114}],40:[function(e,t,n){const s=e("genish.js"),i=e("./instrument.js"),r=s;t.exports=function(e){const t=n=>{let a=Object.create(i),o=s.in("frequency"),u=s.in("glide"),l=s.slide(o,u,u),c=s.in("cmRatio"),d=s.in("index"),p=s.in("feedback"),m=s.in("attack"),h=s.in("decay"),f=s.in("sustain"),g=s.in("sustainLevel"),y=s.in("release"),b=s.in("loudness"),j=s.in("__triggerLoudness"),v=s.in("saturation");const x=Object.assign({},t.defaults,n);Object.assign(a,x),a.__createGraph=function(){const t=e.envelopes.factory(x.useADSR,x.shape,m,h,f,g,y,x.triggerRelease);a.advance=(()=>{t.release()});const n=s.history(0),i=e.oscillators.factory(a.modulatorWaveform,s.add(s.mul(l,c),s.mul(n.out,p,d)),a.antialias);{const u=r.mul(b,j),c=r.mul(r.mul(r.mul(i,l),d),u),p=r.mul(c,t),m=r.mul(.5,r.add(p,n.out));n.in(m);const h=e.oscillators.factory(a.carrierWaveform,s.add(l,m),a.antialias),f=2===x.filterType?r.mul(h,t):s.mul(h,s.mul(t,v)),g=r.mul(s.in("cutoff"),r.div(o,r.div(s.gen.samplerate,16))),y=s.min(r.mul(r.mul(g,s.pow(2,r.mul(s.in("filterMult"),u))),t),.995),_=e.filters.factory(f,y,v,a),w=r.mul(r.mul(_,s.in("gain")),u);let k;!0===x.panVoices?(k=s.pan(w,w,s.in("pan")),a.graph=[k.left,k.right],a.isStereo=!0):(a.graph=w,a.isStereo=!1)}return a.env=t,t},a.__requiresRecompilation=["carrierWaveform","modulatorWaveform","antialias","filterType","filterMode"];a.__createGraph();const _=e.factory(a,a.graph,["instruments","FM"],x);return _.env.advance=_.advance,_};t.defaults={carrierWaveform:"sine",modulatorWaveform:"sine",attack:44,feedback:0,decay:22050,sustain:44100,sustainLevel:.6,release:22050,useADSR:!1,shape:"linear",triggerRelease:!1,gain:.25,cmRatio:2,index:5,pulsewidth:.25,frequency:220,pan:.5,antialias:!1,panVoices:!1,glide:1,saturation:1,filterMult:1.5,Q:.25,cutoff:.35,filterType:0,filterMode:0,loudness:1,__triggerLoudness:1};const n=e.PolyTemplate(t,["glide","frequency","attack","decay","pulsewidth","pan","gain","cmRatio","index","saturation","filterMult","Q","cutoff","antialias","filterType","carrierWaveform","modulatorWaveform","filterMode","feedback","useADSR","sustain","release","sustainLevel","__triggerLoudness","loudness"]);return n.defaults=t.defaults,[t,n]}},{"./instrument.js":42,"genish.js":114}],41:[function(e,t,n){let s=e("genish.js"),i=e("./instrument.js");t.exports=function(e){let t=n=>{let r=Object.create(i),a=s.in("tune"),o=s.memo(s.add(.4,a)),u=s.in("decay"),l=s.in("gain"),c=s.in("loudness"),d=s.in("__triggerLoudness"),p=Object.assign({},t.defaults,n),m=s.mul(325,o),h=s.mul(s.param("bpfc",7e3),o),f=s.mul(s.param("hpfc",11e3),o),g=e.oscillators.factory("square",m,!1),y=e.oscillators.factory("square",s.mul(m,1.4471)),b=e.oscillators.factory("square",s.mul(m,1.617)),j=e.oscillators.factory("square",s.mul(m,1.9265)),v=e.oscillators.factory("square",s.mul(m,2.5028)),x=e.oscillators.factory("square",s.mul(m,2.6637)),_=s.add(g,y,b,j,v,x),w=s.decay(s.mul(u,2*s.gen.samplerate),{initValue:0}),k=s.svf(_,h,.5,2,!1),$=s.mul(k,w),O=s.filter24($,0,f,0),S=s.mul(O,s.mul(l,s.mul(c,d)));return r.env=w,r.isStereo=!1,e.factory(r,S,["instruments","hat"],p)};return t.defaults={gain:.5,tune:.6,decay:.1,loudness:1,__triggerLoudness:1},t}},{"./instrument.js":42,"genish.js":114}],42:[function(e,t,n){const s=e("../ugen.js")(),i=Object.create(s);Object.assign(i,{type:"instrument",note(e,t=null){if(isNaN(this.frequency)){let t=Gibberish.processor.ugens.get(this.frequency.id);!0!==t.isop?t.inputs[0]=e:(t.inputs[1]=e,Gibberish.dirty(this)),this.frequency=t}else this.frequency=e;null!==t&&(this.__triggerLoudness=t),this.env.trigger()},trigger(e=1){this.__triggerLoudness=e,this.env.trigger()}}),t.exports=i},{"../ugen.js":69}],43:[function(e,t,n){t.exports=function(t){const n={Kick:e("./kick.js")(t),Clave:e("./conga.js")(t)[0],Hat:e("./hat.js")(t),Snare:e("./snare.js")(t),Cowbell:e("./cowbell.js")(t),Tom:e("./tom.js")(t),Clap:e("./clap.dsp.js")(t)};return n.Clave.defaults.frequency=2500,n.Clave.defaults.decay=.5,[n.Synth,n.PolySynth]=e("./synth.dsp.js")(t),[n.Complex,n.PolyComplex]=e("./complex.dsp.js")(t),[n.Monosynth,n.PolyMono]=e("./monosynth.dsp.js")(t),[n.FM,n.PolyFM]=e("./fm.dsp.js")(t),[n.Sampler,n.PolySampler]=e("./sampler.js")(t),[n.Karplus,n.PolyKarplus]=e("./karplusstrong.js")(t),[n.Conga,n.PolyConga]=e("./conga.js")(t),n.export=(e=>{for(let t in n)"export"!==t&&(e[t]=n[t])}),n}},{"./clap.dsp.js":36,"./complex.dsp.js":37,"./conga.js":38,"./cowbell.js":39,"./fm.dsp.js":40,"./hat.js":41,"./karplusstrong.js":44,"./kick.js":45,"./monosynth.dsp.js":46,"./sampler.js":49,"./snare.js":50,"./synth.dsp.js":51,"./tom.js":52}],44:[function(e,t,n){const s=e("genish.js"),i=e("./instrument.js");t.exports=function(e){const t=n=>{const r=Object.assign({},t.defaults,n);let a=Object.create(i),o=e.ctx.sampleRate;const u=s.bang(),l=s.accum(1,u,{shouldWrapMax:!1,initialValue:1e6}),c=s.gtp(s.sub(1,s.div(l,200)),0),d=s.mul(s.noise(),c),p=s.history(),m=s.in("frequency"),h=s.in("glide"),f=s.slide(m,h,h),g=s.delay(s.add(d,p.out),s.div(o,f)),y=s.mul(g,s.t60(s.mul(s.in("decay"),f))),b=s.mix(y,p.out,s.in("damping")),j=s.noise(),v=s.switch(s.gt(j,s.in("blend")),-1,1),x=s.mul(s.mul(v,b),s.mul(s.mul(s.in("loudness"),s.in("__triggerLoudness")),s.in("gain")));p.in(b);const _=Object.assign({},t.defaults,r);if(Object.assign(a,{properties:r,env:u,phase:l,getPhase:()=>e.memory.heap[l.memory.value.idx]}),_.panVoices){const t=s.pan(x,x,s.in("pan"));(a=e.factory(a,[t.left,t.right],["instruments","karplus"],r)).isStereo=!0}else(a=e.factory(a,x,["instruments","karplus"],r)).isStereo=!1;return a};t.defaults={decay:.97,damping:.2,gain:.15,frequency:220,pan:.5,glide:1,panVoices:!1,loudness:1,__triggerLoudness:1,blend:1};const n=e.PolyTemplate(t,["frequency","decay","damping","pan","gain","glide","loudness","__triggerLoudness"],(t,n)=>{let s=()=>{t.getPhase()>n.decay*sampleRate?(n.disconnectUgen(t),t.isConnected=!1,e.memory.heap[t.phase.memory.value.idx]=0):e.blockCallbacks.push(s)};return s});return n.defaults=t.defaults,[t,n]}},{"./instrument.js":42,"genish.js":114}],45:[function(e,t,n){let s=e("genish.js"),i=e("./instrument.js");t.exports=function(e){const t=n=>{const r=Object.create(i),a=s.in("frequency"),o=s.in("decay"),u=s.in("tone"),l=s.in("gain"),c=s.in("loudness"),d=s.in("__triggerLoudness"),p=s.mul(c,d),m=Object.assign({},t.defaults,n);Object.assign(r,m);const h=s.bang(),f=s.mul(h,60),g=s.sub(1.005,o),y=s.add(50,s.mul(u,s.mul(4e3,p))),b=s.svf(f,a,g,2,!1),j=s.svf(b,y,.5,0,!1),v=s.mul(j,s.mul(l,p));return r.env=h,e.factory(r,v,["instruments","kick"],m)};return t.defaults={gain:1,frequency:85,tone:.25,decay:.9,loudness:1,__triggerLoudness:1},t}},{"./instrument.js":42,"genish.js":114}],46:[function(e,t,n){const s=e("genish.js"),i=e("./instrument.js");e("../oscillators/fmfeedbackosc.js");t.exports=function(e){const t=n=>{const r=Object.create(i),a=[],o=s.in("frequency"),u=s.in("glide"),l=s.memo(s.slide(o,u,u)),c=s.in("attack"),d=s.in("decay"),p=s.in("sustain"),m=s.in("sustainLevel"),h=s.in("release"),f=s.in("loudness"),g=s.in("__triggerLoudness"),y=s.mul(f,g),b=s.in("saturation"),j=Object.assign({},t.defaults,n);return Object.assign(r,j),r.__createGraph=function(){const t=e.envelopes.factory(j.useADSR,j.shape,c,d,p,m,h,j.triggerRelease);for(let t=0;t<3;t++){let n,i;switch(t){case 1:i=s.add(l,s.mul(l,s.in("detune2")));break;case 2:i=s.add(l,s.mul(l,s.in("detune3")));break;default:i=l}n=e.oscillators.factory(r.waveform,i,r.antialias),a[t]=n}const n=s.add(...a),i=2===j.filterType?s.mul(n,t):s.sub(s.add(s.mul(n,t),b),b),u=s.mul(s.in("cutoff"),s.div(o,s.gen.samplerate/16)),f=s.mul(s.mul(u,s.pow(2,s.mul(s.in("filterMult"),y))),t),g=e.filters.factory(i,f,s.in("saturation"),r);if(j.panVoices){const e=s.pan(g,g,s.in("pan"));r.graph=[s.mul(e.left,s.in("gain"),y),s.mul(e.right,s.in("gain"),y)],r.isStereo=!0}else r.graph=s.mul(g,s.in("gain"),y),r.isStereo=!1;r.env=t},r.__requiresRecompilation=["waveform","antialias","filterType","filterMode"],r.__createGraph(),e.factory(r,r.graph,["instruments","Monosynth"],j)};t.defaults={waveform:"saw",attack:44,decay:22050,sustain:44100,sustainLevel:.6,release:22050,useADSR:!1,shape:"linear",triggerRelease:!1,gain:.25,pulsewidth:.25,frequency:220,pan:.5,detune2:.005,detune3:-.005,cutoff:.5,Q:.25,panVoices:!1,glide:1,antialias:!1,filterType:1,filterMode:0,saturation:.5,filterMult:2,isLowPass:!0,loudness:1,__triggerLoudness:1};let n=e.PolyTemplate(t,["frequency","attack","decay","cutoff","Q","detune2","detune3","pulsewidth","pan","gain","glide","saturation","filterMult","antialias","filterType","waveform","filterMode","loudness","__triggerLoudness"]);return n.defaults=t.defaults,[t,n]}},{"../oscillators/fmfeedbackosc.js":60,"./instrument.js":42,"genish.js":114}],47:[function(e,t,n){const s=e("../index.js");t.exports={note(e){if("worklet"!==s.mode){let t=this.__getVoice__();t.__triggerLoudness=this.__triggerLoudness,t.note(e,this.__triggerLoudness),this.__runVoice__(t,this),this.triggerNote=e}},trigger(e){if(null!==this.triggerChord)this.triggerChord.forEach(t=>{let n=this.__getVoice__();Object.assign(n,this.properties),n.note(t,e),this.__runVoice__(n,this)});else if(null!==this.triggerNote){let t=this.__getVoice__();Object.assign(t,this.properties),t.note(this.triggerNote,e),this.__runVoice__(t,this)}else{let t=this.__getVoice__();Object.assign(t,this.properties),t.trigger(e),this.__runVoice__(t,this)}},__runVoice__(e,t){e.isConnected||(e.connect(t),e.isConnected=!0)},__getVoice__(){return this.voices[this.voiceCount++%this.voices.length]},chord(e){void 0!==s&&"worklet"!==s.mode&&(e.forEach(e=>this.note(e)),this.triggerChord=e)},free(){for(let e of this.voices)e.free()},triggerChord:null,triggerNote:null}},{"../index.js":35}],48:[function(e,t,n){e("genish.js");const s=e("../workletProxy.js");t.exports=function(e){const t=s(e),n=(s,i,r)=>{return a=>{const o=Object.assign({},{isStereo:!0,maxVoices:4},a),u=!0===o.isStereo?e.Bus2({__useProxy__:!1}):e.Bus({__useProxy__:!1});Object.assign(u,{maxVoices:o.maxVoices,voiceCount:0,envCheck:r,dirty:!0,ugenName:"poly"+s.name+"_"+u.id+"_"+(o.isStereo?2:1),properties:o},e.mixins.polyinstrument),o.panVoices=!0,u.callback.ugenName=u.ugenName;const l=o.id;void 0!==o.id&&delete o.id;const c=[];for(let t=0;t<u.maxVoices;t++)o.id=u.id+"_"+t,c[t]=s(o),"processor"===e.mode&&(c[t].callback.ugenName=c[t].ugenName),c[t].isConnected=!1;let d;if(!1===o.isStereo){const e=(d=i.slice(0)).indexOf("pan");e>-1&&d.splice(e,1)}o.id=l,n.setupProperties(u,s,o.isStereo?i:d);const p=t(["instruments","Poly"+s.name],o,u);if("worklet"===e.mode){p.voices=[];let t=0;for(let n of c)e.worklet.port.postMessage({address:"addObjectToProperty",object:u.id,name:"voices",key:t,value:n.id}),p.voices[t]=n,t++}return p}};return n.setupProperties=function(e,t,n){for(let s of n)"pan"!==s&&"id"!==s&&Object.defineProperty(e,s,{get:()=>e.properties[s]||t.defaults[s],set(t){e.properties[s]=t;for(let n of e.voices)n[s]=t}})},n}},{"../workletProxy.js":71,"genish.js":114}],49:[function(e,t,n){const s=e("genish.js"),i=e("./instrument.js");t.exports=function(e){const t=Object.create(i),n={};Object.assign(t,{note(e){this.rate=e,e>0?this.__trigger():this.__phase__.value=this.end*(this.data.buffer.length-1)},trigger(t){void 0!==t&&(this.gain=t),"processor"===e.mode&&(e.memory.heap[this.__rateStorage__.memory.values.idx]>0?this.__trigger():this.__phase__.value=this.end*(this.data.buffer.length-1))}});const r=i=>{const a=Object.create(t),o=Object.assign({onload:null},r.defaults,i);a.isStereo=void 0!==o.isStereo&&o.isStereo;const u=s.in("start"),l=s.in("end"),c=s.in("bufferLength"),d=s.in("rate"),p=s.in("loops"),m=s.in("loudness"),h=s.in("__triggerLoudness"),f=s.data([0],1,{meta:!0});Object.assign(a,o),"worklet"===e.mode&&(a.__meta__={address:"add",name:["instruments","Sampler"],properties:JSON.stringify(o),id:a.id},e.worklet.ugens.set(a.id,a),e.worklet.port.postMessage(a.__meta__)),a.__createGraph=function(){if(a.__bang__=s.bang(),a.__trigger=a.__bang__.trigger,a.__phase__=s.counter(d,s.mul(u,c),s.mul(l,c),a.__bang__,p,{shouldWrap:!1,initialValue:9999999}),a.__rateStorage__=f,f[0]=d,a.graph=s.add(s.mul(s.ifelse(s.and(s.gte(a.__phase__,s.mul(u,c)),s.lt(a.__phase__,s.mul(l,c))),s.peek(a.data,a.__phase__,{mode:"samples"}),0),s.mul(s.mul(m,h),s.in("gain"))),f[0],s.mul(f[0],-1)),!0===a.panVoices){const e=s.pan(a.graph,a.graph,s.in("pan"));a.graph=[e.left,e.right]}};const g=(t,n)=>{if(void 0!==t){if("worklet"===e.mode){const n=e.memory.alloc(t.length,!0);e.worklet.port.postMessage({address:"copy",id:a.id,idx:n,buffer:t})}else"processor"===e.mode&&(a.data.buffer=t,a.data.memory.values.length=a.data.dim=t.length,a.__redoGraph());"function"==typeof a.onload&&a.onload(t||a.data.buffer),-999999999===a.bufferLength&&void 0!==a.data.buffer&&(a.bufferLength=a.data.buffer.length-1)}};return a.loadFile=function(t){"processor"!==e.mode?(a.data=s.data(t,1,{onload:g}),a.data instanceof Promise?a.data.then(e=>{a.data=e,n[t]=a.data,g(e.buffer)}):(n[t]=a.data,g(a.data.buffer))):a.data=s.data(new Float32Array,1,{onload:g,filename:t})},a.loadBuffer=function(t){"processor"===e.mode&&(a.data.buffer=t,a.data.memory.values.length=a.data.dim=t.length,a.__redoGraph())},void 0!==o.filename?a.loadFile(o.filename):a.data=s.data(new Float32Array),void 0!==a.data&&(a.data.onload=g,a.__createGraph()),e.factory(a,a.graph,["instruments","sampler"],o)};r.defaults={gain:1,pan:.5,rate:1,panVoices:!1,loops:0,start:0,end:1,bufferLength:-999999999,loudness:1,__triggerLoudness:1};const a=e.PolyTemplate(r,["rate","pan","gain","start","end","loops","bufferLength","__triggerLoudness","loudness"],function(t,n){const s=()=>{const i=e.memory.heap[t.__phase__.memory.value.idx];t.rate>0&&i>t.end||t.rate<0&&i<0?(n.disconnectUgen.call(n,t),t.isConnected=!1):e.blockCallbacks.push(s)};return s});return[r,a]}},{"./instrument.js":42,"genish.js":114}],50:[function(e,t,n){const s=e("genish.js"),i=e("./instrument.js");t.exports=function(e){const t=n=>{const r=Object.create(i),a=s.in("decay"),o=s.mul(a,2*s.gen.samplerate),u=s.in("snappy"),l=s.in("tune"),c=s.in("gain"),d=s.in("loudness"),p=s.in("__triggerLoudness"),m=s.mul(d,p),h=s.decay(o,{initValue:0}),f=s.memo(s.gt(h,5e-4)),g=s.mul(s.noise(),h),y=s.svf(g,s.add(1e3,s.mul(s.add(1,l),1e3)),.5,1,!1),b=s.mul(s.gtp(s.mul(y,u),0),m),j=s.svf(h,s.mul(180,s.add(l,1)),.05,2,!1),v=s.svf(h,s.mul(330,s.add(l,1)),.05,2,!1),x=s.memo(s.add(b,j,s.mul(v,.8))),_=s.mul(x,s.mul(c,m)),w=s.switch(f,_,0),k=Object.assign({},t.defaults,n);return r.env=h,e.factory(r,w,["instruments","snare"],k)};return t.defaults={gain:.5,tune:0,snappy:1,decay:.1,loudness:1,__triggerLoudness:1},t}},{"./instrument.js":42,"genish.js":114}],51:[function(e,t,n){const s=e("genish.js"),i=e("./instrument.js"),r=s;t.exports=function(e){const t=n=>{const a=Object.create(i),o=s.in("frequency"),u=s.in("loudness"),l=s.in("__triggerLoudness"),c=s.in("glide"),d=s.slide(o,c,c),p=s.in("attack"),m=s.in("decay"),h=s.in("sustain"),f=s.in("sustainLevel"),g=s.in("release"),y=Object.assign({},t.defaults,n);Object.assign(a,y),a.__createGraph=function(){const t=e.oscillators.factory(a.waveform,d,a.antialias),n=e.envelopes.factory(y.useADSR,y.shape,p,m,h,f,g,y.triggerRelease);a.advance=(()=>{n.release()});{let i,c=r.mul(r.mul(r.mul(t,n),u),l),d=s.in("saturation");const p=r.mul(s.in("cutoff"),r.div(o,r.div(s.gen.samplerate,16))),m=s.min(r.mul(r.mul(p,s.pow(2,r.mul(r.mul(s.in("filterMult"),u),l))),n),.995),h=e.filters.factory(c,m,d,y);let f=r.mul(h,s.in("gain"));2!==a.filterType&&(f=r.sub(r.add(f,d),d)),!0===a.panVoices?(i=s.pan(f,f,s.in("pan")),a.graph=[i.left,i.right],a.isStereo=!0):(a.graph=f,a.isStereo=!1),a.env=n,a.osc=t,a.filter=h}return n},a.__requiresRecompilation=["waveform","antialias","filterType","filterMode","useADSR","shape"];a.__createGraph();const b=e.factory(a,a.graph,["instruments","synth"],y,null,!0,["saturation"]);return b.env.advance=b.advance,b};t.defaults={waveform:"saw",attack:44,decay:22050,sustain:44100,sustainLevel:.6,release:22050,useADSR:!1,shape:"linear",triggerRelease:!1,gain:.5,pulsewidth:.25,frequency:220,pan:.5,antialias:!1,panVoices:!1,loudness:1,__triggerLoudness:1,glide:1,saturation:1,filterMult:2,Q:.25,cutoff:.5,filterType:1,filterMode:0};let n=e.PolyTemplate(t,["frequency","attack","decay","pulsewidth","pan","gain","glide","saturation","filterMult","Q","cutoff","resonance","antialias","filterType","waveform","filterMode","__triggerLoudness","loudness"]);return n.defaults=t.defaults,[t,n]}},{"./instrument.js":42,"genish.js":114}],52:[function(e,t,n){const s=e("genish.js"),i=e("./instrument.js");t.exports=function(e){const t=n=>{let r=Object.create(i);const a=s.in("decay"),o=s.in("frequency"),u=s.in("gain"),l=s.in("loudness"),c=s.in("__triggerLoudness"),d=Object.assign({},t.defaults,n),p=s.bang(),m=s.mul(p,1),h=s.decay(s.mul(a,2*s.gen.samplerate),{initValue:0}),f=s.mul(s.svf(m,o,.0175,2,!1),10),g=s.gtp(s.noise(),0),y=s.mul(g,h),b=s.mul(s.svf(y,120,.5,0,!1),2.5),j=s.mul(s.add(f,b),s.mul(u,s.mul(l,c)));return r.env={trigger:function(){h.trigger(),p.trigger()}},r.isStereo=!1,r=e.factory(r,j,["instruments","tom"],d)};return t.defaults={gain:1,decay:.7,frequency:120,loudness:1,__triggerLoudness:1},t}},{"./instrument.js":42,"genish.js":114}],53:[function(e,t,n){const s=e("../ugen.js")(),i=e("../workletProxy.js");e("genish.js");t.exports=function(e){const t=i(e),n=function(t,n){for(let s=0;s<2;s++)Object.defineProperty(t,s,{get:()=>t.inputs[s],set(i){t.inputs[s]=i,"worklet"===e.mode&&("number"==typeof i?e.worklet.port.postMessage({address:"addToProperty",object:n,name:"inputs",key:s,value:i}):e.worklet.port.postMessage({address:"addObjectToProperty",object:n,name:"inputs",key:s,value:i.id}),e.worklet.port.postMessage({address:"dirty",id:n}))}})},r={export(e){for(let t in r)"export"!==t&&(e[t]=r[t])},Add(...i){const r=e.factory.getUID(),a=Object.create(s),o=e.__isStereo(i[0])||e.__isStereo(i[1]);Object.assign(a,{isop:!0,op:"+",inputs:i,ugenName:"add"+r,id:r,isStereo:o});const u=t(["binops","Add"],{isop:!0,inputs:i},a);return n(u,r),u},Sub(...n){const i=e.factory.getUID(),r=Object.create(s),a=e.__isStereo(n[0])||e.__isStereo(n[1]);return Object.assign(r,{isop:!0,op:"-",inputs:n,ugenName:"sub"+i,id:i,isStereo:a}),t(["binops","Sub"],{isop:!0,inputs:n},r)},Mul(...i){const r=e.factory.getUID(),a=Object.create(s),o=e.__isStereo(i[0])||e.__isStereo(i[1]);Object.assign(a,{isop:!0,op:"*",inputs:i,ugenName:"mul"+r,id:r,isStereo:o});const u=t(["binops","Mul"],{isop:!0,inputs:i},a);return n(u,r),u},Div(...i){const r=e.factory.getUID(),a=Object.create(s),o=e.__isStereo(i[0])||e.__isStereo(i[1]);Object.assign(a,{isop:!0,op:"/",inputs:i,ugenName:"div"+r,id:r,isStereo:o});const u=t(["binops","Div"],{isop:!0,inputs:i},a);return n(u,r),u},Mod(...i){const r=e.factory.getUID(),a=Object.create(s),o=e.__isStereo(i[0])||e.__isStereo(i[1]);Object.assign(a,{isop:!0,op:"%",inputs:i,ugenName:"mod"+r,id:r,isStereo:o});const u=t(["binops","Mod"],{isop:!0,inputs:i},a);return n(u,r),u}};for(let e in r)r[e].defaults={0:0,1:0};return r}},{"../ugen.js":69,"../workletProxy.js":71,"genish.js":114}],54:[function(e,t,n){e("genish.js");let s=e("../ugen.js")(),i=e("../workletProxy.js");t.exports=function(e){const t=i(e),n=Object.create(s);Object.assign(n,{gain:{set(t){this.mul.inputs[1]=t,e.dirty(this)},get(){return this.mul[1]}},__addInput(t){this.sum.inputs.push(t),e.dirty(this)},create(s){const i=Object.assign({},n.defaults,{inputs:[0]},s);e.preventProxy=!0;const r=e.binops.Add(...i.inputs),a=e.binops.Mul(r,i.gain);e.preventProxy=!1;const o=e.Panner({input:a,pan:i.pan});o.sum=r,o.mul=a,o.disconnectUgen=n.disconnectUgen,o.__properties__=i;const u=!0===i.__useProxy__?t(["Bus"],i,o):o;return Object.defineProperty(u,"gain",n.gain),u},disconnectUgen(t){let n=this.sum.inputs.indexOf(t);-1!==n&&(this.sum.inputs.splice(n,1),e.dirty(this))},defaults:{gain:1,pan:.5,__useProxy__:!0}});const r=n.create.bind(n);return r.defaults=n.defaults,r}},{"../ugen.js":69,"../workletProxy.js":71,"genish.js":114}],55:[function(e,t,n){const s=e("genish.js"),i=e("../ugen.js")(),r=e("../workletProxy.js");t.exports=function(e){const t=Object.create(i),n=r(e);let a,o;Object.assign(t,{create(i){if(void 0===a){s.pan();a=e.memory.alloc(1024),e.memory.heap.set(e.genish.gen.globals.panL.buffer,a),o=e.memory.alloc(1024),e.memory.heap.set(e.genish.gen.globals.panR.buffer,o)}const r=new Float64Array(2),u=Object.create(t);const l=Object.assign({},t.defaults,i);Object.assign(u,{callback(){r[0]=r[1]=0;const e=arguments.length-1,t=arguments[e];let n=arguments[e-1];const s=arguments[e-2];for(let t=0;t<e-2;t+=3){const e=arguments[t],n=arguments[t+1],s=arguments[t+2];r[0]+=!0===s?e[0]*n:e*n,r[1]+=!0===s?e[1]*n:e*n}n<0?n=0:n>1&&(n=1);const i=1023*n,u=0|i,l=u+1&1023,c=i-u,d=t[a+u]+c*(t[a+l]-t[a+u]),p=t[o+u]+c*(t[o+l]-t[o+u]);return r[0]*=s*d,r[1]*=s*p,r},id:e.factory.getUID(),dirty:!1,type:"bus",inputs:[1,.5],isStereo:!0,__properties__:l},t.defaults,l),u.ugenName=u.callback.ugenName="bus2_"+u.id;const c=!0===u.__useProxy__?n(["Bus2"],l,u):u;let d=.5;Object.defineProperty(c,"pan",{get:()=>d,set(t){d=t,c.inputs[c.inputs.length-1]=d,e.dirty(c)}});let p=1;return Object.defineProperty(c,"gain",{get:()=>p,set(t){p=t,c.inputs[c.inputs.length-2]=p,e.dirty(c)}}),c},disconnectUgen(t){let n=this.inputs.indexOf(t);-1!==n&&(this.inputs.splice(n,3),e.dirty(this))},defaults:{gain:1,pan:.5,__useProxy__:!0}});const u=t.create.bind(t);return u.defaults=t.defaults,u}},{"../ugen.js":69,"../workletProxy.js":71,"genish.js":114}],56:[function(e,t,n){const s=e("genish.js"),i=e("../ugen.js")();t.exports=function(e){const t={export(e){for(let n in t)"export"!==n&&(e[n]=t[n])},Abs(n){const r=Object.create(i),a=s.abs(s.in("input"));return e.factory(r,a,["monops","abs"],Object.assign({},t.defaults,{inputs:[n],isop:!0}))},Pow(n,r){const a=Object.create(i),o=s.pow(s.in("input"),s.in("exponent"));return e.factory(a,o,["monops","pow"],Object.assign({},t.defaults,{inputs:[n],exponent:r,isop:!0})),a},Clamp(n,r,a){const o=Object.create(i),u=s.clamp(s.in("input"),s.in("min"),s.in("max"));return e.factory(o,u,["monops","clamp"],Object.assign({},t.defaults,{inputs:[n],isop:!0,min:r,max:a}))},Merge(t){const n=Object.create(i);return e.factory(n,s.in("input"),["monops","merge"],{inputs:[t],isop:!0},function(e){return e[0]+e[1]}),n.type="analysis",n.inputNames=["input"],n.inputs=[t],n.input=t,n},defaults:{input:0}};return t}},{"../ugen.js":69,"genish.js":114}],57:[function(e,t,n){const s=e("genish.js"),i=e("../ugen.js")();t.exports=function(e){let t=n=>{const r=Object.assign({},t.defaults,n),a=Object.create(i),o=void 0!==r.input.isStereo?r.input.isStereo:Array.isArray(r.input),u=s.in("input"),l=s.in("pan");let c;return c=o?s.pan(u[0],u[1],l):s.pan(u,u,l),e.factory(a,[c.left,c.right],["panner"],r),a};return t.defaults={input:0,pan:.5},t}},{"../ugen.js":69,"genish.js":114}],58:[function(e,t,n){t.exports=function(e){const t={bpm:120,export:function(e){Object.assign(e,t)},ms:function(t){return t*e.ctx.sampleRate/1e3},seconds:function(t){return t*e.ctx.sampleRate},beats:function(t){return function(){return e.ctx.sampleRate/(e.Time.bpm/60)*t}}};return t}},{}],59:[function(e,t,n){const s=e("genish.js"),i=s.history,r=s.noise;t.exports=function(){const e=i(0),t=s.sub(s.mul(r(),2),1);let n=s.div(s.add(e.out,s.mul(.02,t)),1.02);return e.in(n),n=s.mul(n,3.5)}},{"genish.js":114}],60:[function(e,t,n){let s=e("genish.js");t.exports=function(e,t,n=.5,i){void 0===i&&(i={type:0});let r,a,o=s.history(),u=s.memo(s.div(e,s.gen.samplerate)),l=s.sub(-.5,u),c=s.mul(s.mul(13,t),s.pow(l,5)),d=s.sub(.376,s.mul(u,.752)),p=s.sub(1,s.mul(2,u)),m=s.accum(u,0,{min:-1});if(r=s.memo(s.mul(s.add(o.out,s.sin(s.mul(2*Math.PI,s.memo(s.add(m,s.mul(o.out,c)))))),.5)),o.in(r),1===i.type){const e=s.history(),t=s.history(),i=s.mul(s.add(e.out,s.sin(s.mul(2*Math.PI,s.memo(s.add(m,s.mul(e.out,c),n))))),.5);e.in(i),a=s.memo(s.sub(o.out,e.out)),a=s.memo(s.add(s.mul(2.5,a),s.mul(-1.5,t.out))),t.in(s.sub(r,i))}else r=s.add(s.mul(2.5,r),s.mul(-1.5,o.out)),a=r=s.add(r,d);return s.mul(a,p)}},{"genish.js":114}],61:[function(e,t,n){const s=e("genish.js"),i=e("../ugen.js")(),r=e("./fmfeedbackosc.js"),a=e("./polyblep.dsp.js");t.exports=function(t){let n={export(e){for(let t in n)"export"!==t&&(e[t]=n[t])},genish:{Brown:e("./brownnoise.dsp.js"),Pink:e("./pinknoise.dsp.js")},Wavetable:e("./wavetable.js")(t),Square(e){const r=Object.create(i),a=Object.assign({antialias:!1},n.defaults,e),o=n.factory("square",s.in("frequency"),a.antialias),u=s.mul(o,s.in("gain"));return t.factory(r,u,["oscillators","square"],a)},Triangle(e){const r=Object.create(i),a=Object.assign({antialias:!1},n.defaults,e),o=n.factory("triangle",s.in("frequency"),a.antialias),u=s.mul(o,s.in("gain"));return t.factory(r,u,["oscillators","triangle"],a)},PWM(e){const r=Object.create(i),a=Object.assign({antialias:!1,pulsewidth:.25},n.defaults,e),o=n.factory("pwm",s.in("frequency"),a.antialias),u=s.mul(o,s.in("gain"));return t.factory(r,u,["oscillators","PWM"],a)},Sine(e){const r=Object.create(i),a=Object.assign({},n.defaults,e),o=s.mul(s.cycle(s.in("frequency")),s.in("gain"));return t.factory(r,o,["oscillators","sine"],a)},Noise(e){const r=Object.create(i),a=Object.assign({},{gain:1,color:"white"},e);let o;switch(a.color){case"brown":o=s.mul(n.genish.Brown(),s.in("gain"));break;case"pink":o=s.mul(n.genish.Pink(),s.in("gain"));break;default:o=s.mul(s.noise(),s.in("gain"))}return t.factory(r,o,["oscillators","noise"],a)},Saw(e){const r=Object.create(i),a=Object.assign({antialias:!1},n.defaults,e),o=n.factory("saw",s.in("frequency"),a.antialias),u=s.mul(o,s.in("gain"));return t.factory(r,u,["oscillators","saw"],a)},ReverseSaw(e){const r=Object.create(i),a=Object.assign({antialias:!1},n.defaults,e),o=s.sub(1,n.factory("saw",s.in("frequency"),a.antialias)),u=s.mul(o,s.in("gain"));return t.factory(r,u,["oscillators","ReverseSaw"],a)},factory(e,t,i=!1){let o;switch(e){case"pwm":let u=s.in("pulsewidth");if(1==i)o=r(t,1,u,{type:1});else{let e=s.phasor(t,0,{min:0});o=s.lt(e,u)}break;case"saw":o=0==i?s.phasor(t):a(t,{type:e});break;case"sine":o=s.cycle(t);break;case"square":o=!0===i?a(t,{type:e}):s.wavetable(t,{buffer:n.Square.buffer,name:"square"});break;case"triangle":o=1==i?a(t,{type:e}):s.wavetable(t,{buffer:n.Triangle.buffer,name:"triangle"});break;case"noise":o=s.noise()}return o}};n.Square.buffer=new Float32Array(1024);for(let e=1023;e>=0;e--)n.Square.buffer[e]=e/1024>.5?1:-1;n.Triangle.buffer=new Float32Array(1024);for(let e=1024;e--;e=e)n.Triangle.buffer[e]=1-4*Math.abs((e/1024+.25)%1-.5);return n.defaults={frequency:440,gain:1},n}},{"../ugen.js":69,"./brownnoise.dsp.js":59,"./fmfeedbackosc.js":60,"./pinknoise.dsp.js":62,"./polyblep.dsp.js":63,"./wavetable.js":64,"genish.js":114}],62:[function(e,t,n){const s=e("genish.js"),i=(s.history,s.data),r=s.noise;t.exports=function(){const e=i(8,1,{meta:!0}),t=s.sub(s.mul(r(),2),1);e[0]=s.add(s.mul(.99886,e[0]),s.mul(t,.0555179)),e[1]=s.add(s.mul(.99332,e[1]),s.mul(t,.0750579)),e[2]=s.add(s.mul(.969,e[2]),s.mul(t,.153852)),e[3]=s.add(s.mul(.8865,e[3]),s.mul(t,.3104856)),e[4]=s.add(s.mul(.55,e[4]),s.mul(t,.5329522)),e[5]=s.sub(s.mul(-.7616,e[5]),s.mul(t,.016898));const n=s.mul(s.add(s.add(s.add(s.add(s.add(s.add(s.add(e[0],e[1]),e[2]),e[3]),e[4]),e[5]),e[6]),s.mul(t,.5362)),.11);return e[6]=s.mul(t,.115926),n}},{"genish.js":114}],63:[function(e,t,n){const s=e("genish.js"),i=s;t.exports=function(e,t){void 0===t&&(t={type:"saw"});const n=i.history(0),r=t.type,a=void 0===e?220:e,o=s.div(a,i.gen.samplerate),u=i.accum(o,0,{min:0});let l;l="triangle"===r||"square"===r?s.sub(s.mul(2,i.lt(u,.5)),1):s.sub(s.mul(2,u),1);const c=i.lt(u,o),d=i.gt(u,s.sub(1,o)),p=i.switch(c,s.div(u,o),i.switch(d,s.div(s.sub(u,1),o),u)),m=i.switch(c,s.sub(s.sub(s.add(p,p),s.mul(p,p)),1),i.switch(d,s.add(s.add(s.add(s.mul(p,p),p),p),1),0));if("saw"!==r){l=s.add(l,m);const e=i.memo(i.mod(s.add(u,.5),1)),t=i.lt(e,o),a=i.gt(e,s.sub(1,o)),c=i.switch(t,s.div(e,o),i.switch(a,s.div(s.sub(e,1),o),e)),d=i.switch(t,s.sub(s.sub(s.add(c,c),s.mul(c,c)),1),i.switch(a,s.add(s.add(s.add(s.mul(c,c),c),c),1),0));l=s.sub(l,d),"triangle"===r&&(l=s.add(s.mul(o,l),s.mul(s.sub(1,o),n.out)),n.in(l))}else l=s.sub(l,m);return l}},{"genish.js":114}],64:[function(e,t,n){let s=e("genish.js"),i=e("../ugen.js")();t.exports=function(e){return s.wavetable=function(e,t){let n={immutable:!0};void 0!==t.name&&(n.global=t.name);const i=s.data(t.buffer,1,n);return s.peek(i,s.phasor(e,0,{min:0}))},function(t){const n=Object.create(i),r=Object.assign({},e.oscillators.defaults,t),a=s.wavetable(s.in("frequency"),r),o=s.mul(a,s.in("gain"));return e.factory(n,o,"wavetable",r),n}}},{"../ugen.js":69,"genish.js":114}],65:[function(e,t,n){const s=e("../external/priorityqueue.js");let i=null;const r={phase:0,queue:new s((e,t)=>e.time===t.time?e.priority<t.priority?-1:e.priority>t.priority?1:0:e.time-t.time),init(e){i=e},clear(){this.queue.data.length=0,this.queue.length=0},add(e,t,n=0){e+=this.phase,this.queue.push({time:e,func:t,priority:n})},tick(e=!1){if(this.shouldSync===e){if(this.queue.length){let e=this.queue.peek();for(isNaN(e.time)&&this.queue.pop();this.phase>=e.time&&(e.func(e.priority),this.queue.pop(),void 0!==(e=this.queue.peek())););}this.phase++}},advance(e){this.phase+=e,this.tick(!0)}};let a=!1;Object.defineProperty(r,"shouldSync",{get:()=>a,set(e){a=e,"worklet"===i.mode&&i.worklet.port.postMessage({address:"eval",code:"Gibberish.scheduler.shouldSync = "+e})}}),t.exports=r},{"../external/priorityqueue.js":10}],66:[function(e,t,n){e("genish.js");const s=e("../workletProxy.js"),i=e("../ugen.js")();t.exports=function(e){const t=Object.create(i),n=s(e);Object.assign(t,{start(t=0){return 0!==t?e.scheduler.add(t,()=>{e.analyzers.push(this),e.dirty(e.analyzers)}):(e.analyzers.push(this),e.dirty(e.analyzers)),this},stop(t=0){const n=e.analyzers.indexOf(this);return 0===t?(n>-1&&(e.analyzers.splice(n,1),e.dirty(e.analyzers)),this.phase=0,this.nextTime=0):e.scheduler.add(t,()=>{n>-1&&(e.analyzers.splice(n,1),e.dirty(e.analyzers)),this.phase=0,this.nextTime=0}),this},fire(){let e="function"==typeof this.values?this.values:this.values[this.__valuesPhase++%this.values.length];"function"==typeof e&&void 0===this.target?e():"function"==typeof this.target[this.key]?("function"==typeof e&&(e=e()),e!==this.DNR&&this.target[this.key](e)):("function"==typeof e&&(e=e()),e!==this.DNR&&(this.target[this.key]=e))}});const r={create(s){const i=Object.create(t),a=Object.assign({},r.defaults,s);i.phase=0,i.inputNames=["rate","density"],i.inputs=[1,1],i.nextTime=0,i.__valuesPhase=0,i.__timingsPhase=0,i.id=e.factory.getUID(),i.dirty=!0,i.type="seq",i.__addresses__={},i.DNR=-987654321,a.id=e.factory.getUID(),Object.assign(i,a),i.__properties__=a,null===i.timings&&(i.nextTime=1/0),i.callback=function(t,n){for(;i.phase>=i.nextTime;){let t="function"==typeof i.values?i.values:i.values[i.__valuesPhase++%i.values.length],s=!0,r=null;null!==i.timings&&void 0!==i.timings&&"function"==typeof(r="function"==typeof i.timings?i.timings:i.timings[i.__timingsPhase++%i.timings.length])&&(r=r());let a=!(n<=1);if(null!==r&&"object"==typeof r?(s=1===r.shouldExecute,r=r.time):null!==r&&Math.random()>=n&&(s=!1),s&&(void 0!==i.mainthreadonly?("function"==typeof t&&(t=t()),e.processor.messages.push(i.mainthreadonly,i.key,t)):"function"==typeof t&&void 0===i.target?t():"function"==typeof i.target[i.key]?("function"==typeof t&&(t=t()),t!==i.DNR&&i.target[i.key](t)):("function"==typeof t&&(t=t()),t!==i.DNR&&(i.target[i.key]=t))),null===r)return;i.phase-=i.nextTime,a&&(r=Math.random()>2-n?r/2:r),i.nextTime=r}return i.phase+=t,0},i.ugenName=i.callback.ugenName="seq_"+i.id;const o=e.memory.alloc(1);e.memory.heap[o]=i.rate,i.__addresses__.rate=o;let u=i.rate;Object.defineProperty(i,"rate",{get:()=>u,set(t){u!==t&&("number"==typeof t&&(e.memory.heap[o]=t),e.dirty(e.analyzers),u=t)}});const l=e.memory.alloc(1);e.memory.heap[l]=i.density,i.__addresses__.density=l;let c=i.density;return Object.defineProperty(i,"density",{get:()=>c,set(t){c!==t&&("number"==typeof t&&(e.memory.heap[l]=t),e.dirty(e.analyzers),c=t)}}),"worklet"===e.mode&&e.utilities.createPubSub(i),n(["Sequencer2"],a,i)},defaults:{rate:1,density:1,priority:0,phase:0}};return r.create.DO_NOT_OUTPUT=-987654321,r.create}},{"../ugen.js":69,"../workletProxy.js":71,"genish.js":114}],67:[function(e,t,n){const s=e("../workletProxy.js");t.exports=function(e){const t=s(e),n=s=>{let i;const r={__isRunning:!1,__valuesPhase:0,__timingsPhase:0,__type:"seq",__onlyRunsOnce:!1,__repeatCount:null,tick(t){let n="function"==typeof r.values?r.values:r.values[r.__valuesPhase++%r.values.length],s="function"==typeof r.timings?r.timings:r.timings[r.__timingsPhase++%r.timings.length],i=!0;!0===r.__onlyRunsOnce?r.__valuesPhase===r.values.length&&r.stop():null!==r.__repeatCount&&r.__valuesPhase%r.values.length==0&&(r.__repeatCount--,0===r.__repeatCount&&(r.stop(),r.__repeatCount=null)),"function"==typeof s&&(s=s()),"object"==typeof s&&(i=1===s.shouldExecute,s=s.time),s*=r.rate,i&&(void 0!==r.mainthreadonly?("function"==typeof n&&(n=n()),e.processor.messages.push(r.mainthreadonly,r.key,n)):"function"==typeof n&&void 0===r.target?n():"function"==typeof r.target[r.key]?("function"==typeof n&&(n=n()),r.target[r.key](n)):("function"==typeof n&&(n=n()),r.target[r.key]=n),!0===r.reportOutput&&e.processor.port.postMessage({address:"__sequencer",id:r.id,name:"output",value:n,phase:r.__valuesPhase,length:r.values.length})),"processor"===e.mode&&(!0!==r.__isRunning||isNaN(s)||e.scheduler.add(s,r.tick,r.priority))},start:(t=0)=>(r.__isRunning=!0,"processor"===e.mode&&e.scheduler.add(t,t=>{r.tick(t),e.processor.port.postMessage({address:"__sequencer",id:r.id,name:"start"})},r.priority),i),stop:(t=null)=>(null===t?(r.__isRunning=!1,"processor"===e.mode&&e.processor.port.postMessage({address:"__sequencer",id:r.id,name:"stop"})):e.scheduler.add(t,r.stop),i),once:()=>(r.__onlyRunsOnce=!0,i),repeat:(e=2)=>(r.__repeatCount=e,i)};s.id=e.factory.getUID(),"worklet"===e.mode&&e.utilities.createPubSub(r);const a=Object.assign({},n.defaults,s);return Object.assign(r,a),r.__properties__=a,i=t(["Sequencer"],a,r)};return n.defaults={priority:1e5,values:[],timings:[],rate:1,reportOutput:!1},n.make=function(e,t,s,i,r,a){return n({values:e,timings:t,target:s,key:i,priority:r,reportOutput:a})},n}},{"../workletProxy.js":71}],68:[function(e,t,n){const s=e("../workletProxy.js"),i=e("tidal.pegjs");t.exports=function(e){const t=s(e),n=s=>{let r;const a={__isRunning:!1,__phase:0,__type:"seq",__pattern:i(s.pattern,{addLocations:!0,addUID:!0,enclose:!0}),__events:null,tick(t){if(null!==a.__events&&0!==a.__events.length||(a.__events=a.__pattern.query(a.__phase++,1)),a.__events.length<=0)return void("processor"===e.mode&&!0===a.__isRunning&&e.scheduler.add(e.ctx.sampleRate/n.clock.cps,a.tick,a.priority));const s=a.__events[0].arc.start;if("chord"!==a.key)for(;a.__events.length>0&&s.valueOf()===a.__events[0].arc.start.valueOf();){let t=a.__events.shift(),n=t.value,s=t.uid;"object"==typeof n&&(n=n.value),null!==a.filters&&(n=a.filters.reduce((e,t)=>t(e,a,s),n)),void 0!==a.mainthreadonly?("function"==typeof n&&(n=n()),e.processor.messages.push(a.mainthreadonly,a.key,n)):"function"==typeof a.target[a.key]?a.target[a.key](n):a.target[a.key]=n}else{let e=a.__events.filter(e=>s.valueOf()===e.arc.start.valueOf()).map(e=>e.value),t=a.__events[0].uid;const n=a.__events.splice(0,e.length);null!==a.filters&&(1===e.length?e=a.filters.reduce((e,n)=>n(e,a,t),e):e.forEach((e,t)=>a.filters.reduce((e,s)=>s(e,a,n[t].uid),e))),"function"==typeof a.target[a.key]?a.target[a.key](e):a.target[a.key]=e}if("processor"===e.mode){let t;if(a.__events.length<=0){let e=0;for(;a.__events.length<=0;)a.__events=a.__pattern.query(a.__phase++,1),e++;t=e-s.valueOf()}else t=a.__events[0].arc.start.sub(s).valueOf();t*=Math.ceil(e.ctx.sampleRate/n.clock.cps)+1,!0===a.__isRunning&&!isNaN(t)&&t>0&&e.scheduler.add(t,a.tick,a.priority)}},rotate:e=>(a.__phase+=e,r),start:(t=0)=>(a.__isRunning=!0,e.scheduler.add(t,a.tick,a.priority),r),stop:()=>(a.__isRunning=!1,r)};s.id=e.factory.getUID();const o=Object.assign({},n.defaults,s);return Object.assign(a,o),a.__properties__=o,r=t(["Tidal"],o,a)};n.defaults={priority:1e5,pattern:"",rate:1,filters:null},n.make=function(e,t,s,i,r){return n({values:e,timings:t,target:s,key:i,priority:r})};let r=0;if(n.getUID=(()=>r++),n.clock={cps:1},n.id=e.utilities.getUID(),"worklet"===e.mode){e.worklet.port.postMessage({address:"eval",code:`Gibberish.Tidal.clock.id = ${n.id}; Gibberish.ugens.set( ${n.id}, Gibberish.Tidal.clock )`});let t=1;Object.defineProperty(n,"cps",{get:()=>t,set(s){t=s,"worklet"===e.mode&&e.worklet.port.postMessage({address:"set",object:n.id,name:"cps",value:t})}})}return n}},{"../workletProxy.js":71,"tidal.pegjs":165}],69:[function(e,t,n){let s=null;t.exports=function(e){void 0!==e&&null==s&&(s=e);return{__Gibberish:s,free:function(){s.genish.gen.free(this.graph)},print:function(){console.log(this.callback.toString())},connect:function(e,t=1){void 0===this.connected&&(this.connected=[]);let n=this;if(null==e&&(e=s.output),"function"==typeof e.__addInput)e.__addInput(n);else if(e.sum&&e.sum.inputs)e.sum.inputs.push(n);else if(e.inputs){const s=e.inputs.indexOf(n);-1===s?e.inputs.unshift(n,t,n.isStereo):e.inputs[s+1]=t}else e.input=n,e.inputGain=t;return s.dirty(e),this.connected.push([e,n,t]),this},disconnect:function(e){if(void 0===e){if(Array.isArray(this.connected)){for(let e of this.connected)void 0!==e[0].disconnectUgen?e[0].disconnectUgen(e[1]):e[0].input===this&&(e[0].input=0);this.connected.length=0}}else{const t=this.connected.find(t=>t[0]===e);void 0!==e.disconnectUgen?void 0!==t&&e.disconnectUgen(t[1]):e.input=0;const n=this.connected.indexOf(t);-1!==n&&this.connected.splice(n,1)}},chain:function(e,t=1){return this.connect(e,t),e},__redoGraph:function(){let e=this.isStereo;if(this.__createGraph(),this.callback=s.genish.gen.createCallback(this.graph,s.memory,!1,!0),this.inputNames=new Set(s.genish.gen.parameters),this.callback.ugenName=this.ugenName,s.dirty(this),e!==this.isStereo){if(void 0===this.connected)return;for(let e of this.connected)if(s.dirty(e[0]),void 0!==e[0].inputs){const t=e[0].inputs.indexOf(e[1]);-1!==t&&(e[0].inputs[t+2]=this.isStereo)}else void 0!==e[0].input&&void 0!==e[0].__redoGraph&&e[0].__redoGraph()}}}}},{}],70:[function(e,t,n){const s=e("genish.js"),i=e("./external/audioworklet-polyfill.js");t.exports=function(e){let t=0;const n={Make:function(t){const n=t.name||"Ugen"+Math.floor(1e4*Math.random()),s=t.type||"Ugen",i=t.properties||{},r=`\n    const ugen = Object.create( Gibberish.prototypes[ '${s}' ] )\n    const graphfnc = ${t.constructor.toString()}\n\n    const proxy = Gibberish.factory( ugen, graphfnc(), '${n}', ${JSON.stringify(i)} )\n    if( typeof props === 'object' ) Object.assign( proxy, props )\n\n    return proxy`;return e[n]=new Function("props",r),e.worklet.port.postMessage({name:n,address:"addConstructor",constructorString:`function( Gibberish ) {\n      const fnc = ${e[n].toString()}\n\n      return fnc\n    }`}),e[n]},createContext(t,r,a,o=2048){let u="undefined"==typeof AudioContext?webkitAudioContext:AudioContext;i(window,o);const l=()=>{if(void 0!==u){this.ctx=e.ctx=void 0===t?new u({latencyHint:.025}):t,s.gen.samplerate=this.ctx.sampleRate,s.utilities.ctx=this.ctx,document&&document.documentElement&&"ontouchstart"in document.documentElement?window.removeEventListener("touchstart",l):(window.removeEventListener("mousedown",l),window.removeEventListener("keydown",l));const i=n.ctx.createBufferSource();i.connect(n.ctx.destination),i.start()}"function"==typeof r&&r(a)};return document&&document.documentElement&&"ontouchstart"in document.documentElement?window.addEventListener("touchstart",l):(window.addEventListener("mousedown",l),window.addEventListener("keydown",l)),e.ctx},createWorklet(t){e.ctx.audioWorklet.addModule(e.workletPath).then(()=>{e.worklet=new AudioWorkletNode(e.ctx,"gibberish",{outputChannelCount:[2]}),e.worklet.connect(e.ctx.destination),e.worklet.port.onmessage=(t=>{e.utilities.workletHandlers[t.data.address](t)}),e.worklet.ugens=new Map,t()})},future(t,n,s){const i=Object.keys(s),r=`\n      const fnc = ${t.toString()}\n      const args = [${i.map(e=>s[e].id).join(",")}]\n      const objs = args.map( v => Gibberish.processor.ugens.get(v) )\n      Gibberish.scheduler.add( ${n}, ()=> fnc( ...objs ), 1 )\n    `;e.worklet.port.postMessage({address:"eval",code:r})},workletHandlers:{__sequencer(t){const n=t.data,s=n.id,i=n.name;e.worklet.ugens.get(s).publish(i,n)},callback(t){"function"==typeof e.oncallback&&e.oncallback(t.data.code)},get(t){let n,s=t.data.name;"Gibberish"===s[0]&&(n=e,s.shift());for(let e of s)n=n[e];e.worklet.port.postMessage({address:"set",name:"Gibberish."+s.join("."),value:n})},state(t){const n=t.data.messages;if(0!==n.length){e.preventProxy=!0,e.proxyEnabled=!1;for(let t=0;t<n.length;t+=3){const s=n[t],i=n[t+1],r=n[t+2],a=e.worklet.ugens.get(s);if(!0===e.worklet.debug&&("output"!==i&&console.log(i,r,s),console.log(i,r,s)),void 0!==a&&-1===i.indexOf(".")&&"id"!==i)void 0!==a[i]?"function"!=typeof a[i]?a[i]=r:a[i](r):a[i]=r;else if(void 0!==a){const e=i.split(".");void 0!==a[e[0]]&&("function"!=typeof a[e[0]][e[1]]?a[e[0]][e[1]]=r:a[e[0]][e[1]](r))}}e.preventProxy=!1,e.proxyEnabled=!0}}},createPubSub(e){const t={};e.on=function(n,s){return void 0===t[n]&&(t[n]=[]),t[n].push(s),e},e.off=function(n,s){if(void 0!==t[n]){const e=t[n];e.splice(e.indexOf(s),1)}return e},e.publish=function(n,s){if(void 0!==t[n]){t[n].forEach(e=>e(s))}return e}},wrap:(e,...t)=>({action:"wrap",value:e,args:t.map(e=>({id:e.id}))}),export(e){e.wrap=this.wrap,e.future=this.future,e.Make=this.Make},getUID:()=>t++};return n}},{"./external/audioworklet-polyfill.js":9,"genish.js":114}],71:[function(e,t,n){const s=e("serialize-javascript");t.exports=function(e){const t=function(e,t=!0){return"object"==typeof e&&null!==e&&void 0!==e.id?"seq"!==e.__type?{id:e.id,prop:e.prop}:s(e):"function"==typeof e&&!0===t?{isFunc:!0,value:s(e)}:e},n=["connected","input","callback","inputNames","on","off","publish"];return function(i,r,a){if("worklet"===e.mode&&!1===e.preventProxy)return function(n,i,r){const a={};for(let e in i)if("object"==typeof i[e]&&null!==i[e]&&void 0!==i[e].__meta__||"function"==typeof i[e]&&void 0!==i[e].__meta__)a[e]={id:i[e].__meta__.id};else if(Array.isArray(i[e])){const n=[];for(let s=0;s<i[e].length;s++)n[s]=t(i[e][s],!1);a[e]=n}else"object"==typeof i[e]&&null!==i[e]?a[e]=t(i[e],!1):a[e]=i[e];let o=s(a);if(Array.isArray(n)){const e=n[n.length-1];n[n.length-1]=e[0].toUpperCase()+e.substring(1)}else n=[n[0].toUpperCase()+n.substring(1)];r.__meta__={address:"add",name:n,properties:o,id:r.id},e.worklet.ugens.set(r.id,r),e.worklet.port.postMessage(r.__meta__)}(i,r,a),new Proxy(a,{get:(s,i,r)=>"function"==typeof s[i]&&-1===i.indexOf("__")&&-1===n.indexOf(i)?new Proxy(s[i],{apply(n,s,r){if(!0===e.proxyEnabled){const n=r.map(e=>t(e,!0));e.worklet.port.postMessage({address:"method",object:a.id,name:i,args:n})}const o=e.proxyEnabled;e.proxyEnabled=!1;const u=n.apply(s,r);return e.proxyEnabled=o,u}}):s[i],set(s,i,r,o){if(-1===n.indexOf(i)&&!0===e.proxyEnabled){const n=t(r);void 0!==n&&e.worklet.port.postMessage({address:"set",object:a.id,name:i,value:n})}return s[i]=r,!0}});if("processor"===e.mode&&!1===e.preventProxy)return new Proxy(a,{set(t,n,s,i){let r=typeof s;return-1===n.indexOf("__")&&"function"!==r&&"object"!==r&&void 0!==e.processor&&e.processor.messages.push(a.id,n,s),t[n]=s,!0}});return a}}},{"serialize-javascript":163}],72:[function(e,t,n){function s(e,t){for(var n=[],s=[],i=[t],r=e-t,a=0,o=function(e){if(-1==e)n.push(0);else if(-2==e)n.push(1);else{for(var t=0;t<s[e];t++)o(e-1);i[e]&&o(e-2)}};i[a]>1;)s.push(Math.floor(r/i[a])),i.push(r%i[a]),r=i[a],a++;return s.push(r),o(a),n.reverse()}t.exports=function(e,t){return e>t?s(e,t):s(t,e)}},{}],73:[function(e,t,n){},{}],74:[function(e,t,n){var s=Object.create||function(e){var t=function(){};return t.prototype=e,new t},i=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},r=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function a(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=s(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}t.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._maxListeners=void 0;var o,u=10;try{var l={};Object.defineProperty&&Object.defineProperty(l,"x",{value:0}),o=0===l.x}catch(e){o=!1}function c(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function d(e,t,n,i){var r,a,o;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((a=e._events)?(a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]):(a=e._events=s(null),e._eventsCount=0),o){if("function"==typeof o?o=a[t]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),!o.warned&&(r=c(e))&&r>0&&o.length>r){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",u.name,u.message)}}else o=a[t]=n,++e._eventsCount;return e}function p(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function m(e,t,n){var s={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=r.call(p,s);return i.listener=n,s.wrapFn=i,i}function h(e,t,n){var s=e._events;if(!s)return[];var i=s[t];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):g(i,i.length):[]}function f(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function g(e,t){for(var n=new Array(t),s=0;s<t;++s)n[s]=e[s];return n}o?Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');u=e}}):a.defaultMaxListeners=u,a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(e){var t,n,s,i,r,a,o="error"===e;if(a=this._events)o=o&&null==a.error;else if(!o)return!1;if(o){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var u=new Error('Unhandled "error" event. ('+t+")");throw u.context=t,u}if(!(n=a[e]))return!1;var l="function"==typeof n;switch(s=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var s=e.length,i=g(e,s),r=0;r<s;++r)i[r].call(n)}(n,l,this);break;case 2:!function(e,t,n,s){if(t)e.call(n,s);else for(var i=e.length,r=g(e,i),a=0;a<i;++a)r[a].call(n,s)}(n,l,this,arguments[1]);break;case 3:!function(e,t,n,s,i){if(t)e.call(n,s,i);else for(var r=e.length,a=g(e,r),o=0;o<r;++o)a[o].call(n,s,i)}(n,l,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,s,i,r){if(t)e.call(n,s,i,r);else for(var a=e.length,o=g(e,a),u=0;u<a;++u)o[u].call(n,s,i,r)}(n,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(s-1),r=1;r<s;r++)i[r-1]=arguments[r];!function(e,t,n,s){if(t)e.apply(n,s);else for(var i=e.length,r=g(e,i),a=0;a<i;++a)r[a].apply(n,s)}(n,l,this,i)}return!0},a.prototype.addListener=function(e,t){return d(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return d(this,e,t,!0)},a.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,m(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,m(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,i,r,a,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(i=this._events))return this;if(!(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=s(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,r=a;break}if(r<0)return this;0===r?n.shift():function(e,t){for(var n=t,s=n+1,i=e.length;s<i;n+=1,s+=1)e[n]=e[s];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),i.removeListener&&this.emit("removeListener",e,o||t)}return this},a.prototype.removeAllListeners=function(e){var t,n,r;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=s(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=s(null):delete n[e]),this;if(0===arguments.length){var a,o=i(n);for(r=0;r<o.length;++r)"removeListener"!==(a=o[r])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=s(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return h(this,e,!0)},a.prototype.rawListeners=function(e){return h(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},a.prototype.listenerCount=f,a.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],75:[function(e,t,n){!function(e){"use strict";var s=2e3,i={s:1,n:0,d:1};function r(e){function t(){var t=Error.apply(this,arguments);t.name=this.name=e,this.stack=t.stack,this.message=t.message}function n(){}return n.prototype=Error.prototype,t.prototype=new n,t}var a=p.DivisionByZero=r("DivisionByZero"),o=p.InvalidParameter=r("InvalidParameter");function u(e,t){return isNaN(e=parseInt(e,10))&&l(),e*t}function l(){throw new o}var c=function(e,t){var n,s=0,r=1,o=1,c=0,d=0,p=0,m=1,h=1,f=0,g=1,y=1,b=1,j=1e7;if(null==e);else if(void 0!==t)o=(s=e)*(r=t);else switch(typeof e){case"object":"d"in e&&"n"in e?(s=e.n,r=e.d,"s"in e&&(s*=e.s)):0 in e?(s=e[0],1 in e&&(r=e[1])):l(),o=s*r;break;case"number":if(e<0&&(o=e,e=-e),e%1==0)s=e;else if(e>0){for(e>=1&&(e/=h=Math.pow(10,Math.floor(1+Math.log(e)/Math.LN10)));g<=j&&b<=j;){if(e===(n=(f+y)/(g+b))){g+b<=j?(s=f+y,r=g+b):b>g?(s=y,r=b):(s=f,r=g);break}e>n?(f+=y,g+=b):(y+=f,b+=g),g>j?(s=y,r=b):(s=f,r=g)}s*=h}else(isNaN(e)||isNaN(t))&&(r=s=NaN);break;case"string":if(null===(g=e.match(/\d+|./g))&&l(),"-"===g[f]?(o=-1,f++):"+"===g[f]&&f++,g.length===f+1?d=u(g[f++],o):"."===g[f+1]||"."===g[f]?("."!==g[f]&&(c=u(g[f++],o)),(++f+1===g.length||"("===g[f+1]&&")"===g[f+3]||"'"===g[f+1]&&"'"===g[f+3])&&(d=u(g[f],o),m=Math.pow(10,g[f].length),f++),("("===g[f]&&")"===g[f+2]||"'"===g[f]&&"'"===g[f+2])&&(p=u(g[f+1],o),h=Math.pow(10,g[f+1].length)-1,f+=3)):"/"===g[f+1]||":"===g[f+1]?(d=u(g[f],o),m=u(g[f+2],1),f+=3):"/"===g[f+3]&&" "===g[f+1]&&(c=u(g[f],o),d=u(g[f+2],o),m=u(g[f+4],1),f+=5),g.length<=f){o=s=p+(r=m*h)*c+h*d;break}default:l()}if(0===r)throw new a;i.s=o<0?-1:1,i.n=Math.abs(s),i.d=Math.abs(r)};function d(e,t){if(!e)return t;if(!t)return e;for(;;){if(!(e%=t))return t;if(!(t%=e))return e}}function p(e,t){if(!(this instanceof p))return new p(e,t);c(e,t),e=p.REDUCE?d(i.d,i.n):1,this.s=i.s,this.n=i.n/e,this.d=i.d/e}p.REDUCE=1,p.prototype={s:1,n:0,d:1,abs:function(){return new p(this.n,this.d)},neg:function(){return new p(-this.s*this.n,this.d)},add:function(e,t){return c(e,t),new p(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(e,t){return c(e,t),new p(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(e,t){return c(e,t),new p(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(e,t){return c(e,t),new p(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return new p(this)},mod:function(e,t){return isNaN(this.n)||isNaN(this.d)?new p(NaN):void 0===e?new p(this.s*this.n%this.d,1):(c(e,t),0===i.n&&0===this.d&&p(0,0),new p(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d))},gcd:function(e,t){return c(e,t),new p(d(i.n,this.n)*d(i.d,this.d),i.d*this.d)},lcm:function(e,t){return c(e,t),0===i.n&&0===this.n?new p:new p(i.n*this.n,d(i.n,this.n)*d(i.d,this.d))},ceil:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new p(NaN):new p(Math.ceil(e*this.s*this.n/this.d),e)},floor:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new p(NaN):new p(Math.floor(e*this.s*this.n/this.d),e)},round:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new p(NaN):new p(Math.round(e*this.s*this.n/this.d),e)},inverse:function(){return new p(this.s*this.d,this.n)},pow:function(e){return e<0?new p(Math.pow(this.s*this.d,-e),Math.pow(this.n,-e)):new p(Math.pow(this.s*this.n,e),Math.pow(this.d,e))},equals:function(e,t){return c(e,t),this.s*this.n*i.d==i.s*i.n*this.d},compare:function(e,t){c(e,t);var n=this.s*this.n*i.d-i.s*i.n*this.d;return(0<n)-(n<0)},simplify:function(e){if(isNaN(this.n)||isNaN(this.d))return this;var t=this.abs().toContinued();function n(e){return 1===e.length?new p(e[0]):n(e.slice(1)).inverse().add(e[0])}e=e||.001;for(var s=0;s<t.length;s++){var i=n(t.slice(0,s+1));if(i.sub(this.abs()).abs().valueOf()<e)return i.mul(this.s)}return this},divisible:function(e,t){return c(e,t),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(e){var t,n="",s=this.n,i=this.d;return this.s<0&&(n+="-"),1===i?n+=s:(e&&(t=Math.floor(s/i))>0&&(n+=t,n+=" ",s%=i),n+=s,n+="/",n+=i),n},toLatex:function(e){var t,n="",s=this.n,i=this.d;return this.s<0&&(n+="-"),1===i?n+=s:(e&&(t=Math.floor(s/i))>0&&(n+=t,s%=i),n+="\\frac{",n+=s,n+="}{",n+=i,n+="}"),n},toContinued:function(){var e,t=this.n,n=this.d,s=[];if(isNaN(this.n)||isNaN(this.d))return s;do{s.push(Math.floor(t/n)),e=t%n,t=n,n=e}while(1!==t);return s},toString:function(e){var t,n=this.n,i=this.d;if(isNaN(n)||isNaN(i))return"NaN";p.REDUCE||(n/=t=d(n,i),i/=t),e=e||15;var r=function(e,t){for(;t%2==0;t/=2);for(;t%5==0;t/=5);if(1===t)return 0;for(var n=10%t,i=1;1!==n;i++)if(n=10*n%t,i>s)return 0;return i}(0,i),a=function(e,t,n){for(var s=1,i=function(e,t,n){for(var s=1;t>0;e=e*e%n,t>>=1)1&t&&(s=s*e%n);return s}(10,n,t),r=0;r<300;r++){if(s===i)return r;s=10*s%t,i=10*i%t}return 0}(0,i,r),o=-1===this.s?"-":"";if(o+=n/i|0,n%=i,(n*=10)&&(o+="."),r){for(var u=a;u--;)o+=n/i|0,n%=i,n*=10;o+="(";for(u=r;u--;)o+=n/i|0,n%=i,n*=10;o+=")"}else for(u=e;n&&u--;)o+=n/i|0,n%=i,n*=10;return o}},"function"==typeof define&&define.amd?define([],function(){return p}):"object"==typeof n?(Object.defineProperty(n,"__esModule",{value:!0}),p.default=p,p.Fraction=p,t.exports=p):e.Fraction=p}(this)},{}],76:[function(e,t,n){"use strict";let s=e("./gen.js"),i={name:"abs",gen(){let e,t=s.getInputs(this);const n="worklet"===s.mode,i=n?"":"gen.";return isNaN(t[0])?(s.closures.add({[this.name]:n?"Math.abs":Math.abs}),e=`${i}abs( ${t[0]} )`):e=Math.abs(parseFloat(t[0])),e}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t})},{"./gen.js":107}],77:[function(e,t,n){"use strict";let s=e("./gen.js"),i={basename:"accum",gen(){let e,t=s.getInputs(this),n="gen."+this.name;return s.requestMemory(this.memory),s.memory.heap[this.memory.value.idx]=this.initialValue,e=this.callback(n,t[0],t[1],`memory[${this.memory.value.idx}]`),s.memo[this.name]=this.name+"_value",[this.name+"_value",e]},callback(e,t,n,s){let i=this.max-this.min,r="",a="";return"number"==typeof this.inputs[1]&&this.inputs[1]<1||(this.resetValue!==this.min?r+=`  if( ${n} >=1 ) ${s} = ${this.resetValue}\n\n`:r+=`  if( ${n} >=1 ) ${s} = ${this.min}\n\n`),r+=`  var ${this.name}_value = ${s}\n`,!1===this.shouldWrap&&!0===this.shouldClamp?r+=`  if( ${s} < ${this.max} ) ${s} += ${t}\n`:r+=`  ${s} += ${t}\n`,this.max!==1/0&&this.shouldWrapMax&&(a+=`  if( ${s} >= ${this.max} ) ${s} -= ${i}\n`),this.min!==-1/0&&this.shouldWrapMin&&(a+=`  if( ${s} < ${this.min} ) ${s} += ${i}\n`),r=r+a+"\n"},defaults:{min:0,max:1,resetValue:0,initialValue:0,shouldWrap:!0,shouldWrapMax:!0,shouldWrapMin:!0,shouldClamp:!1}};t.exports=((e,t=0,n)=>{const r=Object.create(i);return Object.assign(r,{uid:s.getUID(),inputs:[e,t],memory:{value:{length:1,idx:null}}},i.defaults,n),void 0!==n&&void 0===n.shouldWrapMax&&void 0===n.shouldWrapMin&&void 0!==n.shouldWrap&&(r.shouldWrapMin=r.shouldWrapMax=n.shouldWrap),void 0!==n&&void 0===n.resetValue&&(r.resetValue=r.min),void 0===r.initialValue&&(r.initialValue=r.min),Object.defineProperty(r,"value",{get(){return s.memory.heap[this.memory.value.idx]},set(e){s.memory.heap[this.memory.value.idx]=e}}),r.name=`${r.basename}${r.uid}`,r})},{"./gen.js":107}],78:[function(e,t,n){"use strict";let s=e("./gen.js"),i={basename:"acos",gen(){let e,t=s.getInputs(this);const n="worklet"===s.mode,i=n?"":"gen.";return isNaN(t[0])?(s.closures.add({acos:n?"Math.acos":Math.acos}),e=`${i}acos( ${t[0]} )`):e=Math.acos(parseFloat(t[0])),e}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t.id=s.getUID(),t.name=`${t.basename}{acos.id}`,t})},{"./gen.js":107}],79:[function(e,t,n){"use strict";let s=e("./gen.js"),i=(e("./mul.js"),e("./sub.js")),r=e("./div.js"),a=e("./data.js"),o=e("./peek.js"),u=e("./accum.js"),l=e("./ifelseif.js"),c=e("./lt.js"),d=e("./bang.js"),p=e("./env.js"),m=e("./add.js"),h=e("./poke.js"),f=e("./neq.js"),g=e("./and.js"),y=e("./gte.js"),b=(e("./memo.js"),e("./utilities.js"));t.exports=((e=44100,t=44100,n)=>{const j=Object.assign({},{shape:"exponential",alpha:5,trigger:null},n),v=null!==j.trigger?j.trigger:d(),x=u(1,v,{min:0,max:1/0,initialValue:-1/0,shouldWrap:!1});let _,w,k,$=a([0]);"linear"===j.shape?k=l(g(y(x,0),c(x,e)),r(x,e),g(y(x,0),c(x,m(e,t))),i(1,r(i(x,e),t)),f(x,-1/0),h($,1,0,{inline:0}),0):(_=p({length:1024,type:j.shape,alpha:j.alpha}),w=p({length:1024,type:j.shape,alpha:j.alpha,reverse:!0}),k=l(g(y(x,0),c(x,e)),o(_,r(x,e),{boundmode:"clamp"}),g(y(x,0),c(x,m(e,t))),o(w,r(i(x,e),t),{boundmode:"clamp"}),f(x,-1/0),h($,1,0,{inline:0}),0));const O="worklet"===s.mode;return!0===O&&(k.node=null,b.register(k)),k.isComplete=(()=>{if(!0===O&&null!==k.node){return new Promise(e=>{k.node.getMemoryValue($.memory.values.idx,e)})}return s.memory.heap[$.memory.values.idx]}),k.trigger=(()=>{!0===O&&null!==k.node?k.node.port.postMessage({key:"set",idx:$.memory.values.idx,value:0}):s.memory.heap[$.memory.values.idx]=0,v.trigger()}),k})},{"./accum.js":77,"./add.js":80,"./and.js":82,"./bang.js":86,"./data.js":93,"./div.js":98,"./env.js":99,"./gen.js":107,"./gte.js":109,"./ifelseif.js":112,"./lt.js":115,"./memo.js":119,"./mul.js":125,"./neq.js":126,"./peek.js":131,"./poke.js":133,"./sub.js":144,"./utilities.js":150}],80:[function(e,t,n){"use strict";const s=e("./gen.js"),i={basename:"add",gen(){let e=s.getInputs(this),t="",n=0,i=0,r=!1,a=!0;return 0===e.length?0:(t=`  var ${this.name} = `,e.forEach((s,o)=>{isNaN(s)?(t+=s,o<e.length-1&&(r=!0,t+=" + "),a=!1):(n+=parseFloat(s),i++)}),i>0&&(t+=r||a?n:" + "+n),t+="\n",s.memo[this.name]=this.name,[this.name,t])}};t.exports=((...e)=>{const t=Object.create(i);return t.id=s.getUID(),t.name=t.basename+t.id,t.inputs=e,t})},{"./gen.js":107}],81:[function(e,t,n){"use strict";let s=e("./gen.js"),i=e("./mul.js"),r=e("./sub.js"),a=e("./div.js"),o=e("./data.js"),u=e("./peek.js"),l=e("./accum.js"),c=e("./ifelseif.js"),d=e("./lt.js"),p=e("./bang.js"),m=e("./env.js"),h=e("./param.js"),f=e("./add.js"),g=e("./gtp.js"),y=e("./not.js"),b=e("./and.js"),j=e("./neq.js"),v=e("./poke.js");t.exports=((e=44,t=22050,n=44100,x=.6,_=44100,w)=>{let k,$,O,S,M,N=p(),P=l(1,N,{max:1/0,shouldWrap:!1,initialValue:1/0}),I=h(1),q=Object.assign({},{shape:"exponential",alpha:5,triggerRelease:!1},w);const A=o([0]);k=m({length:1024,alpha:q.alpha,shift:0,type:q.shape}),O=q.triggerRelease?I:d(P,f(e,t,n)),S=q.triggerRelease?g(r(x,l(a(x,_),0,{shouldWrap:!1})),0):r(x,i(a(r(P,f(e,t,n)),_),x)),M=q.triggerRelease?y(I):d(P,f(e,t,n,_)),$=c(d(P,e),u(k,a(P,e),{boundmode:"clamp"}),d(P,f(e,t)),u(k,r(1,i(a(r(P,e),t),r(1,x))),{boundmode:"clamp"}),b(O,j(P,1/0)),u(k,x),M,u(k,S,{boundmode:"clamp"}),j(P,1/0),v(A,1,0,{inline:0}),0);const C="worklet"===s.mode;return!0===C&&($.node=null,utilities.register($)),$.trigger=(()=>{I.value=1,N.trigger()}),$.isComplete=(()=>{if(!0===C&&null!==$.node){return new Promise(e=>{$.node.getMemoryValue(A.memory.values.idx,e)})}return s.memory.heap[A.memory.values.idx]}),$.release=(()=>{I.value=0,C&&null!==$.node?$.node.port.postMessage({key:"set",idx:S.inputs[0].inputs[1].memory.value.idx,value:0}):s.memory.heap[S.inputs[0].inputs[1].memory.value.idx]=0}),$})},{"./accum.js":77,"./add.js":80,"./and.js":82,"./bang.js":86,"./data.js":93,"./div.js":98,"./env.js":99,"./gen.js":107,"./gtp.js":110,"./ifelseif.js":112,"./lt.js":115,"./mul.js":125,"./neq.js":126,"./not.js":128,"./param.js":130,"./peek.js":131,"./poke.js":133,"./sub.js":144}],82:[function(e,t,n){"use strict";let s=e("./gen.js"),i={basename:"and",gen(){let e,t=s.getInputs(this);return e=`  var ${this.name} = (${t[0]} !== 0 && ${t[1]} !== 0) | 0\n\n`,s.memo[this.name]=`${this.name}`,[`${this.name}`,e]}};t.exports=((e,t)=>{let n=Object.create(i);return Object.assign(n,{uid:s.getUID(),inputs:[e,t]}),n.name=`${n.basename}${n.uid}`,n})},{"./gen.js":107}],83:[function(e,t,n){"use strict";let s=e("./gen.js"),i={basename:"asin",gen(){let e,t=s.getInputs(this);const n="worklet"===s.mode,i=n?"":"gen.";return isNaN(t[0])?(s.closures.add({asin:n?"Math.sin":Math.asin}),e=`${i}asin( ${t[0]} )`):e=Math.asin(parseFloat(t[0])),e}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t.id=s.getUID(),t.name=`${t.basename}{asin.id}`,t})},{"./gen.js":107}],84:[function(e,t,n){"use strict";let s=e("./gen.js"),i={basename:"atan",gen(){let e,t=s.getInputs(this);const n="worklet"===s.mode,i=n?"":"gen.";return isNaN(t[0])?(s.closures.add({atan:n?"Math.atan":Math.atan}),e=`${i}atan( ${t[0]} )`):e=Math.atan(parseFloat(t[0])),e}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t.id=s.getUID(),t.name=`${t.basename}{atan.id}`,t})},{"./gen.js":107}],85:[function(e,t,n){"use strict";e("./gen.js");let s=e("./history.js"),i=e("./mul.js"),r=e("./sub.js");t.exports=((e=44100)=>{let t=s(1),n=Math.exp(-6.907755278921/e);return t.in(i(t.out,n)),t.out.trigger=(()=>{t.value=1}),r(1,t.out)})},{"./gen.js":107,"./history.js":111,"./mul.js":125,"./sub.js":144}],86:[function(e,t,n){"use strict";let s=e("./gen.js"),i={gen(){s.requestMemory(this.memory);let e=`  var ${this.name} = memory[${this.memory.value.idx}]\n  if( ${this.name} === 1 ) memory[${this.memory.value.idx}] = 0      \n      \n`;return s.memo[this.name]=this.name,[this.name,e]}};t.exports=(e=>{let t=Object.create(i),n=Object.assign({},{min:0,max:1},e);t.name="bang"+s.getUID(),t.min=n.min,t.max=n.max;const r="worklet"===s.mode;return!0===r&&(t.node=null,utilities.register(t)),t.trigger=(()=>{!0===r&&null!==t.node?t.node.port.postMessage({key:"set",idx:t.memory.value.idx,value:t.max}):s.memory.heap[t.memory.value.idx]=t.max}),t.memory={value:{length:1,idx:null}},t})},{"./gen.js":107}],87:[function(e,t,n){"use strict";let s=e("./gen.js"),i={basename:"bool",gen(){let e;return e=`${s.getInputs(this)[0]} === 0 ? 0 : 1`}};t.exports=(e=>{let t=Object.create(i);return Object.assign(t,{uid:s.getUID(),inputs:[e]}),t.name=`${t.basename}${t.uid}`,t})},{"./gen.js":107}],88:[function(e,t,n){"use strict";let s=e("./gen.js"),i={name:"ceil",gen(){let e,t=s.getInputs(this);const n="worklet"===s.mode,i=n?"":"gen.";return isNaN(t[0])?(s.closures.add({[this.name]:n?"Math.ceil":Math.ceil}),e=`${i}ceil( ${t[0]} )`):e=Math.ceil(parseFloat(t[0])),e}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t})},{"./gen.js":107}],89:[function(e,t,n){"use strict";let s=e("./gen.js"),i=(e("./floor.js"),e("./sub.js"),e("./memo.js"),{basename:"clip",gen(){let e,t=s.getInputs(this);return e=" "+(e=` var ${this.name} = ${t[0]}\n  if( ${this.name} > ${t[2]} ) ${this.name} = ${t[2]}\n  else if( ${this.name} < ${t[1]} ) ${this.name} = ${t[1]}\n`),s.memo[this.name]=this.name,[this.name,e]}});t.exports=((e,t=-1,n=1)=>{let r=Object.create(i);return Object.assign(r,{min:t,max:n,uid:s.getUID(),inputs:[e,t,n]}),r.name=`${r.basename}${r.uid}`,r})},{"./floor.js":104,"./gen.js":107,"./memo.js":119,"./sub.js":144}],90:[function(e,t,n){"use strict";let s=e("./gen.js"),i={basename:"cos",gen(){let e,t=s.getInputs(this);const n="worklet"===s.mode,i=n?"":"gen.";return isNaN(t[0])?(s.closures.add({cos:n?"Math.cos":Math.cos}),e=`${i}cos( ${t[0]} )`):e=Math.cos(parseFloat(t[0])),e}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t.id=s.getUID(),t.name=`${t.basename}{cos.id}`,t})},{"./gen.js":107}],91:[function(e,t,n){"use strict";let s=e("./gen.js"),i={basename:"counter",gen(){let e,t=s.getInputs(this),n="gen."+this.name;return null===this.memory.value.idx&&s.requestMemory(this.memory),s.memory.heap[this.memory.value.idx]=this.initialValue,e=this.callback(n,t[0],t[1],t[2],t[3],t[4],`memory[${this.memory.value.idx}]`,`memory[${this.memory.wrap.idx}]`),s.memo[this.name]=this.name+"_value",void 0===s.memo[this.wrap.name]&&this.wrap.gen(),[this.name+"_value",e]},callback(e,t,n,s,i,r,a,o){let u=this.max-this.min,l="",c="";return"number"==typeof this.inputs[3]&&this.inputs[3]<1||(l+=`  if( ${i} >= 1 ) ${a} = ${n}\n`),l+=`  var ${this.name}_value = ${a};\n  ${a} += ${t}\n`,"number"==typeof this.max&&this.max!==1/0&&"number"!=typeof this.min?c=`  if( ${a} >= ${this.max} &&  ${r} > 0) {\n    ${a} -= ${u}\n    ${o} = 1\n  }else{\n    ${o} = 0\n  }\n`:this.max!==1/0&&this.min!==1/0?c=`  if( ${a} >= ${s} &&  ${r} > 0) {\n    ${a} -= ${s} - ${n}\n    ${o} = 1\n  }else if( ${a} < ${n} &&  ${r} > 0) {\n    ${a} += ${s} - ${n}\n    ${o} = 1\n  }else{\n    ${o} = 0\n  }\n`:l+="\n",l+=c}};t.exports=((e=1,t=0,n=1/0,r=0,a=1,o)=>{let u=Object.create(i),l=Object.assign({initialValue:0,shouldWrap:!0},o);return Object.assign(u,{min:t,max:n,initialValue:l.initialValue,value:l.initialValue,uid:s.getUID(),inputs:[e,t,n,r,a],memory:{value:{length:1,idx:null},wrap:{length:1,idx:null}},wrap:{gen(){return null===u.memory.wrap.idx&&s.requestMemory(u.memory),s.getInputs(this),s.memo[this.name]=`memory[ ${u.memory.wrap.idx} ]`,`memory[ ${u.memory.wrap.idx} ]`}}},l),Object.defineProperty(u,"value",{get(){if(null!==this.memory.value.idx)return s.memory.heap[this.memory.value.idx]},set(e){null!==this.memory.value.idx&&(s.memory.heap[this.memory.value.idx]=e)}}),u.wrap.inputs=[u],u.name=`${u.basename}${u.uid}`,u.wrap.name=u.name+"_wrap",u})},{"./gen.js":107}],92:[function(e,t,n){"use strict";let s=e("./gen.js"),i=(e("./phasor.js"),e("./data.js")),r=e("./peek.js"),a=(e("./mul.js"),e("./phasor.js")),o={basename:"cycle",initTable(){let e=new Float32Array(1024);for(let t=0,n=e.length;t<n;t++)e[t]=Math.sin(t/n*(2*Math.PI));s.globals.cycle=i(e,1,{immutable:!0})}};t.exports=((e=1,t=0,n)=>{void 0===s.globals.cycle&&o.initTable();const i=Object.assign({},{min:0},n),u=r(s.globals.cycle,a(e,t,i));return u.name="cycle"+s.getUID(),u})},{"./data.js":93,"./gen.js":107,"./mul.js":125,"./peek.js":131,"./phasor.js":132}],93:[function(e,t,n){"use strict";const s=e("./gen.js"),i=e("./utilities.js"),r=e("./peek.js"),a=e("./poke.js"),o={basename:"data",globals:{},memo:{},gen(){let e;if(void 0===s.memo[this.name]){if(s.requestMemory(this.memory,this.immutable),e=this.memory.values.idx,void 0!==this.buffer)try{s.memory.heap.set(this.buffer,e)}catch(e){throw console.log(e),Error("error with request. asking for "+this.buffer.length+". current index: "+s.memoryIndex+" of "+s.memory.heap.length)}-1===this.name.indexOf("data")?o.memo[this.name]=e:s.memo[this.name]=e}else e=s.memo[this.name];return e}};t.exports=((e,t=1,n)=>{let u,l,c,d=!1;if(void 0!==n&&void 0!==n.global&&s.globals[n.global])return s.globals[n.global];if("number"==typeof e)if(1!==t){l=[];for(let n=0;n<t;n++)l[n]=new Float32Array(e)}else l=new Float32Array(e);else if(Array.isArray(e)){let t=e.length;l=new Float32Array(t);for(let t=0;t<e.length;t++)l[t]=e[t]}else"string"==typeof e?(l={length:t>1?t:1},d=!0):e instanceof Float32Array&&(l=e);if(u=Object.create(o),Object.assign(u,{buffer:l,name:o.basename+s.getUID(),dim:void 0!==l?l.length:1,channels:1,onload:null,immutable:void 0!==n&&!0===n.immutable,load(t,n){i.loadSample(t,u).then(i=>{o.memo[e]=i,u.name=t,u.memory.values.length=u.dim=i.length,s.requestMemory(u.memory,u.immutable),s.memory.heap.set(i,u.memory.values.idx),"function"==typeof u.onload&&u.onload(i),n(u)})},memory:{values:{length:void 0!==l?l.length:1,idx:null}}},n),void 0!==n&&(void 0!==n.global&&(s.globals[n.global]=u),!0===n.meta))for(let e=0,t=u.buffer.length;e<t;e++)Object.defineProperty(u,e,{get:()=>r(u,e,{mode:"simple",interp:"none"}),set:t=>a(u,t,e)});return!0===d?c=new Promise((t,n)=>{i.loadSample(e,u).then(n=>{o.memo[e]=n,u.memory.values.length=u.dim=n.length,u.buffer=n,t(u)})}):void 0!==o.memo[e]?(s.once("memory init",()=>{s.requestMemory(u.memory,u.immutable),s.memory.heap.set(u.buffer,u.memory.values.idx),"function"==typeof u.onload&&u.onload(u.buffer)}),c=u):c=u,c})},{"./gen.js":107,"./peek.js":131,"./poke.js":133,"./utilities.js":150}],94:[function(e,t,n){"use strict";e("./gen.js");let s=e("./history.js"),i=e("./sub.js"),r=e("./add.js"),a=e("./mul.js"),o=e("./memo.js");t.exports=(e=>{let t,n=s(),u=s();return t=o(r(i(e,n.out),a(u.out,.9997))),n.in(e),u.in(t),t})},{"./add.js":80,"./gen.js":107,"./history.js":111,"./memo.js":119,"./mul.js":125,"./sub.js":144}],95:[function(e,t,n){"use strict";e("./gen.js");let s=e("./history.js"),i=e("./mul.js"),r=e("./t60.js");t.exports=((e=44100,t)=>{let n=Object.assign({},{initValue:1},t),a=s(n.initValue);return a.in(i(a.out,r(e))),a.out.trigger=(()=>{a.value=1}),a.out})},{"./gen.js":107,"./history.js":111,"./mul.js":125,"./t60.js":146}],96:[function(e,t,n){"use strict";const s=e("./gen.js"),i=e("./data.js"),r=e("./poke.js"),a=e("./peek.js"),o=e("./sub.js"),u=e("./wrap.js"),l=e("./accum.js"),c=(e("./memo.js"),{basename:"delay",gen(){let e=s.getInputs(this);return s.memo[this.name]=e[0],e[0]}}),d={size:512,interp:"none"};t.exports=((e,t,n)=>{const p=Object.create(c);let m,h;!1===Array.isArray(t)&&(t=[t]);const f=Object.assign({},d,n),g=Math.max(...t);f.size<g&&(f.size=g),h=i(f.size),p.inputs=[],m=l(1,0,{max:f.size,min:0});for(let e=0;e<t.length;e++)p.inputs[e]=a(h,u(o(m,t[e]),0,f.size),{mode:"samples",interp:f.interp});return p.outputs=p.inputs,r(h,e,m),p.name=`${p.basename}${s.getUID()}`,p})},{"./accum.js":77,"./data.js":93,"./gen.js":107,"./memo.js":119,"./peek.js":131,"./poke.js":133,"./sub.js":144,"./wrap.js":152}],97:[function(e,t,n){"use strict";let s=e("./gen.js"),i=e("./history.js"),r=e("./sub.js");t.exports=(e=>{let t=i();t.in(e);let n=r(e,t.out);return n.name="delta"+s.getUID(),n})},{"./gen.js":107,"./history.js":111,"./sub.js":144}],98:[function(e,t,n){"use strict";let s=e("./gen.js");const i={basename:"div",gen(){let e=s.getInputs(this),t=`  var ${this.name} = `,n=e[0],i=isNaN(n);return e.forEach((s,r)=>{if(0===r)return;let a=isNaN(s),o=r===e.length-1;t+=i||a?`${n} / ${s}`:n/=s,o||(t+=" / ")}),t+="\n",s.memo[this.name]=this.name,[this.name,t]}};t.exports=((...e)=>{const t=Object.create(i);return Object.assign(t,{id:s.getUID(),inputs:e}),t.name=t.basename+t.id,t})},{"./gen.js":107}],99:[function(e,t,n){"use strict";let s=e("./gen"),i=e("./windows"),r=e("./data"),a=(e("./peek"),e("./phasor"),{type:"triangular",length:1024,alpha:.15,shift:0,reverse:!1});t.exports=(e=>{let t=Object.assign({},a,e),n=new Float32Array(t.length),o=t.type+"_"+t.length+"_"+t.shift+"_"+t.reverse+"_"+t.alpha;if(void 0===s.globals.windows[o]){for(let e=0;e<t.length;e++)n[e]=i[t.type](t.length,e,t.alpha,t.shift);!0===t.reverse&&n.reverse(),s.globals.windows[o]=r(n)}let u=s.globals.windows[o];return u.name="env"+s.getUID(),u})},{"./data":93,"./gen":107,"./peek":131,"./phasor":132,"./windows":151}],100:[function(e,t,n){"use strict";let s=e("./gen.js"),i={basename:"eq",gen(){let e,t=s.getInputs(this);return e=this.inputs[0]===this.inputs[1]?1:`  var ${this.name} = (${t[0]} === ${t[1]}) | 0\n\n`,s.memo[this.name]=`${this.name}`,[`${this.name}`,e]}};t.exports=((e,t)=>{let n=Object.create(i);return Object.assign(n,{uid:s.getUID(),inputs:[e,t]}),n.name=`${n.basename}${n.uid}`,n})},{"./gen.js":107}],101:[function(e,t,n){"use strict";let s=e("./gen.js"),i={name:"exp",gen(){let e,t=s.getInputs(this);const n="worklet"===s.mode,i=n?"":"gen.";return isNaN(t[0])?(s.closures.add({[this.name]:n?"Math.exp":Math.exp}),e=`${i}exp( ${t[0]} )`):e=Math.exp(parseFloat(t[0])),e}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t})},{"./gen.js":107}],102:[function(e,t,n){const s=e("./realm.js");t.exports=function(e=window,t=4096){const n=[];let i;if("function"!=typeof AudioWorkletNode||!("audioWorklet"in AudioContext.prototype)){e.AudioWorkletNode=function(e,n,s){const a=o(e)[n],u=s&&s.outputChannelCount?s.outputChannelCount[0]:2,l=e.createScriptProcessor(t,2,u);if(l.parameters=new Map,a.properties)for(let t=0;t<a.properties.length;t++){const n=a.properties[t],s=e.createGain().gain;s.value=n.defaultValue,l.parameters.set(n.name,s)}const c=new MessageChannel;i=c.port2;const d=new a.Processor(s||{});return i=null,l.port=c.port1,l.processor=a,l.instance=d,l.onaudioprocess=r,l},Object.defineProperty((e.AudioContext||e.webkitAudioContext).prototype,"audioWorklet",{get(){return this.$$audioWorklet||(this.$$audioWorklet=new e.AudioWorklet(this))}});const n=function(){this.port=i};n.prototype={},e.AudioWorklet=class{constructor(e){this.$$context=e}addModule(e,t){return fetch(e).then(e=>{if(!e.ok)throw Error(e.status);return e.text()}).then(e=>{const i={sampleRate:this.$$context.sampleRate,currentTime:this.$$context.currentTime,AudioWorkletProcessor:n,registerProcessor:(e,t)=>{o(this.$$context)[e]={realm:r,context:i,Processor:t,properties:t.parameterDescriptors||[]}}};i.self=i;const r=new s(i,document.documentElement);return r.exec((t&&t.transpile||String)(e)),null})}}}function r(e){const t={};let s=-1;this.parameters.forEach((e,i)=>{const r=n[++s]||(n[s]=new Float32Array(this.bufferSize));r.fill(e.value),t[i]=r}),this.processor.realm.exec("self.sampleRate=sampleRate="+this.context.sampleRate+";self.currentTime=currentTime="+this.context.currentTime);const i=a(e.inputBuffer),r=a(e.outputBuffer);this.instance.process([i],[r],t)}function a(e){const t=[];for(let n=0;n<e.numberOfChannels;n++)t[n]=e.getChannelData(n);return t}function o(e){return e.$$processors||(e.$$processors={})}}},{"./realm.js":103}],103:[function(e,t,n){t.exports=function(e,t){const n=document.createElement("iframe");n.style.cssText="position:absolute;left:0;top:-999px;width:1px;height:1px;",t.appendChild(n);const s=n.contentWindow,i=s.document;let r="var window,$hook";for(const t in s)t in e||"eval"===t||(r+=",",r+=t);for(const t in e)r+=",",r+=t,r+="=self.",r+=t;const a=i.createElement("script");a.appendChild(i.createTextNode(`function $hook(self,console) {"use strict";\n        ${r};return function() {return eval(arguments[0])}}`)),i.body.appendChild(a),this.exec=s.$hook.call(e,e,console)}},{}],104:[function(e,t,n){"use strict";let s=e("./gen.js"),i={name:"floor",gen(){let e,t=s.getInputs(this);return e=isNaN(t[0])?`( ${t[0]} | 0 )`:0|t[0]}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t})},{"./gen.js":107}],105:[function(e,t,n){"use strict";let s=e("./gen.js"),i={basename:"fold",gen(){let e,t=s.getInputs(this);return e=this.createCallback(t[0],this.min,this.max),s.memo[this.name]=this.name+"_value",[this.name+"_value",e]},createCallback(e,t,n){return" "+` var ${this.name}_value = ${e},\n      ${this.name}_range = ${n} - ${t},\n      ${this.name}_numWraps = 0\n\n  if(${this.name}_value >= ${n}){\n    ${this.name}_value -= ${this.name}_range\n    if(${this.name}_value >= ${n}){\n      ${this.name}_numWraps = ((${this.name}_value - ${t}) / ${this.name}_range) | 0\n      ${this.name}_value -= ${this.name}_range * ${this.name}_numWraps\n    }\n    ${this.name}_numWraps++\n  } else if(${this.name}_value < ${t}){\n    ${this.name}_value += ${this.name}_range\n    if(${this.name}_value < ${t}){\n      ${this.name}_numWraps = ((${this.name}_value - ${t}) / ${this.name}_range- 1) | 0\n      ${this.name}_value -= ${this.name}_range * ${this.name}_numWraps\n    }\n    ${this.name}_numWraps--\n  }\n  if(${this.name}_numWraps & 1) ${this.name}_value = ${n} + ${t} - ${this.name}_value\n`}};t.exports=((e,t=0,n=1)=>{let r=Object.create(i);return Object.assign(r,{min:t,max:n,uid:s.getUID(),inputs:[e]}),r.name=`${r.basename}${r.uid}`,r})},{"./gen.js":107}],106:[function(e,t,n){"use strict";let s=e("./gen.js"),i={basename:"gate",controlString:null,gen(){let e,t=s.getInputs(this);s.requestMemory(this.memory);let n="memory[ "+this.memory.lastInput.idx+" ]",i=this.memory.lastInput.idx+1,r=t[0],a=t[1];return e=` if( ${a} !== ${n} ) {\n    memory[ ${n} + ${i}  ] = 0 \n    ${n} = ${a}\n  }\n  memory[ ${i} + ${a} ] = ${r}\n\n`,this.controlString=t[1],this.initialized=!0,s.memo[this.name]=this.name,this.outputs.forEach(e=>e.gen()),[null," "+e]},childgen(){return!1===this.parent.initialized&&s.getInputs(this),void 0===s.memo[this.name]&&(s.requestMemory(this.memory),s.memo[this.name]=`memory[ ${this.memory.value.idx} ]`),`memory[ ${this.memory.value.idx} ]`}};t.exports=((e,t,n)=>{let r=Object.create(i),a={count:2};void 0!==typeof n&&Object.assign(a,n),Object.assign(r,{outputs:[],uid:s.getUID(),inputs:[t,e],memory:{lastInput:{length:1,idx:null}},initialized:!1},a),r.name=`${r.basename}${s.getUID()}`;for(let e=0;e<r.count;e++)r.outputs.push({index:e,gen:i.childgen,parent:r,inputs:[r],memory:{value:{length:1,idx:null}},initialized:!1,name:`${r.name}_out${s.getUID()}`});return r})},{"./gen.js":107}],107:[function(e,t,n){"use strict";const s=e("memory-helper"),i=e("events").EventEmitter,r={accum:0,getUID(){return this.accum++},debug:!1,samplerate:44100,shouldLocalize:!1,graph:null,globals:{windows:{}},mode:"worklet",closures:new Set,params:new Set,inputs:new Set,parameters:new Set,endBlock:new Set,histories:new Map,memo:{},export(e){},addToEndBlock(e){this.endBlock.add("  "+e)},requestMemory(e,t=!1){for(let n in e){let s=e[n];void 0!==s.length?s.idx=r.memory.alloc(s.length,t):console.log("undefined length for:",n)}},createMemory:(e=4096,t)=>s.create(e,t),createCallback(e,t,n=!1,s=!1,i=Float64Array){let r,a=Array.isArray(e)&&e.length>1;this.memory="number"==typeof t||void 0===t?this.createMemory(t,i):t,this.outputIdx=this.memory.alloc(2,!0),this.emit("memory init"),this.graph=e,this.memo={},this.endBlock.clear(),this.closures.clear(),this.inputs.clear(),this.params.clear(),this.globals={windows:{}},this.parameters.clear(),this.functionBody="  'use strict'\n",!1===s&&(this.functionBody+="worklet"===this.mode?"  var memory = this.memory\n\n":"  var memory = gen.memory\n\n");for(let t=0;t<1+a;t++){if("number"==typeof e[t])continue;let n=a?this.getInput(e[t]):this.getInput(e),s="";(s=(s+=Array.isArray(n)?n[1]+"\n"+n[0]:n).split("\n"))[s.length-1].trim().indexOf("let")>-1&&s.push("\n");let i=s.length-1;s[i]="  memory["+(this.outputIdx+t)+"]  = "+s[i]+"\n",this.functionBody+=s.join("\n")}this.histories.forEach(e=>{null!==e&&e.gen()});const o=a?`  return [ memory[${this.outputIdx}], memory[${this.outputIdx+1}] ]`:`  return memory[${this.outputIdx}]`;this.functionBody=this.functionBody.split("\n"),this.endBlock.size?(this.functionBody=this.functionBody.concat(Array.from(this.endBlock)),this.functionBody.push(o)):this.functionBody.push(o),this.functionBody=this.functionBody.join("\n"),!0===s&&this.parameters.add("memory");let u="";if("worklet"===this.mode){for(let e of this.parameters.values())u+=e+",";u=u.slice(0,-1)}const l=0!==this.parameters.size&&this.inputs.size>0?", ":"";let c="";if("worklet"===this.mode){for(let e of this.inputs.values())c+=e.name+",";c=c.slice(0,-1)}let d="worklet"===this.mode?`return function( ${c} ${l} ${u} ){ \n${this.functionBody}\n}`:`return function gen( ${[...this.parameters].join(",")} ){ \n${this.functionBody}\n}`;(this.debug||n)&&console.log(d),r=new Function(d)();for(let e of this.closures.values()){let t=Object.keys(e)[0],n=e[t];r[t]=n}for(let e of this.params.values()){let t=Object.keys(e)[0],n=e[t];Object.defineProperty(r,t,{configurable:!0,get:()=>n.value,set(e){n.value=e}})}return r.members=this.closures,r.data=this.data,r.params=this.params,r.inputs=this.inputs,r.parameters=this.parameters,r.out=this.memory.heap.subarray(this.outputIdx,this.outputIdx+2),r.isStereo=a,r.memory=this.memory.heap,this.histories.clear(),r},getInputs:e=>e.inputs.map(r.getInput),getInput(e){let t;if("object"==typeof e)if(r.memo[e.name])t=r.memo[e.name];else if(Array.isArray(e))r.getInput(e[0]),r.getInput(e[1]);else{"function"!=typeof e.gen&&(console.log("no gen found:",e,e.gen),e=e.graph);let n=e.gen();Array.isArray(n)?(r.shouldLocalize?(r.codeName=n[0],r.localizedCode.push(n[1])):r.functionBody+=n[1],t=n[0]):t=n}else t=e;return t},startLocalize(){this.localizedCode=[],this.shouldLocalize=!0},endLocalize(){return this.shouldLocalize=!1,[this.codeName,this.localizedCode.slice(0)]},free(e){if(Array.isArray(e))for(let t of e)this.free(t);else if("object"==typeof e){if(void 0!==e.memory)for(let t in e.memory)this.memory.free(e.memory[t].idx);if(Array.isArray(e.inputs))for(let t of e.inputs)this.free(t)}}};r.__proto__=new i,t.exports=r},{events:74,"memory-helper":153}],108:[function(e,t,n){"use strict";let s=e("./gen.js"),i={basename:"gt",gen(){let e,t=s.getInputs(this);return e=`  var ${this.name} = `,isNaN(this.inputs[0])||isNaN(this.inputs[1])?e+=`(( ${t[0]} > ${t[1]}) | 0 )`:e+=t[0]>t[1]?1:0,e+="\n\n",s.memo[this.name]=this.name,[this.name,e]}};t.exports=((e,t)=>{let n=Object.create(i);return n.inputs=[e,t],n.name=n.basename+s.getUID(),n})},{"./gen.js":107}],109:[function(e,t,n){"use strict";let s=e("./gen.js"),i={name:"gte",gen(){let e,t=s.getInputs(this);return e=`  var ${this.name} = `,isNaN(this.inputs[0])||isNaN(this.inputs[1])?e+=`( ${t[0]} >= ${t[1]} | 0 )`:e+=t[0]>=t[1]?1:0,e+="\n\n",s.memo[this.name]=this.name,[this.name,e]}};t.exports=((e,t)=>{let n=Object.create(i);return n.inputs=[e,t],n.name="gte"+s.getUID(),n})},{"./gen.js":107}],110:[function(e,t,n){"use strict";let s=e("./gen.js"),i={name:"gtp",gen(){let e,t=s.getInputs(this);return e=isNaN(this.inputs[0])||isNaN(this.inputs[1])?`(${t[0]} * ( ( ${t[0]} > ${t[1]} ) | 0 ) )`:t[0]*(t[0]>t[1]|0)}};t.exports=((e,t)=>{let n=Object.create(i);return n.inputs=[e,t],n})},{"./gen.js":107}],111:[function(e,t,n){"use strict";let s=e("./gen.js");t.exports=((e=0)=>{let t={inputs:[e],memory:{value:{length:1,idx:null}},recorder:null,in(n){if(s.histories.has(n)){let e=s.histories.get(n);return t.name=e.name,e}let i={gen(){let r=s.getInputs(t);null===t.memory.value.idx&&(s.requestMemory(t.memory),s.memory.heap[t.memory.value.idx]=e);let a=t.memory.value.idx;return s.addToEndBlock("memory[ "+a+" ] = "+r[0]),s.histories.set(n,i),r[0]},name:t.name+"_in"+s.getUID(),memory:t.memory};return this.inputs[0]=n,t.recorder=i,i},out:{gen:()=>(null===t.memory.value.idx&&(void 0===s.histories.get(t.inputs[0])&&s.histories.set(t.inputs[0],t.recorder),s.requestMemory(t.memory),s.memory.heap[t.memory.value.idx]=parseFloat(e)),"memory[ "+t.memory.value.idx+" ] ")},uid:s.getUID()};return t.out.memory=t.memory,t.name="history"+t.uid,t.out.name=t.name+"_out",t.in._name=t.name="_in",Object.defineProperty(t,"value",{get(){if(null!==this.memory.value.idx)return s.memory.heap[this.memory.value.idx]},set(e){null!==this.memory.value.idx&&(s.memory.heap[this.memory.value.idx]=e)}}),t})},{"./gen.js":107}],112:[function(e,t,n){"use strict";let s=e("./gen.js"),i={basename:"ifelse",gen(){let e=this.inputs[0],t=s.getInput(e[e.length-1]),n=`  var ${this.name}_out = ${t}\n`;for(let t=0;t<e.length-2;t+=2){let i,r,a,o=t===e.length-3,u=s.getInput(e[t]),l=e[t+1];"number"==typeof l?(i=l,r=null):void 0===s.memo[l.name]?(s.startLocalize(),s.getInput(l),r=(i=s.endLocalize())[0],i="  "+(i=i[1].join("")).replace(/\n/gi,"\n  ")):(i="",r=s.memo[l.name]),0===t&&(n+=" "),n+=` if( ${u} === 1 ) {\n${a=null===r?`  ${this.name}_out = ${i}`:`${i}  ${this.name}_out = ${r}`}\n  }`,n+=o?"\n":" else"}return s.memo[this.name]=`${this.name}_out`,[`${this.name}_out`,n]}};t.exports=((...e)=>{let t=Object.create(i),n=Array.isArray(e[0])?e[0]:e;return Object.assign(t,{uid:s.getUID(),inputs:[n]}),t.name=`${t.basename}${t.uid}`,t})},{"./gen.js":107}],113:[function(e,t,n){"use strict";let s=e("./gen.js"),i={basename:"in",gen(){const e="worklet"===s.mode;return e?s.inputs.add(this):s.parameters.add(this.name),s.memo[this.name]=!0===e?this.name+"[i]":this.name,s.memo[this.name]}};t.exports=((e,t=0,n=0,r=0,a=0,o=1)=>{let u=Object.create(i);return u.id=s.getUID(),u.name=void 0!==e?e:`${u.basename}${u.id}`,Object.assign(u,{defaultValue:r,min:a,max:o,inputNumber:t,channelNumber:n}),u[0]={gen:()=>(s.parameters.has(u.name)||s.parameters.add(u.name),u.name+"[0]")},u[1]={gen:()=>(s.parameters.has(u.name)||s.parameters.add(u.name),u.name+"[1]")},u})},{"./gen.js":107}],114:[function(e,t,n){"use strict";const s={export(e){e===window&&(e.ssd=s.history,e.input=s.in,e.ternary=s.switch,delete s.history,delete s.in,delete s.switch),Object.assign(e,s),Object.defineProperty(s,"samplerate",{get:()=>s.gen.samplerate,set(e){}}),s.in=e.input,s.history=e.ssd,s.switch=e.ternary,e.clip=s.clamp},gen:e("./gen.js"),abs:e("./abs.js"),round:e("./round.js"),param:e("./param.js"),add:e("./add.js"),sub:e("./sub.js"),mul:e("./mul.js"),div:e("./div.js"),accum:e("./accum.js"),counter:e("./counter.js"),sin:e("./sin.js"),cos:e("./cos.js"),tan:e("./tan.js"),tanh:e("./tanh.js"),asin:e("./asin.js"),acos:e("./acos.js"),atan:e("./atan.js"),phasor:e("./phasor.js"),data:e("./data.js"),peek:e("./peek.js"),cycle:e("./cycle.js"),history:e("./history.js"),delta:e("./delta.js"),floor:e("./floor.js"),ceil:e("./ceil.js"),min:e("./min.js"),max:e("./max.js"),sign:e("./sign.js"),dcblock:e("./dcblock.js"),memo:e("./memo.js"),rate:e("./rate.js"),wrap:e("./wrap.js"),mix:e("./mix.js"),clamp:e("./clamp.js"),poke:e("./poke.js"),delay:e("./delay.js"),fold:e("./fold.js"),mod:e("./mod.js"),sah:e("./sah.js"),noise:e("./noise.js"),not:e("./not.js"),gt:e("./gt.js"),gte:e("./gte.js"),lt:e("./lt.js"),lte:e("./lte.js"),bool:e("./bool.js"),gate:e("./gate.js"),train:e("./train.js"),slide:e("./slide.js"),in:e("./in.js"),t60:e("./t60.js"),mtof:e("./mtof.js"),ltp:e("./ltp.js"),gtp:e("./gtp.js"),switch:e("./switch.js"),mstosamps:e("./mstosamps.js"),selector:e("./selector.js"),utilities:e("./utilities.js"),pow:e("./pow.js"),attack:e("./attack.js"),decay:e("./decay.js"),windows:e("./windows.js"),env:e("./env.js"),ad:e("./ad.js"),adsr:e("./adsr.js"),ifelse:e("./ifelseif.js"),bang:e("./bang.js"),and:e("./and.js"),pan:e("./pan.js"),eq:e("./eq.js"),neq:e("./neq.js"),exp:e("./exp.js"),process:e("./process.js"),seq:e("./seq.js")};s.gen.lib=s,t.exports=s},{"./abs.js":76,"./accum.js":77,"./acos.js":78,"./ad.js":79,"./add.js":80,"./adsr.js":81,"./and.js":82,"./asin.js":83,"./atan.js":84,"./attack.js":85,"./bang.js":86,"./bool.js":87,"./ceil.js":88,"./clamp.js":89,"./cos.js":90,"./counter.js":91,"./cycle.js":92,"./data.js":93,"./dcblock.js":94,"./decay.js":95,"./delay.js":96,"./delta.js":97,"./div.js":98,"./env.js":99,"./eq.js":100,"./exp.js":101,"./floor.js":104,"./fold.js":105,"./gate.js":106,"./gen.js":107,"./gt.js":108,"./gte.js":109,"./gtp.js":110,"./history.js":111,"./ifelseif.js":112,"./in.js":113,"./lt.js":115,"./lte.js":116,"./ltp.js":117,"./max.js":118,"./memo.js":119,"./min.js":120,"./mix.js":121,"./mod.js":122,"./mstosamps.js":123,"./mtof.js":124,"./mul.js":125,"./neq.js":126,"./noise.js":127,"./not.js":128,"./pan.js":129,"./param.js":130,"./peek.js":131,"./phasor.js":132,"./poke.js":133,"./pow.js":134,"./process.js":135,"./rate.js":136,"./round.js":137,"./sah.js":138,"./selector.js":139,"./seq.js":140,"./sign.js":141,"./sin.js":142,"./slide.js":143,"./sub.js":144,"./switch.js":145,"./t60.js":146,"./tan.js":147,"./tanh.js":148,"./train.js":149,"./utilities.js":150,"./windows.js":151,"./wrap.js":152}],115:[function(e,t,n){"use strict";let s=e("./gen.js"),i={basename:"lt",gen(){let e,t=s.getInputs(this);return e=`  var ${this.name} = `,isNaN(this.inputs[0])||isNaN(this.inputs[1])?e+=`(( ${t[0]} < ${t[1]}) | 0  )`:e+=t[0]<t[1]?1:0,e+="\n",s.memo[this.name]=this.name,[this.name,e]}};t.exports=((e,t)=>{let n=Object.create(i);return n.inputs=[e,t],n.name=n.basename+s.getUID(),n})},{"./gen.js":107}],116:[function(e,t,n){"use strict";let s=e("./gen.js"),i={name:"lte",gen(){let e,t=s.getInputs(this);return e=`  var ${this.name} = `,isNaN(this.inputs[0])||isNaN(this.inputs[1])?e+=`( ${t[0]} <= ${t[1]} | 0  )`:e+=t[0]<=t[1]?1:0,e+="\n",s.memo[this.name]=this.name,[this.name,e]}};t.exports=((e,t)=>{let n=Object.create(i);return n.inputs=[e,t],n.name="lte"+s.getUID(),n})},{"./gen.js":107}],117:[function(e,t,n){"use strict";let s=e("./gen.js"),i={name:"ltp",gen(){let e,t=s.getInputs(this);return e=isNaN(this.inputs[0])||isNaN(this.inputs[1])?`(${t[0]} * (( ${t[0]} < ${t[1]} ) | 0 ) )`:t[0]*(t[0]<t[1]|0)}};t.exports=((e,t)=>{let n=Object.create(i);return n.inputs=[e,t],n})},{"./gen.js":107}],118:[function(e,t,n){"use strict";let s=e("./gen.js"),i={name:"max",gen(){let e,t=s.getInputs(this);const n="worklet"===s.mode,i=n?"":"gen.";return isNaN(t[0])||isNaN(t[1])?(s.closures.add({[this.name]:n?"Math.max":Math.max}),e=`${i}max( ${t[0]}, ${t[1]} )`):e=Math.max(parseFloat(t[0]),parseFloat(t[1])),e}};t.exports=((e,t)=>{let n=Object.create(i);return n.inputs=[e,t],n})},{"./gen.js":107}],119:[function(e,t,n){"use strict";let s=e("./gen.js"),i={basename:"memo",gen(){let e,t=s.getInputs(this);return e=`  var ${this.name} = ${t[0]}\n`,s.memo[this.name]=this.name,[this.name,e]}};t.exports=((e,t)=>{let n=Object.create(i);return n.inputs=[e],n.id=s.getUID(),n.name=void 0!==t?t+"_"+s.getUID():`${n.basename}${n.id}`,n})},{"./gen.js":107}],120:[function(e,t,n){"use strict";let s=e("./gen.js"),i={name:"min",gen(){let e,t=s.getInputs(this);const n="worklet"===s.mode,i=n?"":"gen.";return isNaN(t[0])||isNaN(t[1])?(s.closures.add({[this.name]:n?"Math.min":Math.min}),e=`${i}min( ${t[0]}, ${t[1]} )`):e=Math.min(parseFloat(t[0]),parseFloat(t[1])),e}};t.exports=((e,t)=>{let n=Object.create(i);return n.inputs=[e,t],n})},{"./gen.js":107}],121:[function(e,t,n){"use strict";let s=e("./gen.js"),i=e("./add.js"),r=e("./mul.js"),a=e("./sub.js"),o=e("./memo.js");t.exports=((e,t,n=.5)=>{let u=o(i(r(e,a(1,n)),r(t,n)));return u.name="mix"+s.getUID(),u})},{"./add.js":80,"./gen.js":107,"./memo.js":119,"./mul.js":125,"./sub.js":144}],122:[function(e,t,n){"use strict";let s=e("./gen.js");t.exports=((...e)=>{return{id:s.getUID(),inputs:e,gen(){let e=s.getInputs(this),t="(",n=e[0],i=isNaN(n);return e.forEach((s,r)=>{if(0===r)return;let a=isNaN(s),o=r===e.length-1;t+=i||a?`${n} % ${s}`:n%=s,o||(t+=" % ")}),t+=")"}}})},{"./gen.js":107}],123:[function(e,t,n){"use strict";let s=e("./gen.js"),i={basename:"mstosamps",gen(){let e,t,n=s.getInputs(this);return isNaN(n[0])?(e=`  var ${this.name} = ${s.samplerate} / 1000 * ${n[0]} \n\n`,s.memo[this.name]=e,t=[this.name,e]):t=e=s.samplerate/1e3*this.inputs[0],t}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t.name=i.basename+s.getUID(),t})},{"./gen.js":107}],124:[function(e,t,n){"use strict";let s=e("./gen.js"),i={name:"mtof",gen(){let e,t=s.getInputs(this);return isNaN(t[0])?(s.closures.add({[this.name]:Math.exp}),e=`( ${this.tuning} * gen.exp( .057762265 * (${t[0]} - 69) ) )`):e=this.tuning*Math.exp(.057762265*(t[0]-69)),e}};t.exports=((e,t)=>{let n=Object.create(i);return void 0!==t&&Object.assign(t.defaults),Object.assign(n,{tuning:440}),n.inputs=[e],n})},{"./gen.js":107}],125:[function(e,t,n){"use strict";const s=e("./gen.js"),i={basename:"mul",gen(){let e=s.getInputs(this),t=`  var ${this.name} = `,n=1,i=0,r=!1,a=!0;return e.forEach((s,o)=>{isNaN(s)?(t+=s,o<e.length-1&&(r=!0,t+=" * "),a=!1):(0===o?n=s:n*=parseFloat(s),i++)}),i>0&&(t+=r||a?n:" * "+n),t+="\n",s.memo[this.name]=this.name,[this.name,t]}};t.exports=((...e)=>{const t=Object.create(i);return Object.assign(t,{id:s.getUID(),inputs:e}),t.name=t.basename+t.id,t})},{"./gen.js":107}],126:[function(e,t,n){"use strict";let s=e("./gen.js"),i={basename:"neq",gen(){let e,t=s.getInputs(this);return e=`  var ${this.name} = (${t[0]} !== ${t[1]}) | 0\n\n`,s.memo[this.name]=this.name,[this.name,e]}};t.exports=((e,t)=>{let n=Object.create(i);return Object.assign(n,{uid:s.getUID(),inputs:[e,t]}),n.name=`${n.basename}${n.uid}`,n})},{"./gen.js":107}],127:[function(e,t,n){"use strict";let s=e("./gen.js"),i={name:"noise",gen(){let e;const t="worklet"===s.mode,n=t?"":"gen.";return s.closures.add({noise:t?"Math.random":Math.random}),e=`  var ${this.name} = ${n}noise()\n`,s.memo[this.name]=this.name,[this.name,e]}};t.exports=(e=>{let t=Object.create(i);return t.name=i.name+s.getUID(),t})},{"./gen.js":107}],128:[function(e,t,n){"use strict";let s=e("./gen.js"),i={name:"not",gen(){let e,t=s.getInputs(this);return e=isNaN(this.inputs[0])?`( ${t[0]} === 0 ? 1 : 0 )`:0===!t[0]?1:0}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t})},{"./gen.js":107}],129:[function(e,t,n){"use strict";let s=e("./gen.js"),i=e("./data.js"),r=e("./peek.js"),a=e("./mul.js"),o={basename:"pan",initTable(){let e=new Float32Array(1024),t=new Float32Array(1024);const n=Math.PI/180;for(let s=0;s<1024;s++){let i=s*(90/1024);e[s]=Math.cos(i*n),t[s]=Math.sin(i*n)}s.globals.panL=i(e,1,{immutable:!0}),s.globals.panR=i(t,1,{immutable:!0})}};t.exports=((e,t,n=.5,i)=>{void 0===s.globals.panL&&o.initTable();let u=Object.create(o);return Object.assign(u,{uid:s.getUID(),inputs:[e,t],left:a(e,r(s.globals.panL,n,{boundmode:"clamp"})),right:a(t,r(s.globals.panR,n,{boundmode:"clamp"}))}),u.name=`${u.basename}${u.uid}`,u})},{"./data.js":93,"./gen.js":107,"./mul.js":125,"./peek.js":131}],130:[function(e,t,n){"use strict";let s=e("./gen.js"),i={basename:"param",gen(){s.requestMemory(this.memory),s.params.add(this);const e="worklet"===s.mode;return e&&s.parameters.add(this.name),this.value=this.initialValue,s.memo[this.name]=e?this.name:`memory[${this.memory.value.idx}]`,s.memo[this.name]}};t.exports=((e=0,t=0,n=0,r=1)=>{let a=Object.create(i);return"string"!=typeof e?(a.name=a.basename+s.getUID(),a.initialValue=e):(a.name=e,a.initialValue=t),a.min=n,a.max=r,a.defaultValue=a.initialValue,a.waapi=null,a.isWorklet="worklet"===s.mode,Object.defineProperty(a,"value",{get(){return null!==this.memory.value.idx?s.memory.heap[this.memory.value.idx]:this.initialValue},set(e){null!==this.memory.value.idx&&(this.isWorklet&&null!==this.waapi?this.waapi.value=e:s.memory.heap[this.memory.value.idx]=e)}}),a.memory={value:{length:1,idx:null}},a})},{"./gen.js":107}],131:[function(e,t,n){const s=e("./gen.js");e("./data.js");let i={basename:"peek",gen(){this.name;let e,t,n,i,r=s.getInputs(this);return i=r[1],n=(0|Math.log2(this.data.buffer.length))===Math.log2(this.data.buffer.length),"simple"===this.mode?e=`memory[ ${i} + ${r[0]} ]`:(e=`  var ${this.name}_dataIdx  = ${i}, \n      ${this.name}_phase = ${"samples"===this.mode?r[0]:r[0]+" * "+this.data.buffer.length}, \n      ${this.name}_index = ${this.name}_phase | 0,\n`,t="wrap"===this.boundmode?n?`( ${this.name}_index + 1 ) & (${this.data.buffer.length} - 1)`:`${this.name}_index + 1 >= ${this.data.buffer.length} ? ${this.name}_index + 1 - ${this.data.buffer.length} : ${this.name}_index + 1`:"clamp"===this.boundmode?`${this.name}_index + 1 >= ${this.data.buffer.length-1} ? ${this.data.buffer.length-1} : ${this.name}_index + 1`:"fold"===this.boundmode||"mirror"===this.boundmode?`${this.name}_index + 1 >= ${this.data.buffer.length-1} ? ${this.name}_index - ${this.data.buffer.length-1} : ${this.name}_index + 1`:`${this.name}_index + 1`,"linear"===this.interp?(e+=`      ${this.name}_frac  = ${this.name}_phase - ${this.name}_index,\n      ${this.name}_base  = memory[ ${this.name}_dataIdx +  ${this.name}_index ],\n      ${this.name}_next  = ${t},`,"ignore"===this.boundmode?e+=`\n      ${this.name}_out   = ${this.name}_index >= ${this.data.buffer.length-1} || ${this.name}_index < 0 ? 0 : ${this.name}_base + ${this.name}_frac * ( memory[ ${this.name}_dataIdx + ${this.name}_next ] - ${this.name}_base )\n\n`:e+=`\n      ${this.name}_out   = ${this.name}_base + ${this.name}_frac * ( memory[ ${this.name}_dataIdx + ${this.name}_next ] - ${this.name}_base )\n\n`):e+=`      ${this.name}_out = memory[ ${this.name}_dataIdx + ${this.name}_index ]\n\n`,s.memo[this.name]=this.name+"_out",[this.name+"_out",e])},defaults:{channels:1,mode:"phase",interp:"linear",boundmode:"wrap"}};t.exports=((e,t=0,n)=>{let r=Object.create(i);const a=void 0===e.basename?s.lib.data(e):e;return Object.assign(r,{data:a,dataName:a.name,uid:s.getUID(),inputs:[t,a]},i.defaults,n),r.name=r.basename+r.uid,r})},{"./data.js":93,"./gen.js":107}],132:[function(e,t,n){"use strict";let s=e("./gen.js"),i=e("./accum.js"),r=e("./mul.js"),a="phasor",o=e("./div.js");const u={min:-1,max:1};t.exports=((e=1,t=0,n)=>{const l=Object.assign({},u,n),c=l.max-l.min,d=i("number"==typeof e?e*c/s.samplerate:o(r(e,c),s.samplerate),t,l);return d.name=a+s.getUID(),d})},{"./accum.js":77,"./div.js":98,"./gen.js":107,"./mul.js":125}],133:[function(e,t,n){"use strict";let s=e("./gen.js"),i=(e("./mul.js"),e("./wrap.js"),{basename:"poke",gen(){let e,t=s.getInputs(this);e=this.data.gen();let n=0===this.inputs[1]?`  memory[ ${e} ] = ${t[0]}\n`:`  memory[ ${e} + ${t[1]} ] = ${t[0]}\n`;if(void 0!==this.inline)return[this.inline,n];s.functionBody+=n}});t.exports=((e,t,n,r)=>{let a=Object.create(i),o={channels:1};return void 0!==r&&Object.assign(o,r),Object.assign(a,{data:e,dataName:e.name,dataLength:e.buffer.length,uid:s.getUID(),inputs:[t,n]},o),a.name=a.basename+a.uid,s.histories.set(a.name,a),a})},{"./gen.js":107,"./mul.js":125,"./wrap.js":152}],134:[function(e,t,n){"use strict";let s=e("./gen.js"),i={basename:"pow",gen(){let e,t=s.getInputs(this);const n="worklet"===s.mode,i=n?"":"gen.";return isNaN(t[0])||isNaN(t[1])?(s.closures.add({pow:n?"Math.pow":Math.pow}),e=`${i}pow( ${t[0]}, ${t[1]} )`):("string"==typeof t[0]&&"("===t[0][0]&&(t[0]=t[0].slice(1,-1)),"string"==typeof t[1]&&"("===t[1][0]&&(t[1]=t[1].slice(1,-1)),e=Math.pow(parseFloat(t[0]),parseFloat(t[1]))),e}};t.exports=((e,t)=>{let n=Object.create(i);return n.inputs=[e,t],n.id=s.getUID(),n.name=`${n.basename}{pow.id}`,n})},{"./gen.js":107}],135:[function(e,t,n){"use strict";let s=e("./gen.js");const i={basename:"process",gen(){let e,t=s.getInputs(this);return s.closures.add({[""+this.funcname]:this.func}),e=`  var ${this.name} = gen['${this.funcname}'](`,t.forEach((t,n,s)=>{e+=s[n],n<s.length-1&&(e+=",")}),e+=")\n",s.memo[this.name]=this.name,[this.name,e]}};t.exports=((...e)=>{const t={},n=s.getUID();return t.name="process"+n,t.func=new Function(...e),t.call=function(...e){const s=Object.create(i);return s.funcname=t.name,s.func=t.func,s.name="process_out_"+n,s.process=t,s.inputs=e,s},t})},{"./gen.js":107}],136:[function(e,t,n){"use strict";let s=e("./gen.js"),i=e("./history.js"),r=(e("./sub.js"),e("./add.js"),e("./mul.js"),e("./memo.js"),e("./delta.js"),e("./wrap.js"),{basename:"rate",gen(){let e,t=s.getInputs(this),n=(i(),i(),"gen."+this.name);return s.closures.add({[this.name]:this}),[n+".phase",e=" "+(e=` var ${this.name}_diff = ${t[0]} - ${n}.lastSample\n  if( ${this.name}_diff < -.5 ) ${this.name}_diff += 1\n  ${n}.phase += ${this.name}_diff * ${t[1]}\n  if( ${n}.phase > 1 ) ${n}.phase -= 1\n  ${n}.lastSample = ${t[0]}\n`)]}});t.exports=((e,t)=>{let n=Object.create(r);return Object.assign(n,{phase:0,lastSample:0,uid:s.getUID(),inputs:[e,t]}),n.name=`${n.basename}${n.uid}`,n})},{"./add.js":80,"./delta.js":97,"./gen.js":107,"./history.js":111,"./memo.js":119,"./mul.js":125,"./sub.js":144,"./wrap.js":152}],137:[function(e,t,n){"use strict";let s=e("./gen.js"),i={name:"round",gen(){let e,t=s.getInputs(this);const n="worklet"===s.mode,i=n?"":"gen.";return isNaN(t[0])?(s.closures.add({[this.name]:n?"Math.round":Math.round}),e=`${i}round( ${t[0]} )`):e=Math.round(parseFloat(t[0])),e}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t})},{"./gen.js":107}],138:[function(e,t,n){"use strict";let s=e("./gen.js"),i={basename:"sah",gen(){let e,t=s.getInputs(this);return s.requestMemory(this.memory),e=` var ${this.name}_control = memory[${this.memory.control.idx}],\n      ${this.name}_trigger = ${t[1]} > ${t[2]} ? 1 : 0\n\n  if( ${this.name}_trigger !== ${this.name}_control  ) {\n    if( ${this.name}_trigger === 1 ) \n      memory[${this.memory.value.idx}] = ${t[0]}\n    \n    memory[${this.memory.control.idx}] = ${this.name}_trigger\n  }\n`,s.memo[this.name]=`memory[${this.memory.value.idx}]`,[`memory[${this.memory.value.idx}]`," "+e]}};t.exports=((e,t,n=0,r)=>{let a=Object.create(i),o={init:0};return void 0!==r&&Object.assign(o,r),Object.assign(a,{lastSample:0,uid:s.getUID(),inputs:[e,t,n],memory:{control:{idx:null,length:1},value:{idx:null,length:1}}},o),a.name=`${a.basename}${a.uid}`,a})},{"./gen.js":107}],139:[function(e,t,n){"use strict";let s=e("./gen.js"),i={basename:"selector",gen(){let e,t=s.getInputs(this),n=0;switch(t.length){case 2:n=t[1];break;case 3:e=`  var ${this.name}_out = ${t[0]} === 1 ? ${t[1]} : ${t[2]}\n\n`,n=[this.name+"_out",e];break;default:e=` var ${this.name}_out = 0\n  switch( ${t[0]} + 1 ) {\n`;for(let n=1;n<t.length;n++)e+=`    case ${n}: ${this.name}_out = ${t[n]}; break;\n`;e+="  }\n\n",n=[this.name+"_out"," "+e]}return s.memo[this.name]=this.name+"_out",n}};t.exports=((...e)=>{let t=Object.create(i);return Object.assign(t,{uid:s.getUID(),inputs:e}),t.name=`${t.basename}${t.uid}`,t})},{"./gen.js":107}],140:[function(e,t,n){"use strict";let s=e("./gen.js"),i=e("./accum.js"),r=e("./counter.js"),a=e("./peek.js"),o=e("./history.js"),u=e("./data.js"),l="seq";t.exports=((e=11025,t=[0,1],n=1)=>{let c;if(Array.isArray(e)){const t=r(0,0,e.length),s=a(u(e),t,{mode:"simple"});c=r(n,0,s);const i=o();i.in(c.wrap),t.inputs[0]=i.out}else c=r(n,0,e);const d=i(c.wrap,0,{min:0,max:t.length}),p=a(u(t),d,{mode:"simple"});return p.name=l+s.getUID(),p.trigger=c.wrap,p})},{"./accum.js":77,"./counter.js":91,"./data.js":93,"./gen.js":107,"./history.js":111,"./peek.js":131}],141:[function(e,t,n){"use strict";let s=e("./gen.js"),i={name:"sign",gen(){let e,t=s.getInputs(this);const n="worklet"===s.mode,i=n?"":"gen.";return isNaN(t[0])?(s.closures.add({[this.name]:n?"Math.sign":Math.sign}),e=`${i}sign( ${t[0]} )`):e=Math.sign(parseFloat(t[0])),e}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t})},{"./gen.js":107}],142:[function(e,t,n){"use strict";let s=e("./gen.js"),i={basename:"sin",gen(){let e,t=s.getInputs(this);const n="worklet"===s.mode,i=n?"":"gen.";return isNaN(t[0])?(s.closures.add({sin:n?"Math.sin":Math.sin}),e=`${i}sin( ${t[0]} )`):e=Math.sin(parseFloat(t[0])),e}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t.id=s.getUID(),t.name=`${t.basename}{sin.id}`,t})},{"./gen.js":107}],143:[function(e,t,n){"use strict";e("./gen.js");let s=e("./history.js"),i=e("./sub.js"),r=e("./add.js"),a=(e("./mul.js"),e("./memo.js")),o=e("./gt.js"),u=e("./div.js"),l=e("./switch.js");t.exports=((e,t=1,n=1)=>{let c,d,p=s(0);return d=l(o(e,p.out),t,n),c=a(r(p.out,u(i(e,p.out),d))),p.in(c),c})},{"./add.js":80,"./div.js":98,"./gen.js":107,"./gt.js":108,"./history.js":111,"./memo.js":119,"./mul.js":125,"./sub.js":144,"./switch.js":145}],144:[function(e,t,n){"use strict";const s=e("./gen.js"),i={basename:"sub",gen(){let e=s.getInputs(this),t=0,n=!1,i=e[0],r=isNaN(i),a=!1,o=0;return this.inputs.forEach(e=>{isNaN(e)&&(a=!0)}),t="  var "+this.name+" = ",e.forEach((s,a)=>{if(0===a)return;let o=isNaN(s),u=a===e.length-1;r||o?(n=!0,t+=`${i} - ${s}`,u||(t+=" - ")):t+=i-=s}),t+="\n",o=[this.name,t],s.memo[this.name]=this.name,o}};t.exports=((...e)=>{let t=Object.create(i);return Object.assign(t,{id:s.getUID(),inputs:e}),t.name="sub"+t.id,t})},{"./gen.js":107}],145:[function(e,t,n){"use strict";let s=e("./gen.js"),i={basename:"switch",gen(){let e,t=s.getInputs(this);return t[1]===t[2]?t[1]:(e=`  var ${this.name}_out = ${t[0]} === 1 ? ${t[1]} : ${t[2]}\n`,s.memo[this.name]=`${this.name}_out`,[`${this.name}_out`,e])}};t.exports=((e,t=1,n=0)=>{let r=Object.create(i);return Object.assign(r,{uid:s.getUID(),inputs:[e,t,n]}),r.name=`${r.basename}${r.uid}`,r})},{"./gen.js":107}],146:[function(e,t,n){"use strict";let s=e("./gen.js"),i={basename:"t60",gen(){let e,t,n=s.getInputs(this);const i="worklet"===s.mode,r=i?"":"gen.";return isNaN(n[0])?(s.closures.add({exp:i?"Math.exp":Math.exp}),e=`  var ${this.name} = ${r}exp( -6.907755278921 / ${n[0]} )\n\n`,s.memo[this.name]=e,t=[this.name,e]):t=e=Math.exp(-6.907755278921/n[0]),t}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t.name=i.basename+s.getUID(),t})},{"./gen.js":107}],147:[function(e,t,n){"use strict";let s=e("./gen.js"),i={basename:"tan",gen(){let e,t=s.getInputs(this);const n="worklet"===s.mode,i=n?"":"gen.";return isNaN(t[0])?(s.closures.add({tan:n?"Math.tan":Math.tan}),e=`${i}tan( ${t[0]} )`):e=Math.tan(parseFloat(t[0])),e}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t.id=s.getUID(),t.name=`${t.basename}{tan.id}`,t})},{"./gen.js":107}],148:[function(e,t,n){"use strict";let s=e("./gen.js"),i={basename:"tanh",gen(){let e,t=s.getInputs(this);const n="worklet"===s.mode,i=n?"":"gen.";return isNaN(t[0])?(s.closures.add({tanh:n?"Math.tan":Math.tanh}),e=`${i}tanh( ${t[0]} )`):e=Math.tanh(parseFloat(t[0])),e}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t.id=s.getUID(),t.name=`${t.basename}{tanh.id}`,t})},{"./gen.js":107}],149:[function(e,t,n){"use strict";let s=e("./gen.js"),i=e("./lt.js"),r=e("./accum.js"),a=e("./div.js");t.exports=((e=440,t=.5)=>{let n=i(r(a(e,44100)),t);return n.name=`train${s.getUID()}`,n})},{"./accum.js":77,"./div.js":98,"./gen.js":107,"./lt.js":115}],150:[function(e,t,n){"use strict";const s=e("./external/audioworklet-polyfill.js"),i=e("./gen.js");e("./data.js");const r={ctx:null,buffers:{},isStereo:!1,clear(){void 0!==this.workletNode?this.workletNode.disconnect():this.callback=(()=>0),this.clear.callbacks.forEach(e=>e()),this.clear.callbacks.length=0,this.isStereo=!1,null!==i.graph&&i.free(i.graph)},createContext(e=2048){const t="undefined"==typeof AudioContext?webkitAudioContext:AudioContext;s(window,e);const n=()=>{if(void 0!==t){this.ctx=new t({latencyHint:.0125}),i.samplerate=this.ctx.sampleRate,document&&document.documentElement&&"ontouchstart"in document.documentElement?window.removeEventListener("touchstart",n):(window.removeEventListener("mousedown",n),window.removeEventListener("keydown",n));const e=r.ctx.createBufferSource();e.connect(r.ctx.destination),e.start()}};return document&&document.documentElement&&"ontouchstart"in document.documentElement?window.addEventListener("touchstart",n):(window.addEventListener("mousedown",n),window.addEventListener("keydown",n)),this},createScriptProcessor(){return this.node=this.ctx.createScriptProcessor(1024,0,2),this.clearFunction=function(){return 0},void 0===this.callback&&(this.callback=this.clearFunction),this.node.onaudioprocess=function(e){for(var t=e.outputBuffer,n=t.getChannelData(0),s=t.getChannelData(1),i=r.isStereo,a=0;a<n.length;a++){var o=r.callback();!1===i?n[a]=s[a]=o:(n[a]=o[0],s[a]=o[1])}},this.node.connect(this.ctx.destination),this},prettyPrintCallback:e=>e.toString().split("\n").slice(3,-2).map(e=>"      "+e).join("\n"),createParameterDescriptors(e){let t="";for(let n of e.params.values())t+=`{ name:'${n.name}', automationRate:'k-rate', defaultValue:${n.defaultValue}, minValue:${n.min}, maxValue:${n.max} },\n      `;return t},createParameterDereferences(e){let t=e.params.size>0?"\n      ":"";for(let n of e.params.values())t+=`const ${n.name} = parameters.${n.name}[0]\n      `;return t},createParameterArguments(e){let t="";for(let n of e.params.values())t+=n.name+"[i],";return t=t.slice(0,-1)},createInputDereferences(e){let t=e.inputs.size>0?"\n":"";for(let n of e.inputs.values())t+=`const ${n.name} = inputs[ ${n.inputNumber} ][ ${n.channelNumber} ]\n      `;return t},createInputArguments(e){let t="";for(let n of e.inputs.values())t+=n.name+"[i],";return t=t.slice(0,-1)},createFunctionDereferences(e){let t=e.members.size>0?"\n":"",n={};for(let s of e.members.values()){const e=Object.keys(s)[0],i=s[e];void 0===n[e]&&(n[e]=!0,t+=`      const ${e} = ${i}\n`)}return t},createWorkletProcessor(e,t,n,s=441e3){const r=i.createCallback(e,s,n),a=r.inputs,o=this.createParameterDescriptors(r),u=this.createParameterDereferences(r),l=(this.createParameterArguments(r),this.createInputDereferences(r)),c=(this.createInputArguments(r),this.createFunctionDereferences(r)),d=!1===r.isStereo?"left[ i ] = memory[0]":"left[ i ] = memory[0];\n\t\tright[ i ] = memory[1]\n",p=`\nclass ${t}Processor extends AudioWorkletProcessor {\n\n  static get parameterDescriptors() {\n    const params = [\n      ${o}      \n    ]\n    return params\n  }\n \n  constructor( options ) {\n    super( options )\n    this.port.onmessage = this.handleMessage.bind( this )\n    this.initialized = false\n  }\n\n  handleMessage( event ) {\n    if( event.data.key === 'init' ) {\n      this.memory = event.data.memory\n      this.initialized = true\n    }else if( event.data.key === 'set' ) {\n      this.memory[ event.data.idx ] = event.data.value\n    }else if( event.data.key === 'get' ) {\n      this.port.postMessage({ key:'return', idx:event.data.idx, value:this.memory[event.data.idx] })     \n    }\n  }\n\n  process( inputs, outputs, parameters ) {\n    if( this.initialized === true ) {\n      const output = outputs[0]\n      const left   = output[ 0 ]\n      const right  = output[ 1 ]\n      const len    = left.length\n      const memory = this.memory ${u}${l}${c}\n\n      for( let i = 0; i < len; ++i ) {\n        ${this.prettyPrintCallback(r)}\n        ${d}\n      }\n    }\n    return true\n  }\n}\n    \nregisterProcessor( '${t}', ${t}Processor)`;return!0===n&&console.log(p),[window.URL.createObjectURL(new Blob([p],{type:"text/javascript"})),p,a,r.params,r.isStereo]},registeredForNodeAssignment:[],register(e){-1===this.registeredForNodeAssignment.indexOf(e)&&this.registeredForNodeAssignment.push(e)},playWorklet(e,t,n=!1,s=2646e3){r.clear();const[a,o,u,l,c]=r.createWorkletProcessor(e,t,n,s);return new Promise((e,n)=>{r.ctx.audioWorklet.addModule(a).then(()=>{const n=new AudioWorkletNode(r.ctx,t,{outputChannelCount:[c?2:1]});n.callbacks={},n.onmessage=function(e){"return"===e.data.message&&(n.callbacks[e.data.idx](e.data.value),delete n.callbacks[e.data.idx])},n.getMemoryValue=function(e,t){this.workletCallbacks[e]=t,this.workletNode.port.postMessage({key:"get",idx:e})},n.port.postMessage({key:"init",memory:i.memory.heap}),r.workletNode=n,r.registeredForNodeAssignment.forEach(e=>e.node=n),r.registeredForNodeAssignment.length=0;for(let e of u.values()){const t=Object.keys(e)[0],s=n.parameters.get(t);Object.defineProperty(n,t,{set(e){s.value=e},get:()=>s.value})}for(let e of l.values()){const t=e.name,s=n.parameters.get(t);e.waapi=s,s.value=e.defaultValue,Object.defineProperty(n,t,{set(e){s.value=e},get:()=>s.value})}r.console&&r.console.setValue(o),n.connect(r.ctx.destination),e(n)})})},playGraph(e,t,n=441e3,s=Float32Array){return r.clear(),void 0===t&&(t=!1),this.isStereo=Array.isArray(e),r.callback=i.createCallback(e,n,t,!1,s),r.console&&r.console.setValue(r.callback.toString()),r.callback},loadSample(e,t){const n=void 0!==r.buffers[e];let s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="arraybuffer";let i=new Promise((i,a)=>{n?setTimeout(()=>i(r.buffers[e]),0):s.onload=function(){var n=s.response;r.ctx.decodeAudioData(n,n=>{t.buffer=n.getChannelData(0),r.buffers[e]=t.buffer,i(t.buffer)})}});return n||s.send(),i}};r.clear.callbacks=[],t.exports=r},{"./data.js":93,"./external/audioworklet-polyfill.js":102,"./gen.js":107}],151:[function(e,t,n){"use strict";const s=t.exports={bartlett:(e,t)=>2/(e-1)*((e-1)/2-Math.abs(t-(e-1)/2)),bartlettHann:(e,t)=>.62-.48*Math.abs(t/(e-1)-.5)-.38*Math.cos(2*Math.PI*t/(e-1)),blackman(e,t,n){let s=n/2;return(1-n)/2-.5*Math.cos(2*Math.PI*t/(e-1))+s*Math.cos(4*Math.PI*t/(e-1))},cosine:(e,t)=>Math.cos(Math.PI*t/(e-1)-Math.PI/2),gauss:(e,t,n)=>Math.pow(Math.E,-.5*Math.pow((t-(e-1)/2)/(n*(e-1)/2),2)),hamming:(e,t)=>.54-.46*Math.cos(2*Math.PI*t/(e-1)),hann:(e,t)=>.5*(1-Math.cos(2*Math.PI*t/(e-1))),lanczos(e,t){let n=2*t/(e-1)-1;return Math.sin(Math.PI*n)/(Math.PI*n)},rectangular:(e,t)=>1,triangular:(e,t)=>2/e*(e/2-Math.abs(t-(e-1)/2)),welch(e,t,n,s=0){const i=0===s?t:(t+Math.floor(s*e))%e,r=(e-1)/2;return 1-Math.pow((i-r)/r,2)},inversewelch(e,t,n,s=0){let i=0===s?t:(t+Math.floor(s*e))%e;const r=(e-1)/2;return Math.pow((i-r)/r,2)},parabola:(e,t)=>t<=e/2?s.inversewelch(e/2,t)-1:1-s.inversewelch(e/2,t-e/2),exponential:(e,t,n)=>Math.pow(t/e,n),linear:(e,t)=>t/e}},{}],152:[function(e,t,n){"use strict";let s=e("./gen.js"),i=(e("./floor.js"),e("./sub.js"),e("./memo.js"),{basename:"wrap",gen(){let e,t,n=s.getInputs(this),i=(n[0],n[1]),r=n[2];return t=0===this.min?r:isNaN(r)||isNaN(i)?`${r} - ${i}`:r-i,e=` var ${this.name} = ${n[0]}\n  if( ${this.name} < ${this.min} ) ${this.name} += ${t}\n  else if( ${this.name} > ${this.max} ) ${this.name} -= ${t}\n\n`,[this.name," "+e]}});t.exports=((e,t=0,n=1)=>{let r=Object.create(i);return Object.assign(r,{min:t,max:n,uid:s.getUID(),inputs:[e,t,n]}),r.name=`${r.basename}${r.uid}`,r})},{"./floor.js":104,"./gen.js":107,"./memo.js":119,"./sub.js":144}],153:[function(e,t,n){"use strict";var s={create:function(){var e=arguments.length<=0||void 0===arguments[0]?4096:arguments[0],t=arguments.length<=1||void 0===arguments[1]?Float32Array:arguments[1],n=Object.create(this);return Object.assign(n,{heap:new t(e),list:{},freeList:{}}),n},alloc:function(e){var t=-1;if(e>this.heap.length)throw Error("Allocation request is larger than heap size of "+this.heap.length);for(var n in this.freeList){var s=this.freeList[n];if(s>=e){if(t=n,this.list[t]=e,s!==e){var i=t+e,r=void 0;for(var a in this.list)a>i&&(r=a-i,this.freeList[i]=r)}break}}if(-1!==t&&delete this.freeList[t],-1===t){var o=Object.keys(this.list),u=void 0;t=o.length?(u=parseInt(o[o.length-1]))+this.list[u]:0,this.list[t]=e}if(t+e>=this.heap.length)throw Error("No available blocks remain sufficient for allocation request.");return t},free:function(e){if("number"!=typeof this.list[e])throw Error("Calling free() on non-existing block.");this.list[e]=0;var t=0;for(var n in this.list)if(n>e){t=n-e;break}this.freeList[e]=t}};t.exports=s},{}],154:[function(e,t,n){var s,i,r=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function u(e){if(s===setTimeout)return setTimeout(e,0);if((s===a||!s)&&setTimeout)return s=setTimeout,setTimeout(e,0);try{return s(e,0)}catch(t){try{return s.call(null,e,0)}catch(t){return s.call(this,e,0)}}}!function(){try{s="function"==typeof setTimeout?setTimeout:a}catch(e){s=a}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(e){i=o}}();var l,c=[],d=!1,p=-1;function m(){d&&l&&(d=!1,l.length?c=l.concat(c):p=-1,c.length&&h())}function h(){if(!d){var e=u(m);d=!0;for(var t=c.length;t;){for(l=c,c=[];++p<t;)l&&l[p].run();p=-1,t=c.length}l=null,d=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||d||u(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],155:[function(e,t,n){var s=e("./lib/alea"),i=e("./lib/xor128"),r=e("./lib/xorwow"),a=e("./lib/xorshift7"),o=e("./lib/xor4096"),u=e("./lib/tychei"),l=e("./seedrandom");l.alea=s,l.xor128=i,l.xorwow=r,l.xorshift7=a,l.xor4096=o,l.tychei=u,t.exports=l},{"./lib/alea":156,"./lib/tychei":157,"./lib/xor128":158,"./lib/xor4096":159,"./lib/xorshift7":160,"./lib/xorwow":161,"./seedrandom":162}],156:[function(e,t,n){!function(e,t,n){function s(e){var t,n=this,s=(t=4022871197,function(e){e=String(e);for(var n=0;n<e.length;n++){var s=.02519603282416938*(t+=e.charCodeAt(n));s-=t=s>>>0,t=(s*=t)>>>0,t+=4294967296*(s-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=s(" "),n.s1=s(" "),n.s2=s(" "),n.s0-=s(e),n.s0<0&&(n.s0+=1),n.s1-=s(e),n.s1<0&&(n.s1+=1),n.s2-=s(e),n.s2<0&&(n.s2+=1),s=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function r(e,t){var n=new s(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+1.1102230246251565e-16*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=r:n&&n.amd?n(function(){return r}):this.alea=r}(0,"object"==typeof t&&t,"function"==typeof define&&define)},{}],157:[function(e,t,n){!function(e,t,n){function s(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,s=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-s|0,s=s<<24^s>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-s|0,t.d=s<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var s=0;s<n.length+20;s++)t.b^=0|n.charCodeAt(s),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function r(e,t){var n=new s(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=r:n&&n.amd?n(function(){return r}):this.tychei=r}(0,"object"==typeof t&&t,"function"==typeof define&&define)},{}],158:[function(e,t,n){!function(e,t,n){function s(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var s=0;s<n.length+64;s++)t.x^=0|n.charCodeAt(s),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function r(e,t){var n=new s(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=r:n&&n.amd?n(function(){return r}):this.xor128=r}(0,"object"==typeof t&&t,"function"==typeof define&&define)},{}],159:[function(e,t,n){!function(e,t,n){function s(e){var t=this;t.next=function(){var e,n,s=t.w,i=t.X,r=t.i;return t.w=s=s+1640531527|0,n=i[r+34&127],e=i[r=r+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=i[r]=n^e,t.i=r,n+(s^s>>>16)|0},function(e,t){var n,s,i,r,a,o=[],u=128;for(t===(0|t)?(s=t,t=null):(t+="\0",s=0,u=Math.max(u,t.length)),i=0,r=-32;r<u;++r)t&&(s^=t.charCodeAt((r+32)%t.length)),0===r&&(a=s),s^=s<<10,s^=s>>>15,s^=s<<4,s^=s>>>13,r>=0&&(a=a+1640531527|0,i=0==(n=o[127&r]^=s+a)?i+1:0);for(i>=128&&(o[127&(t&&t.length||0)]=-1),i=127,r=512;r>0;--r)s=o[i+34&127],n=o[i=i+1&127],s^=s<<13,n^=n<<17,s^=s>>>15,n^=n>>>12,o[i]=s^n;e.w=a,e.X=o,e.i=i}(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function r(e,t){null==e&&(e=+new Date);var n=new s(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&i(r,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=r:n&&n.amd?n(function(){return r}):this.xor4096=r}(0,"object"==typeof t&&t,"function"==typeof define&&define)},{}],160:[function(e,t,n){!function(e,t,n){function s(e){var t=this;t.next=function(){var e,n,s=t.x,i=t.i;return e=s[i],n=(e^=e>>>7)^e<<24,n^=(e=s[i+1&7])^e>>>10,n^=(e=s[i+3&7])^e>>>3,n^=(e=s[i+4&7])^e<<7,e=s[i+7&7],n^=(e^=e<<13)^e<<9,s[i]=n,t.i=i+1&7,n},function(e,t){var n,s=[];if(t===(0|t))s[0]=t;else for(t=""+t,n=0;n<t.length;++n)s[7&n]=s[7&n]<<15^t.charCodeAt(n)+s[n+1&7]<<13;for(;s.length<8;)s.push(0);for(n=0;n<8&&0===s[n];++n);for(8==n?s[7]=-1:s[n],e.x=s,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function r(e,t){null==e&&(e=+new Date);var n=new s(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&i(r,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=r:n&&n.amd?n(function(){return r}):this.xorshift7=r}(0,"object"==typeof t&&t,"function"==typeof define&&define)},{}],161:[function(e,t,n){!function(e,t,n){function s(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var s=0;s<n.length+64;s++)t.x^=0|n.charCodeAt(s),s==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function r(e,t){var n=new s(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=r:n&&n.amd?n(function(){return r}):this.xorwow=r}(0,"object"==typeof t&&t,"function"==typeof define&&define)},{}],162:[function(e,t,n){!function(n,s,i){var r,a=256,o=6,u="random",l=i.pow(a,o),c=i.pow(2,52),d=2*c,p=a-1;function m(e,t,p){var m=[],b=g(function e(t,n){var s,i=[],r=typeof t;if(n&&"object"==r)for(s in t)try{i.push(e(t[s],n-1))}catch(e){}return i.length?i:"string"==r?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(s)]:null==e?function(){try{var e;return r&&(e=r.randomBytes)?e=e(a):(e=new Uint8Array(a),(n.crypto||n.msCrypto).getRandomValues(e)),y(e)}catch(e){var t=n.navigator,i=t&&t.plugins;return[+new Date,n,i,n.screen,y(s)]}}():e,3),m),j=new h(m),v=function(){for(var e=j.g(o),t=l,n=0;e<c;)e=(e+n)*a,t*=a,n=j.g(1);for(;e>=d;)e/=2,t/=2,n>>>=1;return(e+n)/t};return v.int32=function(){return 0|j.g(4)},v.quick=function(){return j.g(4)/4294967296},v.double=v,g(y(j.S),s),(t.pass||p||function(e,t,n,s){return s&&(s.S&&f(s,j),e.state=function(){return f(j,{})}),n?(i[u]=e,t):e})(v,b,"global"in t?t.global:this==i,t.state)}function h(e){var t,n=e.length,s=this,i=0,r=s.i=s.j=0,o=s.S=[];for(n||(e=[n++]);i<a;)o[i]=i++;for(i=0;i<a;i++)o[i]=o[r=p&r+e[i%n]+(t=o[i])],o[r]=t;(s.g=function(e){for(var t,n=0,i=s.i,r=s.j,o=s.S;e--;)t=o[i=p&i+1],n=n*a+o[p&(o[i]=o[r=p&r+t])+(o[r]=t)];return s.i=i,s.j=r,n})(a)}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){for(var n,s=e+"",i=0;i<s.length;)t[p&i]=p&(n^=19*t[p&i])+s.charCodeAt(i++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(g(i.random(),s),"object"==typeof t&&t.exports){t.exports=m;try{r=e("crypto")}catch(e){}}else"function"==typeof define&&define.amd?define(function(){return m}):i["seed"+u]=m}("undefined"!=typeof self?self:this,[],Math)},{crypto:73}],163:[function(e,t,n){"use strict";var s=Math.floor(1099511627776*Math.random()).toString(16),i=new RegExp('"@__(F|R|D|M|S)-'+s+'-(\\d+)__@"',"g"),r=/\{\s*\[native code\]\s*\}/g,a=/function.*?\(/,o=/.*?=>.*?/,u=/[<>\/\u2028\u2029]/g,l=["*","async"],c={"<":"\\u003C",">":"\\u003E","/":"\\u002F","\u2028":"\\u2028","\u2029":"\\u2029"};function d(e){return c[e]}t.exports=function e(t,n){n||(n={}),"number"!=typeof n&&"string"!=typeof n||(n={space:n});var c,p=[],m=[],h=[],f=[],g=[];return"string"!=typeof(c=n.isJSON&&!n.space?JSON.stringify(t):JSON.stringify(t,n.isJSON?null:function(e,t){if(!t)return t;var n=this[e],i=typeof n;if("object"===i){if(n instanceof RegExp)return"@__R-"+s+"-"+(m.push(n)-1)+"__@";if(n instanceof Date)return"@__D-"+s+"-"+(h.push(n)-1)+"__@";if(n instanceof Map)return"@__M-"+s+"-"+(f.push(n)-1)+"__@";if(n instanceof Set)return"@__S-"+s+"-"+(g.push(n)-1)+"__@"}return"function"===i?"@__F-"+s+"-"+(p.push(n)-1)+"__@":t},n.space))?String(c):(!0!==n.unsafe&&(c=c.replace(u,d)),0===p.length&&0===m.length&&0===h.length&&0===f.length&&0===g.length?c:c.replace(i,function(t,s,i){return"D"===s?'new Date("'+h[i].toISOString()+'")':"R"===s?m[i].toString():"M"===s?"new Map("+e(Array.from(f[i].entries()),n)+")":"S"===s?"new Set("+e(Array.from(g[i].values()),n)+")":function(e){var t=e.toString();if(r.test(t))throw new TypeError("Serializing native function: "+e.name);if(a.test(t))return t;if(o.test(t))return t;var n=t.indexOf("("),s=t.substr(0,n).trim().split(" ").filter(function(e){return e.length>0});return s.filter(function(e){return-1===l.indexOf(e)}).length>0?(s.indexOf("async")>-1?"async ":"")+"function"+(s.join("").indexOf("*")>-1?"*":"")+t.substr(n):t}(p[i])}))}},{}],164:[function(e,t,n){"use strict";function s(e,t,n,i){this.message=e,this.expected=t,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,s)}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(s,Error),s.buildMessage=function(e,t){var n={literal:function(e){return'"'+i(e.text)+'"'},class:function(e){var t,n="";for(t=0;t<e.parts.length;t++)n+=e.parts[t]instanceof Array?r(e.parts[t][0])+"-"+r(e.parts[t][1]):r(e.parts[t]);return"["+(e.inverted?"^":"")+n+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function s(e){return e.charCodeAt(0).toString(16).toUpperCase()}function i(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+s(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+s(e)})}function r(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+s(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+s(e)})}return"Expected "+function(e){var t,s,i,r=new Array(e.length);for(t=0;t<e.length;t++)r[t]=(i=e[t],n[i.type](i));if(r.sort(),r.length>0){for(t=1,s=1;t<r.length;t++)r[t-1]!==r[t]&&(r[s]=r[t],s++);r.length=s}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(e)+" but "+function(e){return e?'"'+i(e)+'"':"end of input"}(t)+" found."},t.exports={SyntaxError:s,parse:function(e,t){t=void 0!==t?t:{};var n,i={},r={pattern:Pe},a=Pe,o=function(e){let n=e;return!0===t.enclose&&"group"!==e.type&&(n={type:"group",values:[e]}),n},u=function(e,t){t.unshift(e);const n=t;let s;return void 0===n.type?s={values:Array.isArray(n[0])?n[0]:n,type:"group"}:(s=n).type="group",tt(s,_e()),s},l=$e("group"),c="[",d=we("[",!1),p="]",m=we("]",!1),h=function(e){return tt({values:e,type:"group"},_e())},f=$e("term"),g=function(e){return e},y="(",b=we("(",!1),j=",",v=we(",",!1),x=")",_=we(")",!1),w=function(e,t,n,s){const i={type:"bjorklund",pulses:t,slots:n,value:e,rotation:s.length>0?s[0]:null};return tt(i,_e())},k=function(e){return e},$="?",O=we("?",!1),S=function(e){return{type:"degrade",value:e}},M="*",N=we("*",!1),P=function(e,n){const s={type:"speed",rate:n,value:e};return!0===t.addLocations&&(s.location={start:e.location.start,end:n.location.end}),s},I="/",q=we("/",!1),A=function(e,t){const n={type:"group",values:[e]},s={type:"onestep",values:[n]};for(let e=0;e<t.value-1;e++)n.values.push({type:"rest"});return tt(s,_e()),s},C="{",D=we("{",!1),G="}",L=we("}",!1),U=function(e,t){const n={left:{type:"group",values:e},right:{type:"group",values:t},type:"polymeter"};return tt(n.left,_e()),tt(n.right,_e()),tt(n,_e()),n},E="~",R=we("~",!1),z=function(){return{type:"rest"}},F=function(e,t){const n={type:"group",values:e.map(e=>e[0])};return n.values.push(t),tt(n,_e())},T=function(e){return e},W=function(e,t){const n=e.map(e=>e[0]);return n.push(t),tt({type:"layers",values:n},_e())},V="<",B=we("<",!1),Q=">",H=we(">",!1),J=function(e,t){const n={type:"onestep",values:[e]};return null!==t&&n.values.push(t),tt(n,_e())},Z=$e("word"),X=/^[letter number]/,K=ke(["l","e","t","t","e","r"," ","n","u","m","b","e","r"],!1,!1),Y=function(e){return tt({type:typeof e,value:e},_e())},ee=function(e){return tt({type:"string",value:xe().trim()},_e())},te=/^[^ [\] {} () \t\n\r '*' '\/' '.' '~' '?' ',' '>' '<' ]/,ne=ke([" ","[","]"," ","{","}"," ","(",")"," ","\t","\n","\r"," ","'","*","'"," ","'","/","'"," ","'",".","'"," ","'","~","'"," ","'","?","'"," ","'",",","'"," ","'",">","'"," ","'","<","'"," "],!0,!1),se=function(e){return tt({type:"string",value:e},_e())},ie=".",re=we(".",!1),ae="-",oe=we("-",!1),ue=/^[0-9]/,le=ke([["0","9"]],!1,!1),ce=function(){return tt({type:"number",value:+xe().trim()},_e())},de=$e("whitespace"),pe=/^[ \t\n\r ]/,me=ke([" ","\t","\n","\r"," "],!1,!1),he=0,fe=0,ge=[{line:1,column:1}],ye=0,be=[],je=0,ve={};if("startRule"in t){if(!(t.startRule in r))throw new Error("Can't start parsing from rule \""+t.startRule+'".');a=r[t.startRule]}function xe(){return e.substring(fe,he)}function _e(){return Se(fe,he)}function we(e,t){return{type:"literal",text:e,ignoreCase:t}}function ke(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function $e(e){return{type:"other",description:e}}function Oe(t){var n,s=ge[t];if(s)return s;for(n=t-1;!ge[n];)n--;for(s={line:(s=ge[n]).line,column:s.column};n<t;)10===e.charCodeAt(n)?(s.line++,s.column=1):s.column++,n++;return ge[t]=s,s}function Se(e,t){var n=Oe(e),s=Oe(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:s.line,column:s.column}}}function Me(e){he<ye||(he>ye&&(ye=he,be=[]),be.push(e))}function Ne(e,t,n){return new s(s.buildMessage(e,t),e,t,n)}function Pe(){var e,t,n=28*he+0,s=ve[n];return s?(he=s.nextPos,s.result):(e=he,(t=function(){var e,t,n,s=28*he+14,r=ve[s];if(r)return he=r.nextPos,r.result;if(e=he,t=[],(n=Fe())!==i)for(;n!==i;)t.push(n),n=Fe();else t=i;return t!==i&&(n=Te())!==i?(fe=e,t=F(t,n),e=t):(he=e,e=i),ve[s]={nextPos:he,result:e},e}())===i&&(t=Ie())===i&&(t=Ae()),t!==i&&(fe=e,t=o(t)),e=t,ve[n]={nextPos:he,result:e},e)}function Ie(){var e,t,n,s,r=28*he+1,a=ve[r];if(a)return he=a.nextPos,a.result;if(e=he,Ke()!==i)if((t=Ae())!==i)if(Ke()!==i){if(n=[],(s=Ae())!==i)for(;s!==i;)n.push(s),s=Ae();else n=i;n!==i&&(s=Ke())!==i?(fe=e,e=u(t,n)):(he=e,e=i)}else he=e,e=i;else he=e,e=i;else he=e,e=i;return ve[r]={nextPos:he,result:e},e}function qe(){var t,n,s,r,a,o=28*he+2,u=ve[o];if(u)return he=u.nextPos,u.result;if(je++,t=he,Ke()!==i)if(91===e.charCodeAt(he)?(n=c,he++):(n=i,0===je&&Me(d)),n!==i)if(Ke()!==i){if(s=[],(r=Ae())!==i)for(;r!==i;)s.push(r),r=Ae();else s=i;s!==i&&(r=Ke())!==i?(93===e.charCodeAt(he)?(a=p,he++):(a=i,0===je&&Me(m)),a!==i&&Ke()!==i?(fe=t,t=h(s)):(he=t,t=i)):(he=t,t=i)}else he=t,t=i;else he=t,t=i;else he=t,t=i;return je--,t===i&&0===je&&Me(l),ve[o]={nextPos:he,result:t},t}function Ae(){var e,t,n=28*he+3,s=ve[n];return s?(he=s.nextPos,s.result):(je++,e=he,(t=Ce())===i&&(t=Ge())===i&&(t=Ue())===i&&(t=De())===i&&(t=We())===i&&(t=Xe())===i&&(t=Je())===i&&(t=Re())===i&&(t=qe())===i&&(t=Ze())===i&&(t=ze())===i&&(t=Be()),t!==i&&Ke()!==i?(fe=e,e=t=g(t)):(he=e,e=i),je--,e===i&&(t=i,0===je&&Me(f)),ve[n]={nextPos:he,result:e},e)}function Ce(){var t,n,s,r,a,o,u,l,c,d,p,m=28*he+4,h=ve[m];if(h)return he=h.nextPos,h.result;if(t=he,Ke()!==i)if((n=function(){var e,t,n=28*he+5,s=ve[n];return s?(he=s.nextPos,s.result):(e=he,(t=qe())===i&&(t=Xe())===i&&(t=He())===i&&(t=Je())===i&&(t=Ze())===i&&(t=ze())===i&&(t=Be()),t!==i&&Ke()!==i?(fe=e,t=k(t),e=t):(he=e,e=i),ve[n]={nextPos:he,result:e},e)}())!==i)if(40===e.charCodeAt(he)?(s=y,he++):(s=i,0===je&&Me(b)),s!==i)if(Ke()!==i)if((r=Ae())!==i)if(44===e.charCodeAt(he)?(a=j,he++):(a=i,0===je&&Me(v)),a!==i)if(Ke()!==i)if((o=Ae())!==i)if(Ke()!==i)if(41===e.charCodeAt(he)?(u=x,he++):(u=i,0===je&&Me(_)),u===i&&(u=null),u!==i)if(44===e.charCodeAt(he)?(l=j,he++):(l=i,0===je&&Me(v)),l===i&&(l=null),l!==i)if(Ke()!==i){for(c=[],d=Ae();d!==i;)c.push(d),d=Ae();c!==i&&(d=Ke())!==i?(41===e.charCodeAt(he)?(p=x,he++):(p=i,0===je&&Me(_)),p===i&&(p=null),p!==i?(fe=t,t=w(n,r,o,c)):(he=t,t=i)):(he=t,t=i)}else he=t,t=i;else he=t,t=i;else he=t,t=i;else he=t,t=i;else he=t,t=i;else he=t,t=i;else he=t,t=i;else he=t,t=i;else he=t,t=i;else he=t,t=i;else he=t,t=i;else he=t,t=i;return ve[m]={nextPos:he,result:t},t}function De(){var t,n,s,r=28*he+6,a=ve[r];return a?(he=a.nextPos,a.result):(t=he,(n=function(){var e,t=28*he+7,n=ve[t];return n?(he=n.nextPos,n.result):((e=Xe())===i&&(e=Ge())===i&&(e=Ue())===i&&(e=Ce())===i&&(e=qe())===i&&(e=Ze())===i&&(e=Be()),ve[t]={nextPos:he,result:e},e)}())!==i?(63===e.charCodeAt(he)?(s=$,he++):(s=i,0===je&&Me(O)),s!==i?(fe=t,t=n=S(n)):(he=t,t=i)):(he=t,t=i),ve[r]={nextPos:he,result:t},t)}function Ge(){var t,n,s,r,a=28*he+8,o=ve[a];return o?(he=o.nextPos,o.result):(t=he,(n=Le())!==i&&Ke()!==i?(42===e.charCodeAt(he)?(s=M,he++):(s=i,0===je&&Me(N)),s!==i&&Ke()!==i&&(r=Le())!==i&&Ke()!==i?(fe=t,t=n=P(n,r)):(he=t,t=i)):(he=t,t=i),ve[a]={nextPos:he,result:t},t)}function Le(){var e,t,n=28*he+9,s=ve[n];return s?(he=s.nextPos,s.result):(e=he,(t=Ce())===i&&(t=Re())===i&&(t=Xe())===i&&(t=We())===i&&(t=Je())===i&&(t=qe())===i&&(t=Ze())===i&&(t=ze())===i&&(t=Be()),t!==i&&Ke()!==i?(fe=e,e=t=k(t)):(he=e,e=i),ve[n]={nextPos:he,result:e},e)}function Ue(){var t,n,s,r,a=28*he+10,o=ve[a];return o?(he=o.nextPos,o.result):(t=he,(n=Ee())!==i&&Ke()!==i?(47===e.charCodeAt(he)?(s=I,he++):(s=i,0===je&&Me(q)),s!==i&&Ke()!==i&&(r=Ee())!==i&&Ke()!==i?(fe=t,t=n=A(n,r)):(he=t,t=i)):(he=t,t=i),ve[a]={nextPos:he,result:t},t)}function Ee(){var e,t,n=28*he+11,s=ve[n];return s?(he=s.nextPos,s.result):(e=he,(t=Ce())===i&&(t=Re())===i&&(t=Xe())===i&&(t=We())===i&&(t=Je())===i&&(t=qe())===i&&(t=Ze())===i&&(t=ze())===i&&(t=Be()),t!==i&&Ke()!==i?(fe=e,e=t=k(t)):(he=e,e=i),ve[n]={nextPos:he,result:e},e)}function Re(){var t,n,s,r,a,o,u,l=28*he+12,c=ve[l];if(c)return he=c.nextPos,c.result;if(t=he,Ke()!==i)if(123===e.charCodeAt(he)?(n=C,he++):(n=i,0===je&&Me(D)),n!==i)if(Ke()!==i){if(s=[],(r=Ae())!==i)for(;r!==i;)s.push(r),r=Ae();else s=i;if(s!==i)if(44===e.charCodeAt(he)?(r=j,he++):(r=i,0===je&&Me(v)),r!==i)if(Ke()!==i){if(a=[],(o=Ae())!==i)for(;o!==i;)a.push(o),o=Ae();else a=i;a!==i&&(o=Ke())!==i?(125===e.charCodeAt(he)?(u=G,he++):(u=i,0===je&&Me(L)),u!==i&&Ke()!==i?(fe=t,t=U(s,a)):(he=t,t=i)):(he=t,t=i)}else he=t,t=i;else he=t,t=i;else he=t,t=i}else he=t,t=i;else he=t,t=i;else he=t,t=i;return ve[l]={nextPos:he,result:t},t}function ze(){var t,n,s=28*he+13,r=ve[s];return r?(he=r.nextPos,r.result):(t=he,126===e.charCodeAt(he)?(n=E,he++):(n=i,0===je&&Me(R)),n!==i&&(fe=t,n=z()),t=n,ve[s]={nextPos:he,result:t},t)}function Fe(){var t,n,s,r=28*he+15,a=ve[r];if(a)return he=a.nextPos,a.result;if(t=he,n=[],(s=Te())!==i)for(;s!==i;)n.push(s),s=Te();else n=i;return n!==i&&(s=function(){var t,n=28*he+24,s=ve[n];return s?(he=s.nextPos,s.result):(46===e.charCodeAt(he)?(t=ie,he++):(t=i,0===je&&Me(re)),ve[n]={nextPos:he,result:t},t)}())!==i&&Ke()!==i?(fe=t,t=n=T(n)):(he=t,t=i),ve[r]={nextPos:he,result:t},t}function Te(){var e,t=28*he+16,n=ve[t];return n?(he=n.nextPos,n.result):((e=Ie())===i&&(e=De())===i&&(e=Re())===i&&(e=ze())===i&&(e=Ge())===i&&(e=Ue())===i&&(e=Ce())===i&&(e=Xe())===i&&(e=Ze())===i&&(e=Je())===i&&(e=He())===i&&(e=Be()),ve[t]={nextPos:he,result:e},e)}function We(){var t,n,s,r,a,o,u,l,h=28*he+17,f=ve[h];if(f)return he=f.nextPos,f.result;if(t=he,Ke()!==i)if(91===e.charCodeAt(he)?(n=c,he++):(n=i,0===je&&Me(d)),n!==i)if(Ke()!==i){if(s=[],r=he,(a=Ve())!==i&&(o=Ke())!==i?(44===e.charCodeAt(he)?(u=j,he++):(u=i,0===je&&Me(v)),u!==i&&(l=Ke())!==i?r=a=[a,o,u,l]:(he=r,r=i)):(he=r,r=i),r!==i)for(;r!==i;)s.push(r),r=he,(a=Ve())!==i&&(o=Ke())!==i?(44===e.charCodeAt(he)?(u=j,he++):(u=i,0===je&&Me(v)),u!==i&&(l=Ke())!==i?r=a=[a,o,u,l]:(he=r,r=i)):(he=r,r=i);else s=i;s!==i&&(r=Ve())!==i&&(a=Ke())!==i?(93===e.charCodeAt(he)?(o=p,he++):(o=i,0===je&&Me(m)),o!==i&&(u=Ke())!==i?(fe=t,t=W(s,r)):(he=t,t=i)):(he=t,t=i)}else he=t,t=i;else he=t,t=i;else he=t,t=i;return ve[h]={nextPos:he,result:t},t}function Ve(){var e,t,n=28*he+18,s=ve[n];return s?(he=s.nextPos,s.result):(e=he,(t=Ge())===i&&(t=Ue())===i&&(t=Ie())===i&&(t=Xe())===i&&(t=Je())===i&&(t=Ce())===i&&(t=Re())===i&&(t=qe())===i&&(t=Ze())===i&&(t=ze())===i&&(t=Be()),t!==i&&Ke()!==i?(fe=e,e=t=k(t)):(he=e,e=i),ve[n]={nextPos:he,result:e},e)}function Be(){var t,n,s,r,a,o,u=28*he+19,l=ve[u];return l?(he=l.nextPos,l.result):(t=he,60===e.charCodeAt(he)?(n=V,he++):(n=i,0===je&&Me(B)),n!==i&&Ke()!==i&&(s=Qe())!==i?(44===e.charCodeAt(he)?(r=j,he++):(r=i,0===je&&Me(v)),r===i&&(r=null),r!==i?((a=Qe())===i&&(a=null),a!==i&&Ke()!==i?(62===e.charCodeAt(he)?(o=Q,he++):(o=i,0===je&&Me(H)),o!==i?(fe=t,t=n=J(s,a)):(he=t,t=i)):(he=t,t=i)):(he=t,t=i)):(he=t,t=i),ve[u]={nextPos:he,result:t},t)}function Qe(){var e,t,n=28*he+20,s=ve[n];return s?(he=s.nextPos,s.result):(e=he,(t=Ie())===i&&(t=Ce())===i&&(t=Re())===i&&(t=He())===i&&(t=qe())===i&&(t=Xe())===i&&(t=Ze())===i&&(t=ze())===i&&(t=We()),t!==i&&Ke()!==i?(fe=e,e=t=k(t)):(he=e,e=i),ve[n]={nextPos:he,result:e},e)}function He(){var t,n,s,r,a=28*he+21,o=ve[a];if(o)return he=o.nextPos,o.result;if(je++,t=he,Ke()!==i){if(n=he,s=[],X.test(e.charAt(he))?(r=e.charAt(he),he++):(r=i,0===je&&Me(K)),r!==i)for(;r!==i;)s.push(r),X.test(e.charAt(he))?(r=e.charAt(he),he++):(r=i,0===je&&Me(K));else s=i;(n=s!==i?e.substring(n,he):s)!==i&&(s=Ke())!==i?(fe=t,t=Y(n)):(he=t,t=i)}else he=t,t=i;return je--,t===i&&0===je&&Me(Z),ve[a]={nextPos:he,result:t},t}function Je(){var e,t,n,s=28*he+22,r=ve[s];if(r)return he=r.nextPos,r.result;if(e=he,Ke()!==i){if(t=[],(n=Ze())!==i)for(;n!==i;)t.push(n),n=Ze();else t=i;t!==i&&(n=Ke())!==i?(fe=e,e=ee(t)):(he=e,e=i)}else he=e,e=i;return ve[s]={nextPos:he,result:e},e}function Ze(){var t,n,s,r=28*he+23,a=ve[r];return a?(he=a.nextPos,a.result):(t=he,n=he,te.test(e.charAt(he))?(s=e.charAt(he),he++):(s=i,0===je&&Me(ne)),(n=s!==i?e.substring(n,he):s)!==i&&(fe=t,n=se(n)),t=n,ve[r]={nextPos:he,result:t},t)}function Xe(){var t,n,s,r,a,o,u,l=28*he+26,c=ve[l];if(c)return he=c.nextPos,c.result;if(t=he,45===e.charCodeAt(he)?(n=ae,he++):(n=i,0===je&&Me(oe)),n===i&&(n=null),n!==i){if(s=he,r=[],ue.test(e.charAt(he))?(a=e.charAt(he),he++):(a=i,0===je&&Me(le)),a!==i)for(;a!==i;)r.push(a),ue.test(e.charAt(he))?(a=e.charAt(he),he++):(a=i,0===je&&Me(le));else r=i;if(r!==i)if(46===e.charCodeAt(he)?(a=ie,he++):(a=i,0===je&&Me(re)),a!==i){for(o=[],ue.test(e.charAt(he))?(u=e.charAt(he),he++):(u=i,0===je&&Me(le));u!==i;)o.push(u),ue.test(e.charAt(he))?(u=e.charAt(he),he++):(u=i,0===je&&Me(le));o!==i?s=r=[r,a,o]:(he=s,s=i)}else he=s,s=i;else he=s,s=i;if(s===i)if(s=he,46===e.charCodeAt(he)?(r=ie,he++):(r=i,0===je&&Me(re)),r===i&&(r=null),r!==i){if(a=[],ue.test(e.charAt(he))?(o=e.charAt(he),he++):(o=i,0===je&&Me(le)),o!==i)for(;o!==i;)a.push(o),ue.test(e.charAt(he))?(o=e.charAt(he),he++):(o=i,0===je&&Me(le));else a=i;a!==i?s=r=[r,a]:(he=s,s=i)}else he=s,s=i;s!==i?(fe=t,t=n=ce()):(he=t,t=i)}else he=t,t=i;return ve[l]={nextPos:he,result:t},t}function Ke(){var t,n,s=28*he+27,r=ve[s];if(r)return he=r.nextPos,r.result;for(je++,t=[],pe.test(e.charAt(he))?(n=e.charAt(he),he++):(n=i,0===je&&Me(me));n!==i;)t.push(n),pe.test(e.charAt(he))?(n=e.charAt(he),he++):(n=i,0===je&&Me(me));return je--,t===i&&(n=i,0===je&&Me(de)),ve[s]={nextPos:he,result:t},t}const Ye=t.addLocations;let et=0;const tt=function(e,n){return!0===Ye&&(e.location=n),!0===t.addUID&&(e.uid=et++),e};if((n=a())!==i&&he===e.length)return n;throw n!==i&&he<e.length&&Me({type:"end"}),Ne(be,ye<e.length?e.charAt(ye):null,ye<e.length?Se(ye,ye+1):Se(ye,ye))}}},{}],165:[function(e,t,n){const s=e("../dist/tidal.js").parse,i=e("./queryArc.js").queryArc,r=e("fraction.js");t.exports=((e,t)=>{if("string"!=typeof e)throw"You must provide a string to generate the pattern from";let n;try{n=s(e,t)}catch(t){throw`We were unable to parse the pattern ${e}. ${t.toString()}`}const a={__rawString:e,__data:n,events:null,__sort:(e,t)=>e.arc.start.compare(t.arc.start),query:(e,t)=>("object"!=typeof e&&(e=r(e)),"object"!=typeof t&&(t=r(t)),a.events=i(a.__data,e,t).sort(a.__sort),a.events),print(){null!==a.events?a.events.forEach(e=>console.log(`${e.arc.start.toFraction()} - ${e.arc.end.toFraction()}: [ ${e.value.toString()} ]`)):console.log("No events have been generated from the pattern; have you queried it yet?")}};return a})},{"../dist/tidal.js":164,"./queryArc.js":166,"fraction.js":75}],166:[function(e,t,n){const s=e("fraction.js"),i=e("util"),r=e("bjork"),a=(i.inspect,e("seedrandom"),function(e,t,n){const i=t.clone(),r=i.add(n),a=c(t,h(e),r);let u;if(n.valueOf()<=1)u=o(e,n,a,null,null,!1);else{u=[];let t=0;for(let i=a.valueOf();i<a.add(n).valueOf();i++)u=u.concat(o(e,s(1),a.add(t++),null,null,!1))}return u=u.filter(e=>e.arc.start.valueOf()>=i.valueOf()&&e.arc.start.valueOf()<r.valueOf()).map(e=>(e.arc.start=e.arc.start.sub(i),e.arc.end=e.arc.end.sub(i),e))}),o=(e,t,n,s=null,i=null,r=!1)=>{const a=[];a.phase=n;let o=f[e.type](a,e,n.clone(),null!==s?t.div(s):t,i);return!0===r&&(null===s&&(s=h(e)),o=o.map(e=>({value:e.value,arc:l(e.arc,n.clone(),s)}))),o},u=(e,t)=>({start:e,end:t}),l=(e,t,n)=>{let s;return s=0!==t.mod(n).valueOf()?u(e.start.mul(n).add(t),e.end.mul(n).add(n.mod(t))):u(e.start.mul(n).add(t),e.end.mul(n).add(t))},c=(e,t,n)=>0===e.valueOf()?s(0):e.sub(e.mod(t)),d=(e,t,n)=>e+t<=n?e.add(t):n,p=(e,t,n)=>e+t<=n?t:n.sub(e),m=(e,t)=>{let n=0;return void 0!==e.options?!0===e.options.overrideIncr&&(n=t.div(e.options.incr).mod(e.values.length).floor()):n=t.mul(s(e.values.length)).mod(e.values.length).floor(),n.valueOf()},h=e=>{let t;switch(e.type){case"polymeter":t=s(1,e.left.values.length);break;case"number":case"string":t=s(1);break;case"onestep":t=null;break;default:t=void 0===e.values?s(1):s(1,e.values.length)}return t},f={rest:e=>e,group(e,t,n,i,r=null){const a=n.clone(),l=a.add(i),c=null===r?h(t):r;let f=[];for(;n.compare(l)<0;){const e=!0===Array.isArray(t.values)?t.values[m(t,n)]:t.value,i=p(n,c,l);if(void 0===e||isNaN(e.value)&&"string"!=typeof e.value){void 0!==e&&(e.parent=t);const r=o(e,s(1),s(0),null,null,!1).map(e=>(e.arc.start=e.arc.start.mul(i).add(n),e.arc.end=e.arc.end.mul(i).add(n),e));f=f.concat(r)}else{const t={value:e.value,arc:u(n,n.add(i))};void 0!==e.uid&&(t.uid=e.uid),f.push(t)}n=0===n.mod(c).valueOf()?d(n,c,l):n.add(c.sub(n.mod(c)))}return f=f.filter(e=>e.arc.start.valueOf()>=a.valueOf()&&e.arc.start.valueOf()<l.valueOf()),e.concat(f)},bjorklund(e,t,n,s){const i=r(t.pulses.value,t.slots.value);let a=null!==t.rotation?t.rotation.value:0;if(a>0)for(;a>0;){const e=i.pop();i.unshift(e),a--}else if(a<0)for(;a<0;){const e=i.shift();i.push(e),a++}const l=s.div(t.slots.value),c="number"===t.value.type||"string"===t.value.type;return i.map((e,s,i)=>{let r;if(1===e){const i=n.add(l.mul(s));r={shouldInclude:e,value:c?t.value:o(t.value,l,i)[0].value,arc:u(i,i.add(l))}}else r={shouldInclude:e};return r}).filter(e=>{let t=e.shouldInclude;return delete e.shouldInclude,1===t}).forEach(n=>{n.uid=t.value.uid,e.push(n)}),e},onestep:(e,t,n,i)=>(t.values.forEach(t=>{t.count=void 0===t.count?0:t.count+1;const r=t.values[t.count%t.values.length],a=i.valueOf()<=1?s(1):i,u=(i.mul(a),o(r,a,s(0),null,null,null,!0).map(e=>(e.arc.start=e.arc.start.mul(i).add(n),e.arc.end=e.arc.end.mul(i).add(n),e)));e.push(...u)}),e),number(e,t,n,s){const i={arc:u(n,n.add(s)),value:t.value};return void 0!==t.uid&&(i.uid=t.uid),e.push(i),e},string(e,t,n,s){const i={arc:u(n,n.add(s)),value:t.value};return void 0!==t.uid&&(i.uid=t.uid),e.push(i),e},degrade(e,t,n,s){if(Math.random()>.5){const i={arc:u(n,n.add(s)),value:t.value.value};void 0!==t.uid&&(i.uid=t.uid),e.push(i)}return e},polymeter(e,t,n,i){t.left.parent=t.right.parent=t;const r=s(1,t.left.values.length),a=o(t.left,i,n.clone(),i,r,!1);t.right.options={overrideIncr:!0,incr:r};const u=o(t.right,i,n.clone(),i,r,!1);return e.concat(a).concat(u)},layers(e,t,n,s){for(const i of t.values){h(i);const t=o(i,s.clone(),n.clone(),s,null,!1).filter(e=>e.arc.start.valueOf()>=n.valueOf()&&e.arc.start.valueOf()<n.add(s).valueOf());e=e.concat(t)}return e},slow(e,t,n,i){const r=t.rate.value;let o;n.sub(n.div(r));return void 0!==(o="layers"!==t.value.type?a(t.value,s(0),i.div(r)).map(e=>{e.arc.end.sub(e.arc.start);return e.arc.start=e.arc.start.add(n),e.arc.end=e.arc.start.add(i.mul(r)).add(n),e}):f.layers(e,t.value,n.div(r),i.div(r)))&&(e=e.concat(o)),e},speed(e,t,n,i){const r=t.rate.value,o=a(t.value,s(0),i.mul(r)).map(e=>(e.arc.start=e.arc.start.div(r).add(n),e.arc.end=e.arc.end.div(r).add(n),e));return e.concat(o)}};t.exports.queryArc=a},{bjork:72,"fraction.js":75,seedrandom:155,util:169}],167:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],168:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],169:[function(e,t,n){(function(t,s){var i=/%[sdj%]/g;n.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(o(arguments[n]));return t.join(" ")}n=1;for(var s=arguments,r=s.length,a=String(e).replace(i,function(e){if("%%"===e)return"%";if(n>=r)return e;switch(e){case"%s":return String(s[n++]);case"%d":return Number(s[n++]);case"%j":try{return JSON.stringify(s[n++])}catch(e){return"[Circular]"}default:return e}}),u=s[n];n<r;u=s[++n])f(u)||!v(u)?a+=" "+u:a+=" "+o(u);return a},n.deprecate=function(e,i){if(b(s.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(!0===t.noDeprecation)return e;var r=!1;return function(){if(!r){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),r=!0}return e.apply(this,arguments)}};var r,a={};function o(e,t){var s={seen:[],stylize:l};return arguments.length>=3&&(s.depth=arguments[2]),arguments.length>=4&&(s.colors=arguments[3]),h(t)?s.showHidden=t:t&&n._extend(s,t),b(s.showHidden)&&(s.showHidden=!1),b(s.depth)&&(s.depth=2),b(s.colors)&&(s.colors=!1),b(s.customInspect)&&(s.customInspect=!0),s.colors&&(s.stylize=u),c(s,e,s.depth)}function u(e,t){var n=o.styles[t];return n?"["+o.colors[n][0]+"m"+e+"["+o.colors[n][1]+"m":e}function l(e,t){return e}function c(e,t,s){if(e.customInspect&&t&&w(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(s,e);return y(i)||(i=c(e,i,s)),i}var r=function(e,t){if(b(t))return e.stylize("undefined","undefined");if(y(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(g(t))return e.stylize(""+t,"number");if(h(t))return e.stylize(""+t,"boolean");if(f(t))return e.stylize("null","null")}(e,t);if(r)return r;var a=Object.keys(t),o=function(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),_(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return d(t);if(0===a.length){if(w(t)){var u=t.name?": "+t.name:"";return e.stylize("[Function"+u+"]","special")}if(j(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(x(t))return e.stylize(Date.prototype.toString.call(t),"date");if(_(t))return d(t)}var l,v="",k=!1,$=["{","}"];(m(t)&&(k=!0,$=["[","]"]),w(t))&&(v=" [Function"+(t.name?": "+t.name:"")+"]");return j(t)&&(v=" "+RegExp.prototype.toString.call(t)),x(t)&&(v=" "+Date.prototype.toUTCString.call(t)),_(t)&&(v=" "+d(t)),0!==a.length||k&&0!=t.length?s<0?j(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),l=k?function(e,t,n,s,i){for(var r=[],a=0,o=t.length;a<o;++a)S(t,String(a))?r.push(p(e,t,n,s,String(a),!0)):r.push("");return i.forEach(function(i){i.match(/^\d+$/)||r.push(p(e,t,n,s,i,!0))}),r}(e,t,s,o,a):a.map(function(n){return p(e,t,s,o,n,k)}),e.seen.pop(),function(e,t,n){if(e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(l,v,$)):$[0]+v+$[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,n,s,i,r){var a,o,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?o=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(o=e.stylize("[Setter]","special")),S(s,i)||(a="["+i+"]"),o||(e.seen.indexOf(u.value)<0?(o=f(n)?c(e,u.value,null):c(e,u.value,n-1)).indexOf("\n")>-1&&(o=r?o.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+o.split("\n").map(function(e){return"   "+e}).join("\n")):o=e.stylize("[Circular]","special")),b(a)){if(r&&i.match(/^\d+$/))return o;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+o}function m(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function f(e){return null===e}function g(e){return"number"==typeof e}function y(e){return"string"==typeof e}function b(e){return void 0===e}function j(e){return v(e)&&"[object RegExp]"===k(e)}function v(e){return"object"==typeof e&&null!==e}function x(e){return v(e)&&"[object Date]"===k(e)}function _(e){return v(e)&&("[object Error]"===k(e)||e instanceof Error)}function w(e){return"function"==typeof e}function k(e){return Object.prototype.toString.call(e)}function $(e){return e<10?"0"+e.toString(10):e.toString(10)}n.debuglog=function(e){if(b(r)&&(r=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!a[e])if(new RegExp("\\b"+e+"\\b","i").test(r)){var s=t.pid;a[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,s,t)}}else a[e]=function(){};return a[e]},n.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=m,n.isBoolean=h,n.isNull=f,n.isNullOrUndefined=function(e){return null==e},n.isNumber=g,n.isString=y,n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=b,n.isRegExp=j,n.isObject=v,n.isDate=x,n.isError=_,n.isFunction=w,n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e("./support/isBuffer");var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function S(e,t){return Object.prototype.hasOwnProperty.call(e,t)}n.log=function(){var e,t;console.log("%s - %s",(e=new Date,t=[$(e.getHours()),$(e.getMinutes()),$(e.getSeconds())].join(":"),[e.getDate(),O[e.getMonth()],t].join(" ")),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!v(t))return e;for(var n=Object.keys(t),s=n.length;s--;)e[n[s]]=t[n[s]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:void 0!==window?window:{})},{"./support/isBuffer":168,_process:154,inherits:167}]},{},[35])(35)});class GibberishProcessor extends AudioWorkletProcessor{static get parameterDescriptors(){}constructor(e){super(e),(Gibberish=window.Gibberish).ctx={sampleRate:sampleRate},Gibberish.genish.hasWorklet=!1,Gibberish.preventProxy=!0,Gibberish.init(void 0,void 0,"processor"),Gibberish.preventProxy=!1,Gibberish.debug=!1,Gibberish.processor=this,this.port.onmessage=this.handleMessage.bind(this),this.queue=[],Gibberish.ugens=this.ugens=new Map,Gibberish.worklet={ugens:this.ugens},this.ugens.set(Gibberish.id,Gibberish),this.messages=[]}replaceProperties(e){if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const s=e[n];if(null!==s)if("object"==typeof s&&void 0!==s.id){let e=this.ugens.get(s.id);void 0!==e?(t[n]=void 0!==s.prop?e[s.prop]:e,void 0!==s.prop&&console.log("got a ssd.out",s,e)):t[n]=s}else{if(null===s)continue;"object"==typeof s&&"wrap"===s.action?t[n]=s.value.bind(null,...this.replaceProperties(s.args)):Array.isArray(s)?t[n]=this.replaceProperties(s):t[n]=s}}return t}{const t=e;for(let e in t){let n=t[e];if("object"==typeof n&&null!==n&&void 0!==n.id){let s=this.ugens.get(n.id);void 0!==s&&(t[e]=s)}else Array.isArray(n)?t[e]=this.replaceProperties(n):"object"==typeof n&&null!==n&&"wrap"===n.action&&(t[e]=n.value())}return t}}playQueue(){this.queue.forEach(e=>{e.data.delay=!1,this.handleMessage(e)}),this.queue.length=0}handleMessage(event){if(!0!==event.data.delay)if("add"===event.data.address){const rep=event.data;let constructor=Gibberish,properties=this.replaceProperties(eval("("+rep.properties+")")),ugen;if(properties.nogibberish)ugen=properties;else{for(let e=0;e<rep.name.length;e++)constructor=constructor[rep.name[e]];if(properties.id=rep.id,ugen=!0===properties.isop||!0===properties.isPattern?constructor(...properties.inputs):constructor(properties),properties.isPattern)for(let e in properties)"input"!==e&&"isPattern"!==e&&(ugen[e]=properties[e])}rep.post&&ugen[rep.post](),this.ugens.set(rep.id,ugen),ugen.id=rep.id,initialized=!0}else if("method"===event.data.address){const dict=event.data,obj=this.ugens.get(dict.object);if(void 0===obj||"function"!=typeof obj[dict.name])return;!0===dict.functions?obj[dict.name](eval("("+dict.args+")")):obj[dict.name](...dict.args.map(Gibberish.proxyReplace))}else if("property"===event.data.address){const e=event.data,t=this.ugens.get(e.object);let n=e.value;"object"==typeof e.value&&null!==e.value&&void 0!==e.value.id&&(n=this.ugens.get(e.value.id)),t[e.name]=n}else if("print"===event.data.address){const e=event.data,t=this.ugens.get(e.object);console.log("printing:",e.object,t)}else if("printProperty"===event.data.address){const e=event.data,t=this.ugens.get(e.object);console.log("printing:",t[e.name])}else if("set"===event.data.address){const e=event.data,t=this.ugens.get(e.object);let n=e.value;"object"==typeof e.value&&null!==e.value&&void 0!==e.value.id&&(n=this.ugens.get(e.value.id)),t[e.name]=n}else if("copy"===event.data.address){const e=this.ugens.get(event.data.id);void 0===e?this.queue.push(event):e.data.onload(event.data.buffer)}else if("callback"===event.data.address)console.log(Gibberish.callback.toString());else if("addConstructor"===event.data.address){const wrapper=eval("("+event.data.constructorString+")");Gibberish[event.data.name]=wrapper(Gibberish,Gibberish.genish)}else if("addMethod"===event.data.address){const target=this.ugens.get(event.data.id);void 0===target[event.data.key]&&(target[event.data.key]=eval("("+event.data.function+")"))}else if("monkeyPatch"===event.data.address){const target=this.ugens.get(event.data.id);void 0===target["___"+event.data.key]&&(target["___"+event.data.key]=target[event.data.key],target[event.data.key]=eval("("+event.data.function+")"))}else if("dirty"===event.data.address){const e=this.ugens.get(event.data.id);Gibberish.dirty(e)}else if("initialize"===event.data.address)initialized=!0;else if("addToProperty"===event.data.address){const e=event.data,t=this.ugens.get(e.object);t[e.name][e.key]=e.value}else if("addObjectToProperty"===event.data.address){const e=event.data,t=this.ugens.get(e.object);t[e.name][e.key]=this.ugens.get(e.value)}else"messages"===event.data.address?console.log("messages:",this.messages):"eval"===event.data.address&&eval(event.data.code);else this.queue.push(event)}process(e,t,n){if(!0===initialized){const e=Gibberish,n=e.scheduler;let s=this.callback,i=e.callbackUgens;if(this.messages.length=0,void 0===s&&!1===e.graphIsDirty)return!0;let r=e.blockCallbacks.length;if(0!==r){for(let t=0;t<r;t++)e.blockCallbacks[t]();e.blockCallbacks.splice(0,r)}const a=t[0],o=t[0][0].length;for(let t=0;t<o;++t){if(n.tick(),e.graphIsDirty){const t=s,n=i.slice(0),r=e.callbackNames.slice(0);let a;try{a=e.generateCallback()}catch(s){console.log("callback error:",s),a=t,e.callbackUgens=n,e.callbackNames=r,e.dirtyUgens.length=0,e.graphIsDirty=!1}finally{i=e.callbackUgens,this.callback=s=a,this.port.postMessage({address:"callback",code:a.toString()})}}const r=s.apply(null,i);a[0][t]=r[0],a[1][t]=r[1]}if(i.length>1)for(let e=1;e<i.length-1;e++){const t=i[e];void 0!==t.out&&this.messages.push(t.id,"output",t.out[0])}this.messages.length>0&&this.port.postMessage({address:"state",messages:this.messages})}return!0}}window.Gibberish.workletProcessor=GibberishProcessor,registerProcessor("gibberish",window.Gibberish.workletProcessor);